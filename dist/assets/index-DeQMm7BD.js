import{r as B,a as Dc,g as Ac,R as yl}from"./react-F9Y4d3HK.js";import{R as Oc,O as Pr,P as Rr,S as xl,a as sl,V as Uc,b as Lc,B as Bc,N as Va,A as Fc,W as Hc,C as jc,c as be,d as xe,e as bc,L as ll,f as Gc,U as fn,T as Wc,g as Ze,D as Vc,h as Qc,i as Yc,j as Xc,k as Ht,l as Li,M as Kc,m as Fe,n as Bi,F as Zc,o as qn,E as Pl,p as Qa,q as Ya,r as qc,s as ki,t as Ii,u as dn,v as Jc,w as Pn,x as ge,y as Xa,z as Ka,G as Za,H as $c,I as ef,J as ma,K as va,Q as ga,X as ya,Y as Gn,Z as Wn,_ as tf,$ as nf,a0 as rf,a1 as sf,a2 as _n}from"./three-SnEs-mOq.js";import{P as lf,g as ol,L as of}from"./mediapipe-BqIO_cNj.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const p of c)if(p.type==="childList")for(const f of p.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function a(c){const p={};return c.integrity&&(p.integrity=c.integrity),c.referrerPolicy&&(p.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?p.credentials="include":c.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function o(c){if(c.ep)return;c.ep=!0;const p=a(c);fetch(c.href,p)}})();var qa={exports:{}},Hi={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var af=B,uf=Symbol.for("react.element"),cf=Symbol.for("react.fragment"),ff=Object.prototype.hasOwnProperty,df=af.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hf={key:!0,ref:!0,__self:!0,__source:!0};function Ja(r,s,a){var o,c={},p=null,f=null;a!==void 0&&(p=""+a),s.key!==void 0&&(p=""+s.key),s.ref!==void 0&&(f=s.ref);for(o in s)ff.call(s,o)&&!hf.hasOwnProperty(o)&&(c[o]=s[o]);if(r&&r.defaultProps)for(o in s=r.defaultProps,s)c[o]===void 0&&(c[o]=s[o]);return{$$typeof:uf,type:r,key:p,ref:f,props:c,_owner:df.current}}Hi.Fragment=cf;Hi.jsx=Ja;Hi.jsxs=Ja;qa.exports=Hi;var D=qa.exports,$a,xa=Dc;$a=xa.createRoot,xa.hydrateRoot;var eu={exports:{}},Rn={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Rn.ConcurrentRoot=1;Rn.ContinuousEventPriority=4;Rn.DefaultEventPriority=16;Rn.DiscreteEventPriority=1;Rn.IdleEventPriority=536870912;Rn.LegacyRoot=0;eu.exports=Rn;var Kn=eu.exports;function pf(r){let s;const a=new Set,o=(T,d)=>{const m=typeof T=="function"?T(s):T;if(m!==s){const E=s;s=d?m:Object.assign({},s,m),a.forEach(S=>S(s,E))}},c=()=>s,p=(T,d=c,m=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let E=d(s);function S(){const P=d(s);if(!m(E,P)){const I=E;T(E=P,I)}}return a.add(S),()=>a.delete(S)},g={setState:o,getState:c,subscribe:(T,d,m)=>d||m?p(T,d,m):(a.add(T),()=>a.delete(T)),destroy:()=>a.clear()};return s=r(o,c,g),g}const mf=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Sa=mf?B.useEffect:B.useLayoutEffect;function vf(r){const s=typeof r=="function"?pf(r):r,a=(o=s.getState,c=Object.is)=>{const[,p]=B.useReducer(k=>k+1,0),f=s.getState(),v=B.useRef(f),g=B.useRef(o),T=B.useRef(c),d=B.useRef(!1),m=B.useRef();m.current===void 0&&(m.current=o(f));let E,S=!1;(v.current!==f||g.current!==o||T.current!==c||d.current)&&(E=o(f),S=!c(m.current,E)),Sa(()=>{S&&(m.current=E),v.current=f,g.current=o,T.current=c,d.current=!1});const P=B.useRef(f);Sa(()=>{const k=()=>{try{const _=s.getState(),C=g.current(_);T.current(m.current,C)||(v.current=_,m.current=C,p())}catch{d.current=!0,p()}},M=s.subscribe(k);return s.getState()!==P.current&&k(),M},[]);const I=S?E:m.current;return B.useDebugValue(I),I};return Object.assign(a,s),a[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const o=[a,s];return{next(){const c=o.length<=0;return{value:o.shift(),done:c}}}},a}var tu={exports:{}},nu={exports:{}},ru={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function s(j,Z){var Y=j.length;j.push(Z);e:for(;0<Y;){var ee=Y-1>>>1,ue=j[ee];if(0<c(ue,Z))j[ee]=Z,j[Y]=ue,Y=ee;else break e}}function a(j){return j.length===0?null:j[0]}function o(j){if(j.length===0)return null;var Z=j[0],Y=j.pop();if(Y!==Z){j[0]=Y;e:for(var ee=0,ue=j.length,fe=ue>>>1;ee<fe;){var ke=2*(ee+1)-1,Ge=j[ke],$e=ke+1,et=j[$e];if(0>c(Ge,Y))$e<ue&&0>c(et,Ge)?(j[ee]=et,j[$e]=Y,ee=$e):(j[ee]=Ge,j[ke]=Y,ee=ke);else if($e<ue&&0>c(et,Y))j[ee]=et,j[$e]=Y,ee=$e;else break e}}return Z}function c(j,Z){var Y=j.sortIndex-Z.sortIndex;return Y!==0?Y:j.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;r.unstable_now=function(){return p.now()}}else{var f=Date,v=f.now();r.unstable_now=function(){return f.now()-v}}var g=[],T=[],d=1,m=null,E=3,S=!1,P=!1,I=!1,k=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(j){for(var Z=a(T);Z!==null;){if(Z.callback===null)o(T);else if(Z.startTime<=j)o(T),Z.sortIndex=Z.expirationTime,s(g,Z);else break;Z=a(T)}}function O(j){if(I=!1,C(j),!P)if(a(g)!==null)P=!0,Te(A);else{var Z=a(T);Z!==null&&He(O,Z.startTime-j)}}function A(j,Z){P=!1,I&&(I=!1,M(G),G=-1),S=!0;var Y=E;try{for(C(Z),m=a(g);m!==null&&(!(m.expirationTime>Z)||j&&!H());){var ee=m.callback;if(typeof ee=="function"){m.callback=null,E=m.priorityLevel;var ue=ee(m.expirationTime<=Z);Z=r.unstable_now(),typeof ue=="function"?m.callback=ue:m===a(g)&&o(g),C(Z)}else o(g);m=a(g)}if(m!==null)var fe=!0;else{var ke=a(T);ke!==null&&He(O,ke.startTime-Z),fe=!1}return fe}finally{m=null,E=Y,S=!1}}var U=!1,X=null,G=-1,F=5,L=-1;function H(){return!(r.unstable_now()-L<F)}function $(){if(X!==null){var j=r.unstable_now();L=j;var Z=!0;try{Z=X(!0,j)}finally{Z?le():(U=!1,X=null)}}else U=!1}var le;if(typeof _=="function")le=function(){_($)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,Ne=ze.port2;ze.port1.onmessage=$,le=function(){Ne.postMessage(null)}}else le=function(){k($,0)};function Te(j){X=j,U||(U=!0,le())}function He(j,Z){G=k(function(){j(r.unstable_now())},Z)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(j){j.callback=null},r.unstable_continueExecution=function(){P||S||(P=!0,Te(A))},r.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<j?Math.floor(1e3/j):5},r.unstable_getCurrentPriorityLevel=function(){return E},r.unstable_getFirstCallbackNode=function(){return a(g)},r.unstable_next=function(j){switch(E){case 1:case 2:case 3:var Z=3;break;default:Z=E}var Y=E;E=Z;try{return j()}finally{E=Y}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(j,Z){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Y=E;E=j;try{return Z()}finally{E=Y}},r.unstable_scheduleCallback=function(j,Z,Y){var ee=r.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ee+Y:ee):Y=ee,j){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Y+ue,j={id:d++,callback:Z,priorityLevel:j,startTime:Y,expirationTime:ue,sortIndex:-1},Y>ee?(j.sortIndex=Y,s(T,j),a(g)===null&&j===a(T)&&(I?(M(G),G=-1):I=!0,He(O,Y-ee))):(j.sortIndex=ue,s(g,j),P||S||(P=!0,Te(A))),j},r.unstable_shouldYield=H,r.unstable_wrapCallback=function(j){var Z=E;return function(){var Y=E;E=Z;try{return j.apply(this,arguments)}finally{E=Y}}}})(ru);nu.exports=ru;var Sl=nu.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gf=function(s){var a={},o=B,c=Sl,p=Object.assign;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,g=Symbol.for("react.element"),T=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),P=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),O=Symbol.for("react.offscreen"),A=Symbol.iterator;function U(e){return e===null||typeof e!="object"?null:(e=A&&e[A]||e["@@iterator"],typeof e=="function"?e:null)}function X(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case d:return"Fragment";case T:return"Portal";case E:return"Profiler";case m:return"StrictMode";case k:return"Suspense";case M:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _:return t=e.displayName||null,t!==null?t:X(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return X(e(t))}catch{}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return X(t);case 8:return t===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function F(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function L(e){if(F(e)!==e)throw Error(f(188))}function H(e){var t=e.alternate;if(!t){if(t=F(e),t===null)throw Error(f(188));return t!==e?null:e}for(var n=e,i=t;;){var l=n.return;if(l===null)break;var u=l.alternate;if(u===null){if(i=l.return,i!==null){n=i;continue}break}if(l.child===u.child){for(u=l.child;u;){if(u===n)return L(l),e;if(u===i)return L(l),t;u=u.sibling}throw Error(f(188))}if(n.return!==i.return)n=l,i=u;else{for(var h=!1,y=l.child;y;){if(y===n){h=!0,n=l,i=u;break}if(y===i){h=!0,i=l,n=u;break}y=y.sibling}if(!h){for(y=u.child;y;){if(y===n){h=!0,n=u,i=l;break}if(y===i){h=!0,i=u,n=l;break}y=y.sibling}if(!h)throw Error(f(189))}}if(n.alternate!==i)throw Error(f(190))}if(n.tag!==3)throw Error(f(188));return n.stateNode.current===n?e:t}function $(e){return e=H(e),e!==null?le(e):null}function le(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=le(e);if(t!==null)return t;e=e.sibling}return null}function ze(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){if(e.tag!==4){var t=ze(e);if(t!==null)return t}e=e.sibling}return null}var Ne=Array.isArray,Te=s.getPublicInstance,He=s.getRootHostContext,j=s.getChildHostContext,Z=s.prepareForCommit,Y=s.resetAfterCommit,ee=s.createInstance,ue=s.appendInitialChild,fe=s.finalizeInitialChildren,ke=s.prepareUpdate,Ge=s.shouldSetTextContent,$e=s.createTextInstance,et=s.scheduleTimeout,jt=s.cancelTimeout,Nt=s.noTimeout,Kt=s.isPrimaryRenderer,ut=s.supportsMutation,hn=s.supportsPersistence,We=s.supportsHydration,zr=s.getInstanceFromNode,ji=s.preparePortalMount,bi=s.getCurrentEventPriority,Nr=s.detachDeletedInstance,kr=s.supportsMicrotasks,Ir=s.scheduleMicrotask,pn=s.supportsTestSelectors,Gi=s.findFiberRoot,Dr=s.getBoundingRect,Jn=s.getTextContent,Tt=s.isHiddenSubtree,Wi=s.matchAccessibilityRole,Vi=s.setFocusIfFocusable,Ar=s.setupIntersectionObserver,$n=s.appendChild,Qi=s.appendChildToContainer,Yi=s.commitTextUpdate,Or=s.commitMount,Xi=s.commitUpdate,Ki=s.insertBefore,Ur=s.insertInContainerBefore,er=s.removeChild,w=s.removeChildFromContainer,W=s.resetTextContent,re=s.hideInstance,de=s.hideTextInstance,Ie=s.unhideInstance,Mt=s.unhideTextInstance,kt=s.clearContainer,kl=s.cloneInstance,tr=s.createContainerChildSet,pt=s.appendChildToContainerChildSet,_t=s.finalizeContainerChildren,Zt=s.replaceContainerChildren,qt=s.cloneHiddenInstance,Jt=s.cloneHiddenTextInstance,Cn=s.canHydrateInstance,_u=s.canHydrateTextInstance,Pu=s.canHydrateSuspenseInstance,Il=s.isSuspenseInstancePending,Zi=s.isSuspenseInstanceFallback,Ru=s.registerSuspenseInstanceRetry,nr=s.getNextHydratableSibling,Cu=s.getFirstHydratableChild,zu=s.getFirstHydratableChildWithinContainer,Nu=s.getFirstHydratableChildWithinSuspenseInstance,ku=s.hydrateInstance,Iu=s.hydrateTextInstance,Du=s.hydrateSuspenseInstance,Au=s.getNextHydratableInstanceAfterSuspenseInstance,Dl=s.commitHydratedContainer,Ou=s.commitHydratedSuspenseInstance,Uu=s.clearSuspenseBoundary,Lu=s.clearSuspenseBoundaryFromContainer,Bu=s.shouldDeleteUnhydratedTailInstances,Fu=s.didNotMatchHydratedContainerTextInstance,Hu=s.didNotMatchHydratedTextInstance,qi;function rr(e){if(qi===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);qi=t&&t[1]||""}return`
`+qi+e}var Ji=!1;function $i(e,t){if(!e||Ji)return"";Ji=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(b){var i=b}Reflect.construct(e,[],t)}else{try{t.call()}catch(b){i=b}e.call(t.prototype)}else{try{throw Error()}catch(b){i=b}e()}}catch(b){if(b&&i&&typeof b.stack=="string"){for(var l=b.stack.split(`
`),u=i.stack.split(`
`),h=l.length-1,y=u.length-1;1<=h&&0<=y&&l[h]!==u[y];)y--;for(;1<=h&&0<=y;h--,y--)if(l[h]!==u[y]){if(h!==1||y!==1)do if(h--,y--,0>y||l[h]!==u[y]){var N=`
`+l[h].replace(" at new "," at ");return e.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",e.displayName)),N}while(1<=h&&0<=y);break}}}finally{Ji=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?rr(e):""}var ju=Object.prototype.hasOwnProperty,es=[],zn=-1;function $t(e){return{current:e}}function Ee(e){0>zn||(e.current=es[zn],es[zn]=null,zn--)}function Se(e,t){zn++,es[zn]=e.current,e.current=t}var en={},Ve=$t(en),rt=$t(!1),mn=en;function Nn(e,t){var n=e.type.contextTypes;if(!n)return en;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var l={},u;for(u in n)l[u]=t[u];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function it(e){return e=e.childContextTypes,e!=null}function Lr(){Ee(rt),Ee(Ve)}function Al(e,t,n){if(Ve.current!==en)throw Error(f(168));Se(Ve,t),Se(rt,n)}function Ol(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var l in i)if(!(l in t))throw Error(f(108,G(e)||"Unknown",l));return p({},n,i)}function Br(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||en,mn=Ve.current,Se(Ve,e),Se(rt,rt.current),!0}function Ul(e,t,n){var i=e.stateNode;if(!i)throw Error(f(169));n?(e=Ol(e,t,mn),i.__reactInternalMemoizedMergedChildContext=e,Ee(rt),Ee(Ve),Se(Ve,e)):Ee(rt),Se(rt,n)}var Pt=Math.clz32?Math.clz32:Wu,bu=Math.log,Gu=Math.LN2;function Wu(e){return e>>>=0,e===0?32:31-(bu(e)/Gu|0)|0}var Fr=64,Hr=4194304;function ir(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function jr(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,l=e.suspendedLanes,u=e.pingedLanes,h=n&268435455;if(h!==0){var y=h&~l;y!==0?i=ir(y):(u&=h,u!==0&&(i=ir(u)))}else h=n&~l,h!==0?i=ir(h):u!==0&&(i=ir(u));if(i===0)return 0;if(t!==0&&t!==i&&!(t&l)&&(l=i&-i,u=t&-t,l>=u||l===16&&(u&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-Pt(t),l=1<<n,i|=e[n],t&=~l;return i}function Vu(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qu(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,l=e.expirationTimes,u=e.pendingLanes;0<u;){var h=31-Pt(u),y=1<<h,N=l[h];N===-1?(!(y&n)||y&i)&&(l[h]=Vu(y,t)):N<=t&&(e.expiredLanes|=y),u&=~y}}function ts(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ns(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function sr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Pt(t),e[t]=n}function Yu(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-Pt(n),u=1<<l;t[l]=0,i[l]=-1,e[l]=-1,n&=~u}}function rs(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Pt(n),l=1<<i;l&t|e[i]&t&&(e[i]|=t),n&=~l}}var he=0;function Ll(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var is=c.unstable_scheduleCallback,Bl=c.unstable_cancelCallback,Xu=c.unstable_shouldYield,Ku=c.unstable_requestPaint,Ue=c.unstable_now,ss=c.unstable_ImmediatePriority,Zu=c.unstable_UserBlockingPriority,ls=c.unstable_NormalPriority,qu=c.unstable_IdlePriority,br=null,It=null;function Ju(e){if(It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(br,e,void 0,(e.current.flags&128)===128)}catch{}}function $u(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dt=typeof Object.is=="function"?Object.is:$u,bt=null,Gr=!1,os=!1;function Fl(e){bt===null?bt=[e]:bt.push(e)}function ec(e){Gr=!0,Fl(e)}function At(){if(!os&&bt!==null){os=!0;var e=0,t=he;try{var n=bt;for(he=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}bt=null,Gr=!1}catch(l){throw bt!==null&&(bt=bt.slice(e+1)),is(ss,At),l}finally{he=t,os=!1}}return null}var tc=v.ReactCurrentBatchConfig;function Wr(e,t){if(Dt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var l=n[i];if(!ju.call(t,l)||!Dt(e[l],t[l]))return!1}return!0}function nc(e){switch(e.tag){case 5:return rr(e.type);case 16:return rr("Lazy");case 13:return rr("Suspense");case 19:return rr("SuspenseList");case 0:case 2:case 15:return e=$i(e.type,!1),e;case 11:return e=$i(e.type.render,!1),e;case 1:return e=$i(e.type,!0),e;default:return""}}function Rt(e,t){if(e&&e.defaultProps){t=p({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Vr=$t(null),Qr=null,kn=null,as=null;function us(){as=kn=Qr=null}function Hl(e,t,n){Kt?(Se(Vr,t._currentValue),t._currentValue=n):(Se(Vr,t._currentValue2),t._currentValue2=n)}function cs(e){var t=Vr.current;Ee(Vr),Kt?e._currentValue=t:e._currentValue2=t}function fs(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function In(e,t){Qr=e,as=kn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(dt=!0),e.firstContext=null)}function mt(e){var t=Kt?e._currentValue:e._currentValue2;if(as!==e)if(e={context:e,memoizedValue:t,next:null},kn===null){if(Qr===null)throw Error(f(308));kn=e,Qr.dependencies={lanes:0,firstContext:e}}else kn=kn.next=e;return t}var Ot=null,tn=!1;function ds(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function nn(e,t){var n=e.updateQueue;n!==null&&(n=n.shared,De!==null&&e.mode&1&&!(ae&2)?(e=n.interleaved,e===null?(t.next=t,Ot===null?Ot=[n]:Ot.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(e=n.pending,e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function Yr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,rs(e,n)}}function bl(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var l=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var h={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};u===null?l=u=h:u=u.next=h,n=n.next}while(n!==null);u===null?l=u=t:u=u.next=t}else l=u=t;n={baseState:i.baseState,firstBaseUpdate:l,lastBaseUpdate:u,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Xr(e,t,n,i){var l=e.updateQueue;tn=!1;var u=l.firstBaseUpdate,h=l.lastBaseUpdate,y=l.shared.pending;if(y!==null){l.shared.pending=null;var N=y,b=N.next;N.next=null,h===null?u=b:h.next=b,h=N;var K=e.alternate;K!==null&&(K=K.updateQueue,y=K.lastBaseUpdate,y!==h&&(y===null?K.firstBaseUpdate=b:y.next=b,K.lastBaseUpdate=N))}if(u!==null){var ie=l.baseState;h=0,K=b=N=null,y=u;do{var te=y.lane,ye=y.eventTime;if((i&te)===te){K!==null&&(K=K.next={eventTime:ye,lane:0,tag:y.tag,payload:y.payload,callback:y.callback,next:null});e:{var J=e,Ke=y;switch(te=t,ye=n,Ke.tag){case 1:if(J=Ke.payload,typeof J=="function"){ie=J.call(ye,ie,te);break e}ie=J;break e;case 3:J.flags=J.flags&-65537|128;case 0:if(J=Ke.payload,te=typeof J=="function"?J.call(ye,ie,te):J,te==null)break e;ie=p({},ie,te);break e;case 2:tn=!0}}y.callback!==null&&y.lane!==0&&(e.flags|=64,te=l.effects,te===null?l.effects=[y]:te.push(y))}else ye={eventTime:ye,lane:te,tag:y.tag,payload:y.payload,callback:y.callback,next:null},K===null?(b=K=ye,N=ie):K=K.next=ye,h|=te;if(y=y.next,y===null){if(y=l.shared.pending,y===null)break;te=y,y=te.next,te.next=null,l.lastBaseUpdate=te,l.shared.pending=null}}while(!0);if(K===null&&(N=ie),l.baseState=N,l.firstBaseUpdate=b,l.lastBaseUpdate=K,t=l.shared.interleaved,t!==null){l=t;do h|=l.lane,l=l.next;while(l!==t)}else u===null&&(l.shared.lanes=0);jn|=h,e.lanes=h,e.memoizedState=ie}}function Gl(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],l=i.callback;if(l!==null){if(i.callback=null,i=n,typeof l!="function")throw Error(f(191,l));l.call(i)}}}var Wl=new o.Component().refs;function hs(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:p({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Kr={isMounted:function(e){return(e=e._reactInternals)?F(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=nt(),l=ln(e),u=Gt(i,l);u.payload=t,n!=null&&(u.callback=n),nn(e,u),t=St(e,l,i),t!==null&&Yr(t,e,l)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=nt(),l=ln(e),u=Gt(i,l);u.tag=1,u.payload=t,n!=null&&(u.callback=n),nn(e,u),t=St(e,l,i),t!==null&&Yr(t,e,l)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nt(),i=ln(e),l=Gt(n,i);l.tag=2,t!=null&&(l.callback=t),nn(e,l),t=St(e,i,n),t!==null&&Yr(t,e,i)}};function Vl(e,t,n,i,l,u,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,u,h):t.prototype&&t.prototype.isPureReactComponent?!Wr(n,i)||!Wr(l,u):!0}function Ql(e,t,n){var i=!1,l=en,u=t.contextType;return typeof u=="object"&&u!==null?u=mt(u):(l=it(t)?mn:Ve.current,i=t.contextTypes,u=(i=i!=null)?Nn(e,l):en),t=new t(n,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Kr,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=u),t}function Yl(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Kr.enqueueReplaceState(t,t.state,null)}function ps(e,t,n,i){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs=Wl,ds(e);var u=t.contextType;typeof u=="object"&&u!==null?l.context=mt(u):(u=it(t)?mn:Ve.current,l.context=Nn(e,u)),l.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(hs(e,t,u,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Kr.enqueueReplaceState(l,l.state,null),Xr(e,n,l,i),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}var Dn=[],An=0,Zr=null,qr=0,vt=[],gt=0,vn=null,Wt=1,Vt="";function gn(e,t){Dn[An++]=qr,Dn[An++]=Zr,Zr=e,qr=t}function Xl(e,t,n){vt[gt++]=Wt,vt[gt++]=Vt,vt[gt++]=vn,vn=e;var i=Wt;e=Vt;var l=32-Pt(i)-1;i&=~(1<<l),n+=1;var u=32-Pt(t)+l;if(30<u){var h=l-l%5;u=(i&(1<<h)-1).toString(32),i>>=h,l-=h,Wt=1<<32-Pt(t)+l|n<<l|i,Vt=u+e}else Wt=1<<u|n<<l|i,Vt=e}function ms(e){e.return!==null&&(gn(e,1),Xl(e,1,0))}function vs(e){for(;e===Zr;)Zr=Dn[--An],Dn[An]=null,qr=Dn[--An],Dn[An]=null;for(;e===vn;)vn=vt[--gt],vt[gt]=null,Vt=vt[--gt],vt[gt]=null,Wt=vt[--gt],vt[gt]=null}var ct=null,ft=null,Me=!1,lr=!1,Ct=null;function Kl(e,t){var n=Et(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Zl(e,t){switch(e.tag){case 5:return t=Cn(t,e.type,e.pendingProps),t!==null?(e.stateNode=t,ct=e,ft=Cu(t),!0):!1;case 6:return t=_u(t,e.pendingProps),t!==null?(e.stateNode=t,ct=e,ft=null,!0):!1;case 13:if(t=Pu(t),t!==null){var n=vn!==null?{id:Wt,overflow:Vt}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Et(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ct=e,ft=null,!0}return!1;default:return!1}}function gs(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ys(e){if(Me){var t=ft;if(t){var n=t;if(!Zl(e,t)){if(gs(e))throw Error(f(418));t=nr(n);var i=ct;t&&Zl(e,t)?Kl(i,n):(e.flags=e.flags&-4097|2,Me=!1,ct=e)}}else{if(gs(e))throw Error(f(418));e.flags=e.flags&-4097|2,Me=!1,ct=e}}}function ql(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ct=e}function or(e){if(!We||e!==ct)return!1;if(!Me)return ql(e),Me=!0,!1;if(e.tag!==3&&(e.tag!==5||Bu(e.type)&&!Ge(e.type,e.memoizedProps))){var t=ft;if(t){if(gs(e)){for(e=ft;e;)e=nr(e);throw Error(f(418))}for(;t;)Kl(e,t),t=nr(t)}}if(ql(e),e.tag===13){if(!We)throw Error(f(316));if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(317));ft=Au(e)}else ft=ct?nr(e.stateNode):null;return!0}function On(){We&&(ft=ct=null,lr=Me=!1)}function xs(e){Ct===null?Ct=[e]:Ct.push(e)}function ar(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(f(309));var i=n.stateNode}if(!i)throw Error(f(147,e));var l=i,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(h){var y=l.refs;y===Wl&&(y=l.refs={}),h===null?delete y[u]:y[u]=h},t._stringRef=u,t)}if(typeof e!="string")throw Error(f(284));if(!n._owner)throw Error(f(290,e))}return e}function Jr(e,t){throw e=Object.prototype.toString.call(t),Error(f(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jl(e){var t=e._init;return t(e._payload)}function $l(e){function t(R,x){if(e){var z=R.deletions;z===null?(R.deletions=[x],R.flags|=16):z.push(x)}}function n(R,x){if(!e)return null;for(;x!==null;)t(R,x),x=x.sibling;return null}function i(R,x){for(R=new Map;x!==null;)x.key!==null?R.set(x.key,x):R.set(x.index,x),x=x.sibling;return R}function l(R,x){return R=an(R,x),R.index=0,R.sibling=null,R}function u(R,x,z){return R.index=z,e?(z=R.alternate,z!==null?(z=z.index,z<x?(R.flags|=2,x):z):(R.flags|=2,x)):(R.flags|=1048576,x)}function h(R){return e&&R.alternate===null&&(R.flags|=2),R}function y(R,x,z,Q){return x===null||x.tag!==6?(x=nl(z,R.mode,Q),x.return=R,x):(x=l(x,z),x.return=R,x)}function N(R,x,z,Q){var q=z.type;return q===d?K(R,x,z.props.children,Q,z.key):x!==null&&(x.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===C&&Jl(q)===x.type)?(Q=l(x,z.props),Q.ref=ar(R,x,z),Q.return=R,Q):(Q=zi(z.type,z.key,z.props,null,R.mode,Q),Q.ref=ar(R,x,z),Q.return=R,Q)}function b(R,x,z,Q){return x===null||x.tag!==4||x.stateNode.containerInfo!==z.containerInfo||x.stateNode.implementation!==z.implementation?(x=rl(z,R.mode,Q),x.return=R,x):(x=l(x,z.children||[]),x.return=R,x)}function K(R,x,z,Q,q){return x===null||x.tag!==7?(x=Mn(z,R.mode,Q,q),x.return=R,x):(x=l(x,z),x.return=R,x)}function ie(R,x,z){if(typeof x=="string"&&x!==""||typeof x=="number")return x=nl(""+x,R.mode,z),x.return=R,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case g:return z=zi(x.type,x.key,x.props,null,R.mode,z),z.ref=ar(R,null,x),z.return=R,z;case T:return x=rl(x,R.mode,z),x.return=R,x;case C:var Q=x._init;return ie(R,Q(x._payload),z)}if(Ne(x)||U(x))return x=Mn(x,R.mode,z,null),x.return=R,x;Jr(R,x)}return null}function te(R,x,z,Q){var q=x!==null?x.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return q!==null?null:y(R,x,""+z,Q);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case g:return z.key===q?N(R,x,z,Q):null;case T:return z.key===q?b(R,x,z,Q):null;case C:return q=z._init,te(R,x,q(z._payload),Q)}if(Ne(z)||U(z))return q!==null?null:K(R,x,z,Q,null);Jr(R,z)}return null}function ye(R,x,z,Q,q){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return R=R.get(z)||null,y(x,R,""+Q,q);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case g:return R=R.get(Q.key===null?z:Q.key)||null,N(x,R,Q,q);case T:return R=R.get(Q.key===null?z:Q.key)||null,b(x,R,Q,q);case C:var oe=Q._init;return ye(R,x,z,oe(Q._payload),q)}if(Ne(Q)||U(Q))return R=R.get(z)||null,K(x,R,Q,q,null);Jr(x,Q)}return null}function J(R,x,z,Q){for(var q=null,oe=null,se=x,pe=x=0,Be=null;se!==null&&pe<z.length;pe++){se.index>pe?(Be=se,se=null):Be=se.sibling;var me=te(R,se,z[pe],Q);if(me===null){se===null&&(se=Be);break}e&&se&&me.alternate===null&&t(R,se),x=u(me,x,pe),oe===null?q=me:oe.sibling=me,oe=me,se=Be}if(pe===z.length)return n(R,se),Me&&gn(R,pe),q;if(se===null){for(;pe<z.length;pe++)se=ie(R,z[pe],Q),se!==null&&(x=u(se,x,pe),oe===null?q=se:oe.sibling=se,oe=se);return Me&&gn(R,pe),q}for(se=i(R,se);pe<z.length;pe++)Be=ye(se,R,pe,z[pe],Q),Be!==null&&(e&&Be.alternate!==null&&se.delete(Be.key===null?pe:Be.key),x=u(Be,x,pe),oe===null?q=Be:oe.sibling=Be,oe=Be);return e&&se.forEach(function(un){return t(R,un)}),Me&&gn(R,pe),q}function Ke(R,x,z,Q){var q=U(z);if(typeof q!="function")throw Error(f(150));if(z=q.call(z),z==null)throw Error(f(151));for(var oe=q=null,se=x,pe=x=0,Be=null,me=z.next();se!==null&&!me.done;pe++,me=z.next()){se.index>pe?(Be=se,se=null):Be=se.sibling;var un=te(R,se,me.value,Q);if(un===null){se===null&&(se=Be);break}e&&se&&un.alternate===null&&t(R,se),x=u(un,x,pe),oe===null?q=un:oe.sibling=un,oe=un,se=Be}if(me.done)return n(R,se),Me&&gn(R,pe),q;if(se===null){for(;!me.done;pe++,me=z.next())me=ie(R,me.value,Q),me!==null&&(x=u(me,x,pe),oe===null?q=me:oe.sibling=me,oe=me);return Me&&gn(R,pe),q}for(se=i(R,se);!me.done;pe++,me=z.next())me=ye(se,R,pe,me.value,Q),me!==null&&(e&&me.alternate!==null&&se.delete(me.key===null?pe:me.key),x=u(me,x,pe),oe===null?q=me:oe.sibling=me,oe=me);return e&&se.forEach(function(Ic){return t(R,Ic)}),Me&&gn(R,pe),q}function wt(R,x,z,Q){if(typeof z=="object"&&z!==null&&z.type===d&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case g:e:{for(var q=z.key,oe=x;oe!==null;){if(oe.key===q){if(q=z.type,q===d){if(oe.tag===7){n(R,oe.sibling),x=l(oe,z.props.children),x.return=R,R=x;break e}}else if(oe.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===C&&Jl(q)===oe.type){n(R,oe.sibling),x=l(oe,z.props),x.ref=ar(R,oe,z),x.return=R,R=x;break e}n(R,oe);break}else t(R,oe);oe=oe.sibling}z.type===d?(x=Mn(z.props.children,R.mode,Q,z.key),x.return=R,R=x):(Q=zi(z.type,z.key,z.props,null,R.mode,Q),Q.ref=ar(R,x,z),Q.return=R,R=Q)}return h(R);case T:e:{for(oe=z.key;x!==null;){if(x.key===oe)if(x.tag===4&&x.stateNode.containerInfo===z.containerInfo&&x.stateNode.implementation===z.implementation){n(R,x.sibling),x=l(x,z.children||[]),x.return=R,R=x;break e}else{n(R,x);break}else t(R,x);x=x.sibling}x=rl(z,R.mode,Q),x.return=R,R=x}return h(R);case C:return oe=z._init,wt(R,x,oe(z._payload),Q)}if(Ne(z))return J(R,x,z,Q);if(U(z))return Ke(R,x,z,Q);Jr(R,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,x!==null&&x.tag===6?(n(R,x.sibling),x=l(x,z),x.return=R,R=x):(n(R,x),x=nl(z,R.mode,Q),x.return=R,R=x),h(R)):n(R,x)}return wt}var Un=$l(!0),eo=$l(!1),ur={},yt=$t(ur),cr=$t(ur),Ln=$t(ur);function Ut(e){if(e===ur)throw Error(f(174));return e}function Ss(e,t){Se(Ln,t),Se(cr,e),Se(yt,ur),e=He(t),Ee(yt),Se(yt,e)}function Bn(){Ee(yt),Ee(cr),Ee(Ln)}function to(e){var t=Ut(Ln.current),n=Ut(yt.current);t=j(n,e.type,t),n!==t&&(Se(cr,e),Se(yt,t))}function Es(e){cr.current===e&&(Ee(yt),Ee(cr))}var _e=$t(0);function $r(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Il(n)||Zi(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ws=[];function Ts(){for(var e=0;e<ws.length;e++){var t=ws[e];Kt?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}ws.length=0}var ei=v.ReactCurrentDispatcher,xt=v.ReactCurrentBatchConfig,Fn=0,Pe=null,Qe=null,Le=null,ti=!1,fr=!1,dr=0,rc=0;function Ye(){throw Error(f(321))}function Ms(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Dt(e[n],t[n]))return!1;return!0}function _s(e,t,n,i,l,u){if(Fn=u,Pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ei.current=e===null||e.memoizedState===null?oc:ac,e=n(i,l),fr){u=0;do{if(fr=!1,dr=0,25<=u)throw Error(f(301));u+=1,Le=Qe=null,t.updateQueue=null,ei.current=uc,e=n(i,l)}while(fr)}if(ei.current=li,t=Qe!==null&&Qe.next!==null,Fn=0,Le=Qe=Pe=null,ti=!1,t)throw Error(f(300));return e}function Ps(){var e=dr!==0;return dr=0,e}function Qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?Pe.memoizedState=Le=e:Le=Le.next=e,Le}function Lt(){if(Qe===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var t=Le===null?Pe.memoizedState:Le.next;if(t!==null)Le=t,Qe=e;else{if(e===null)throw Error(f(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},Le===null?Pe.memoizedState=Le=e:Le=Le.next=e}return Le}function yn(e,t){return typeof t=="function"?t(e):t}function ni(e){var t=Lt(),n=t.queue;if(n===null)throw Error(f(311));n.lastRenderedReducer=e;var i=Qe,l=i.baseQueue,u=n.pending;if(u!==null){if(l!==null){var h=l.next;l.next=u.next,u.next=h}i.baseQueue=l=u,n.pending=null}if(l!==null){u=l.next,i=i.baseState;var y=h=null,N=null,b=u;do{var K=b.lane;if((Fn&K)===K)N!==null&&(N=N.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),i=b.hasEagerState?b.eagerState:e(i,b.action);else{var ie={lane:K,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};N===null?(y=N=ie,h=i):N=N.next=ie,Pe.lanes|=K,jn|=K}b=b.next}while(b!==null&&b!==u);N===null?h=i:N.next=y,Dt(i,t.memoizedState)||(dt=!0),t.memoizedState=i,t.baseState=h,t.baseQueue=N,n.lastRenderedState=i}if(e=n.interleaved,e!==null){l=e;do u=l.lane,Pe.lanes|=u,jn|=u,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ri(e){var t=Lt(),n=t.queue;if(n===null)throw Error(f(311));n.lastRenderedReducer=e;var i=n.dispatch,l=n.pending,u=t.memoizedState;if(l!==null){n.pending=null;var h=l=l.next;do u=e(u,h.action),h=h.next;while(h!==l);Dt(u,t.memoizedState)||(dt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),n.lastRenderedState=u}return[u,i]}function no(){}function ro(e,t){var n=Pe,i=Lt(),l=t(),u=!Dt(i.memoizedState,l);if(u&&(i.memoizedState=l,dt=!0),i=i.queue,pr(lo.bind(null,n,i,e),[e]),i.getSnapshot!==t||u||Le!==null&&Le.memoizedState.tag&1){if(n.flags|=2048,hr(9,so.bind(null,n,i,l,t),void 0,null),De===null)throw Error(f(349));Fn&30||io(n,t,l)}return l}function io(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function so(e,t,n,i){t.value=n,t.getSnapshot=i,oo(t)&&St(e,1,-1)}function lo(e,t,n){return n(function(){oo(t)&&St(e,1,-1)})}function oo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Dt(e,n)}catch{return!0}}function Rs(e){var t=Qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:e},t.queue=e,e=e.dispatch=lc.bind(null,Pe,e),[t.memoizedState,e]}function hr(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function ao(){return Lt().memoizedState}function ii(e,t,n,i){var l=Qt();Pe.flags|=e,l.memoizedState=hr(1|t,n,void 0,i===void 0?null:i)}function si(e,t,n,i){var l=Lt();i=i===void 0?null:i;var u=void 0;if(Qe!==null){var h=Qe.memoizedState;if(u=h.destroy,i!==null&&Ms(i,h.deps)){l.memoizedState=hr(t,n,u,i);return}}Pe.flags|=e,l.memoizedState=hr(1|t,n,u,i)}function Cs(e,t){return ii(8390656,8,e,t)}function pr(e,t){return si(2048,8,e,t)}function uo(e,t){return si(4,2,e,t)}function co(e,t){return si(4,4,e,t)}function fo(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ho(e,t,n){return n=n!=null?n.concat([e]):null,si(4,4,fo.bind(null,t,e),n)}function zs(){}function po(e,t){var n=Lt();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Ms(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function mo(e,t){var n=Lt();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Ms(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function ic(e,t){var n=he;he=n!==0&&4>n?n:4,e(!0);var i=xt.transition;xt.transition={};try{e(!1),t()}finally{he=n,xt.transition=i}}function vo(){return Lt().memoizedState}function sc(e,t,n){var i=ln(e);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},go(e)?yo(t,n):(xo(e,t,n),n=nt(),e=St(e,i,n),e!==null&&So(e,t,i))}function lc(e,t,n){var i=ln(e),l={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(go(e))yo(t,l);else{xo(e,t,l);var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var h=t.lastRenderedState,y=u(h,n);if(l.hasEagerState=!0,l.eagerState=y,Dt(y,h))return}catch{}finally{}n=nt(),e=St(e,i,n),e!==null&&So(e,t,i)}}function go(e){var t=e.alternate;return e===Pe||t!==null&&t===Pe}function yo(e,t){fr=ti=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function xo(e,t,n){De!==null&&e.mode&1&&!(ae&2)?(e=t.interleaved,e===null?(n.next=n,Ot===null?Ot=[t]:Ot.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(e=t.pending,e===null?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function So(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,rs(e,n)}}var li={readContext:mt,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},oc={readContext:mt,useCallback:function(e,t){return Qt().memoizedState=[e,t===void 0?null:t],e},useContext:mt,useEffect:Cs,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ii(4194308,4,fo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ii(4194308,4,e,t)},useInsertionEffect:function(e,t){return ii(4,2,e,t)},useMemo:function(e,t){var n=Qt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Qt();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=sc.bind(null,Pe,e),[i.memoizedState,e]},useRef:function(e){var t=Qt();return e={current:e},t.memoizedState=e},useState:Rs,useDebugValue:zs,useDeferredValue:function(e){var t=Rs(e),n=t[0],i=t[1];return Cs(function(){var l=xt.transition;xt.transition={};try{i(e)}finally{xt.transition=l}},[e]),n},useTransition:function(){var e=Rs(!1),t=e[0];return e=ic.bind(null,e[1]),Qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Pe,l=Qt();if(Me){if(n===void 0)throw Error(f(407));n=n()}else{if(n=t(),De===null)throw Error(f(349));Fn&30||io(i,t,n)}l.memoizedState=n;var u={value:n,getSnapshot:t};return l.queue=u,Cs(lo.bind(null,i,u,e),[e]),i.flags|=2048,hr(9,so.bind(null,i,u,n,t),void 0,null),n},useId:function(){var e=Qt(),t=De.identifierPrefix;if(Me){var n=Vt,i=Wt;n=(i&~(1<<32-Pt(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=dr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=rc++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ac={readContext:mt,useCallback:po,useContext:mt,useEffect:pr,useImperativeHandle:ho,useInsertionEffect:uo,useLayoutEffect:co,useMemo:mo,useReducer:ni,useRef:ao,useState:function(){return ni(yn)},useDebugValue:zs,useDeferredValue:function(e){var t=ni(yn),n=t[0],i=t[1];return pr(function(){var l=xt.transition;xt.transition={};try{i(e)}finally{xt.transition=l}},[e]),n},useTransition:function(){var e=ni(yn)[0],t=Lt().memoizedState;return[e,t]},useMutableSource:no,useSyncExternalStore:ro,useId:vo,unstable_isNewReconciler:!1},uc={readContext:mt,useCallback:po,useContext:mt,useEffect:pr,useImperativeHandle:ho,useInsertionEffect:uo,useLayoutEffect:co,useMemo:mo,useReducer:ri,useRef:ao,useState:function(){return ri(yn)},useDebugValue:zs,useDeferredValue:function(e){var t=ri(yn),n=t[0],i=t[1];return pr(function(){var l=xt.transition;xt.transition={};try{i(e)}finally{xt.transition=l}},[e]),n},useTransition:function(){var e=ri(yn)[0],t=Lt().memoizedState;return[e,t]},useMutableSource:no,useSyncExternalStore:ro,useId:vo,unstable_isNewReconciler:!1};function Ns(e,t){try{var n="",i=t;do n+=nc(i),i=i.return;while(i);var l=n}catch(u){l=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:l}}function ks(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var cc=typeof WeakMap=="function"?WeakMap:Map;function Eo(e,t,n){n=Gt(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){wi||(wi=!0,Ks=i),ks(e,t)},n}function wo(e,t,n){n=Gt(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var l=t.value;n.payload=function(){return i(l)},n.callback=function(){ks(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(n.callback=function(){ks(e,t),typeof i!="function"&&(rn===null?rn=new Set([this]):rn.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),n}function To(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new cc;var l=new Set;i.set(t,l)}else l=i.get(t),l===void 0&&(l=new Set,i.set(t,l));l.has(n)||(l.add(n),e=Mc.bind(null,e,t,n),t.then(e,e))}function Mo(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _o(e,t,n,i,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Gt(-1,1),t.tag=2,nn(n,t))),n.lanes|=1),e)}function Bt(e){e.flags|=4}function Po(e,t){if(e!==null&&e.child===t.child)return!0;if(t.flags&16)return!1;for(e=t.child;e!==null;){if(e.flags&12854||e.subtreeFlags&12854)return!1;e=e.sibling}return!0}var mr,vr,oi,ai;if(ut)mr=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)ue(e,n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},vr=function(){},oi=function(e,t,n,i,l){if(e=e.memoizedProps,e!==i){var u=t.stateNode,h=Ut(yt.current);n=ke(u,n,e,i,l,h),(t.updateQueue=n)&&Bt(t)}},ai=function(e,t,n,i){n!==i&&Bt(t)};else if(hn){mr=function(e,t,n,i){for(var l=t.child;l!==null;){if(l.tag===5){var u=l.stateNode;n&&i&&(u=qt(u,l.type,l.memoizedProps,l)),ue(e,u)}else if(l.tag===6)u=l.stateNode,n&&i&&(u=Jt(u,l.memoizedProps,l)),ue(e,u);else if(l.tag!==4){if(l.tag===22&&l.memoizedState!==null)u=l.child,u!==null&&(u.return=l),mr(e,l,!0,!0);else if(l.child!==null){l.child.return=l,l=l.child;continue}}if(l===t)break;for(;l.sibling===null;){if(l.return===null||l.return===t)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};var Ro=function(e,t,n,i){for(var l=t.child;l!==null;){if(l.tag===5){var u=l.stateNode;n&&i&&(u=qt(u,l.type,l.memoizedProps,l)),pt(e,u)}else if(l.tag===6)u=l.stateNode,n&&i&&(u=Jt(u,l.memoizedProps,l)),pt(e,u);else if(l.tag!==4){if(l.tag===22&&l.memoizedState!==null)u=l.child,u!==null&&(u.return=l),Ro(e,l,!0,!0);else if(l.child!==null){l.child.return=l,l=l.child;continue}}if(l===t)break;for(;l.sibling===null;){if(l.return===null||l.return===t)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};vr=function(e,t){var n=t.stateNode;if(!Po(e,t)){e=n.containerInfo;var i=tr(e);Ro(i,t,!1,!1),n.pendingChildren=i,Bt(t),_t(e,i)}},oi=function(e,t,n,i,l){var u=e.stateNode,h=e.memoizedProps;if((e=Po(e,t))&&h===i)t.stateNode=u;else{var y=t.stateNode,N=Ut(yt.current),b=null;h!==i&&(b=ke(y,n,h,i,l,N)),e&&b===null?t.stateNode=u:(u=kl(u,b,n,h,i,t,e,y),fe(u,n,i,l,N)&&Bt(t),t.stateNode=u,e?Bt(t):mr(u,t,!1,!1))}},ai=function(e,t,n,i){n!==i?(e=Ut(Ln.current),n=Ut(yt.current),t.stateNode=$e(i,e,n,t),Bt(t)):t.stateNode=e.stateNode}}else vr=function(){},oi=function(){},ai=function(){};function gr(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,i|=l.subtreeFlags&14680064,i|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,i|=l.subtreeFlags,i|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function fc(e,t,n){var i=t.pendingProps;switch(vs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return it(t.type)&&Lr(),Xe(t),null;case 3:return i=t.stateNode,Bn(),Ee(rt),Ee(Ve),Ts(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(or(t)?Bt(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ct!==null&&(Js(Ct),Ct=null))),vr(e,t),Xe(t),null;case 5:Es(t),n=Ut(Ln.current);var l=t.type;if(e!==null&&t.stateNode!=null)oi(e,t,l,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(f(166));return Xe(t),null}if(e=Ut(yt.current),or(t)){if(!We)throw Error(f(175));e=ku(t.stateNode,t.type,t.memoizedProps,n,e,t,!lr),t.updateQueue=e,e!==null&&Bt(t)}else{var u=ee(l,i,n,e,t);mr(u,t,!1,!1),t.stateNode=u,fe(u,l,i,n,e)&&Bt(t)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xe(t),null;case 6:if(e&&t.stateNode!=null)ai(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(f(166));if(e=Ut(Ln.current),n=Ut(yt.current),or(t)){if(!We)throw Error(f(176));if(e=t.stateNode,i=t.memoizedProps,(n=Iu(e,i,t,!lr))&&(l=ct,l!==null))switch(u=(l.mode&1)!==0,l.tag){case 3:Fu(l.stateNode.containerInfo,e,i,u);break;case 5:Hu(l.type,l.memoizedProps,l.stateNode,e,i,u)}n&&Bt(t)}else t.stateNode=$e(i,e,n,t)}return Xe(t),null;case 13:if(Ee(_e),i=t.memoizedState,Me&&ft!==null&&t.mode&1&&!(t.flags&128)){for(e=ft;e;)e=nr(e);return On(),t.flags|=98560,t}if(i!==null&&i.dehydrated!==null){if(i=or(t),e===null){if(!i)throw Error(f(318));if(!We)throw Error(f(344));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(317));Du(e,t)}else On(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;return Xe(t),null}return Ct!==null&&(Js(Ct),Ct=null),t.flags&128?(t.lanes=n,t):(i=i!==null,n=!1,e===null?or(t):n=e.memoizedState!==null,i&&!n&&(t.child.flags|=8192,t.mode&1&&(e===null||_e.current&1?Oe===0&&(Oe=3):el())),t.updateQueue!==null&&(t.flags|=4),Xe(t),null);case 4:return Bn(),vr(e,t),e===null&&ji(t.stateNode.containerInfo),Xe(t),null;case 10:return cs(t.type._context),Xe(t),null;case 17:return it(t.type)&&Lr(),Xe(t),null;case 19:if(Ee(_e),l=t.memoizedState,l===null)return Xe(t),null;if(i=(t.flags&128)!==0,u=l.rendering,u===null)if(i)gr(l,!1);else{if(Oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=$r(e),u!==null){for(t.flags|=128,gr(l,!1),e=u.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,i=t.child;i!==null;)n=i,l=e,n.flags&=14680066,u=n.alternate,u===null?(n.childLanes=0,n.lanes=l,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=u.childLanes,n.lanes=u.lanes,n.child=u.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=u.memoizedProps,n.memoizedState=u.memoizedState,n.updateQueue=u.updateQueue,n.type=u.type,l=u.dependencies,n.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),i=i.sibling;return Se(_e,_e.current&1|2),t.child}e=e.sibling}l.tail!==null&&Ue()>Xs&&(t.flags|=128,i=!0,gr(l,!1),t.lanes=4194304)}else{if(!i)if(e=$r(u),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),gr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!u.alternate&&!Me)return Xe(t),null}else 2*Ue()-l.renderingStartTime>Xs&&n!==1073741824&&(t.flags|=128,i=!0,gr(l,!1),t.lanes=4194304);l.isBackwards?(u.sibling=t.child,t.child=u):(e=l.last,e!==null?e.sibling=u:t.child=u,l.last=u)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ue(),t.sibling=null,e=_e.current,Se(_e,i?e&1|2:e&1),t):(Xe(t),null);case 22:case 23:return $s(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?ht&1073741824&&(Xe(t),ut&&t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),null;case 24:return null;case 25:return null}throw Error(f(156,t.tag))}var dc=v.ReactCurrentOwner,dt=!1;function tt(e,t,n,i){t.child=e===null?eo(t,null,n,i):Un(t,e.child,n,i)}function Co(e,t,n,i,l){n=n.render;var u=t.ref;return In(t,l),i=_s(e,t,n,i,u,l),n=Ps(),e!==null&&!dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Yt(e,t,l)):(Me&&n&&ms(t),t.flags|=1,tt(e,t,i,l),t.child)}function zo(e,t,n,i,l){if(e===null){var u=n.type;return typeof u=="function"&&!tl(u)&&u.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=u,No(e,t,u,i,l)):(e=zi(n.type,null,i,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!(e.lanes&l)){var h=u.memoizedProps;if(n=n.compare,n=n!==null?n:Wr,n(h,i)&&e.ref===t.ref)return Yt(e,t,l)}return t.flags|=1,e=an(u,i),e.ref=t.ref,e.return=t,t.child=e}function No(e,t,n,i,l){if(e!==null&&Wr(e.memoizedProps,i)&&e.ref===t.ref)if(dt=!1,(e.lanes&l)!==0)e.flags&131072&&(dt=!0);else return t.lanes=e.lanes,Yt(e,t,l);return Is(e,t,n,i,l)}function ko(e,t,n){var i=t.pendingProps,l=i.children,u=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null},Se(Hn,ht),ht|=n;else if(n&1073741824)t.memoizedState={baseLanes:0,cachePool:null},i=u!==null?u.baseLanes:n,Se(Hn,ht),ht|=i;else return e=u!==null?u.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,Se(Hn,ht),ht|=e,null;else u!==null?(i=u.baseLanes|n,t.memoizedState=null):i=n,Se(Hn,ht),ht|=i;return tt(e,t,l,n),t.child}function Io(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Is(e,t,n,i,l){var u=it(n)?mn:Ve.current;return u=Nn(t,u),In(t,l),n=_s(e,t,n,i,u,l),i=Ps(),e!==null&&!dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Yt(e,t,l)):(Me&&i&&ms(t),t.flags|=1,tt(e,t,n,l),t.child)}function Do(e,t,n,i,l){if(it(n)){var u=!0;Br(t)}else u=!1;if(In(t,l),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),Ql(t,n,i),ps(t,n,i,l),i=!0;else if(e===null){var h=t.stateNode,y=t.memoizedProps;h.props=y;var N=h.context,b=n.contextType;typeof b=="object"&&b!==null?b=mt(b):(b=it(n)?mn:Ve.current,b=Nn(t,b));var K=n.getDerivedStateFromProps,ie=typeof K=="function"||typeof h.getSnapshotBeforeUpdate=="function";ie||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(y!==i||N!==b)&&Yl(t,h,i,b),tn=!1;var te=t.memoizedState;h.state=te,Xr(t,i,h,l),N=t.memoizedState,y!==i||te!==N||rt.current||tn?(typeof K=="function"&&(hs(t,n,K,i),N=t.memoizedState),(y=tn||Vl(t,n,y,i,te,N,b))?(ie||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=N),h.props=i,h.state=N,h.context=b,i=y):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{h=t.stateNode,jl(e,t),y=t.memoizedProps,b=t.type===t.elementType?y:Rt(t.type,y),h.props=b,ie=t.pendingProps,te=h.context,N=n.contextType,typeof N=="object"&&N!==null?N=mt(N):(N=it(n)?mn:Ve.current,N=Nn(t,N));var ye=n.getDerivedStateFromProps;(K=typeof ye=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(y!==ie||te!==N)&&Yl(t,h,i,N),tn=!1,te=t.memoizedState,h.state=te,Xr(t,i,h,l);var J=t.memoizedState;y!==ie||te!==J||rt.current||tn?(typeof ye=="function"&&(hs(t,n,ye,i),J=t.memoizedState),(b=tn||Vl(t,n,b,i,te,J,N)||!1)?(K||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(i,J,N),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(i,J,N)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||y===e.memoizedProps&&te===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&te===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=J),h.props=i,h.state=J,h.context=N,i=b):(typeof h.componentDidUpdate!="function"||y===e.memoizedProps&&te===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&te===e.memoizedState||(t.flags|=1024),i=!1)}return Ds(e,t,n,i,u,l)}function Ds(e,t,n,i,l,u){Io(e,t);var h=(t.flags&128)!==0;if(!i&&!h)return l&&Ul(t,n,!1),Yt(e,t,u);i=t.stateNode,dc.current=t;var y=h&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&h?(t.child=Un(t,e.child,null,u),t.child=Un(t,null,y,u)):tt(e,t,y,u),t.memoizedState=i.state,l&&Ul(t,n,!0),t.child}function Ao(e){var t=e.stateNode;t.pendingContext?Al(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Al(e,t.context,!1),Ss(e,t.containerInfo)}function Oo(e,t,n,i,l){return On(),xs(l),t.flags|=256,tt(e,t,n,i),t.child}var ui={dehydrated:null,treeContext:null,retryLane:0};function ci(e){return{baseLanes:e,cachePool:null}}function Uo(e,t,n){var i=t.pendingProps,l=_e.current,u=!1,h=(t.flags&128)!==0,y;if((y=h)||(y=e!==null&&e.memoizedState===null?!1:(l&2)!==0),y?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Se(_e,l&1),e===null)return ys(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?Zi(e)?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=i.children,e=i.fallback,u?(i=t.mode,u=t.child,l={mode:"hidden",children:l},!(i&1)&&u!==null?(u.childLanes=0,u.pendingProps=l):u=Ni(l,i,0,null),e=Mn(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=ci(n),t.memoizedState=ui,e):As(t,l));if(l=e.memoizedState,l!==null){if(y=l.dehydrated,y!==null){if(h)return t.flags&256?(t.flags&=-257,fi(e,t,n,Error(f(422)))):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=i.fallback,l=t.mode,i=Ni({mode:"visible",children:i.children},l,0,null),u=Mn(u,l,n,null),u.flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,t.mode&1&&Un(t,e.child,null,n),t.child.memoizedState=ci(n),t.memoizedState=ui,u);if(!(t.mode&1))t=fi(e,t,n,null);else if(Zi(y))t=fi(e,t,n,Error(f(419)));else if(i=(n&e.childLanes)!==0,dt||i){if(i=De,i!==null){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}i=u&(i.suspendedLanes|n)?0:u,i!==0&&i!==l.retryLane&&(l.retryLane=i,St(e,i,-1))}el(),t=fi(e,t,n,Error(f(421)))}else Il(y)?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),Ru(y,t),t=null):(n=l.treeContext,We&&(ft=Nu(y),ct=t,Me=!0,Ct=null,lr=!1,n!==null&&(vt[gt++]=Wt,vt[gt++]=Vt,vt[gt++]=vn,Wt=n.id,Vt=n.overflow,vn=t)),t=As(t,t.pendingProps.children),t.flags|=4096);return t}return u?(i=Bo(e,t,i.children,i.fallback,n),u=t.child,l=e.child.memoizedState,u.memoizedState=l===null?ci(n):{baseLanes:l.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=ui,i):(n=Lo(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=Bo(e,t,i.children,i.fallback,n),u=t.child,l=e.child.memoizedState,u.memoizedState=l===null?ci(n):{baseLanes:l.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=ui,i):(n=Lo(e,t,i.children,n),t.memoizedState=null,n)}function As(e,t){return t=Ni({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Lo(e,t,n,i){var l=e.child;return e=l.sibling,n=an(l,{mode:"visible",children:n}),!(t.mode&1)&&(n.lanes=i),n.return=t,n.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n}function Bo(e,t,n,i,l){var u=t.mode;e=e.child;var h=e.sibling,y={mode:"hidden",children:n};return!(u&1)&&t.child!==e?(n=t.child,n.childLanes=0,n.pendingProps=y,t.deletions=null):(n=an(e,y),n.subtreeFlags=e.subtreeFlags&14680064),h!==null?i=an(h,i):(i=Mn(i,u,l,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,i}function fi(e,t,n,i){return i!==null&&xs(i),Un(t,e.child,null,n),e=As(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Fo(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),fs(e.return,t,n)}function Os(e,t,n,i,l){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:l}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=i,u.tail=n,u.tailMode=l)}function Ho(e,t,n){var i=t.pendingProps,l=i.revealOrder,u=i.tail;if(tt(e,t,i.children,n),i=_e.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fo(e,n,t);else if(e.tag===19)Fo(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Se(_e,i),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&$r(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),Os(t,!1,l,n,u);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&$r(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}Os(t,!0,n,null,u);break;case"together":Os(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),jn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(f(153));if(t.child!==null){for(e=t.child,n=an(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=an(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function hc(e,t,n){switch(t.tag){case 3:Ao(t),On();break;case 5:to(t);break;case 1:it(t.type)&&Br(t);break;case 4:Ss(t,t.stateNode.containerInfo);break;case 10:Hl(t,t.type._context,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Se(_e,_e.current&1),t.flags|=128,null):n&t.child.childLanes?Uo(e,t,n):(Se(_e,_e.current&1),e=Yt(e,t,n),e!==null?e.sibling:null);Se(_e,_e.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return Ho(e,t,n);t.flags|=128}var l=t.memoizedState;if(l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Se(_e,_e.current),i)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return Yt(e,t,n)}function pc(e,t){switch(vs(t),t.tag){case 1:return it(t.type)&&Lr(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Bn(),Ee(rt),Ee(Ve),Ts(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Es(t),null;case 13:if(Ee(_e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(f(340));On()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ee(_e),null;case 4:return Bn(),null;case 10:return cs(t.type._context),null;case 22:case 23:return $s(),null;case 24:return null;default:return null}}var di=!1,xn=!1,mc=typeof WeakSet=="function"?WeakSet:Set,V=null;function hi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ot(e,t,i)}else n.current=null}function Us(e,t,n){try{n()}catch(i){ot(e,t,i)}}var jo=!1;function vc(e,t){for(Z(e.containerInfo),V=t;V!==null;)if(e=V,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,V=t;else for(;V!==null;){e=V;try{var n=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(n!==null){var i=n.memoizedProps,l=n.memoizedState,u=e.stateNode,h=u.getSnapshotBeforeUpdate(e.elementType===e.type?i:Rt(e.type,i),l);u.__reactInternalSnapshotBeforeUpdate=h}break;case 3:ut&&kt(e.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(f(163))}}catch(y){ot(e,e.return,y)}if(t=e.sibling,t!==null){t.return=e.return,V=t;break}V=e.return}return n=jo,jo=!1,n}function Sn(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&e)===e){var u=l.destroy;l.destroy=void 0,u!==void 0&&Us(t,n,u)}l=l.next}while(l!==i)}}function yr(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function Ls(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=Te(n);break;default:e=n}typeof t=="function"?t(e):t.current=e}}function bo(e,t,n){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(br,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var i=e=e.next;do{var l=i,u=l.destroy;l=l.tag,u!==void 0&&(l&2||l&4)&&Us(t,n,u),i=i.next}while(i!==e)}break;case 1:if(hi(t,n),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(h){ot(t,n,h)}break;case 5:hi(t,n);break;case 4:ut?Xo(e,t,n):hn&&hn&&(t=t.stateNode.containerInfo,n=tr(t),Zt(t,n))}}function Go(e,t,n){for(var i=t;;)if(bo(e,i,n),i.child===null||ut&&i.tag===4){if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}else i.child.return=i,i=i.child}function Wo(e){var t=e.alternate;t!==null&&(e.alternate=null,Wo(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Nr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Vo(e){return e.tag===5||e.tag===3||e.tag===4}function Qo(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Vo(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yo(e){if(ut){e:{for(var t=e.return;t!==null;){if(Vo(t))break e;t=t.return}throw Error(f(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,n.flags&32&&(W(t),n.flags&=-33),n=Qo(e),Fs(e,n,t);break;case 3:case 4:t=n.stateNode.containerInfo,n=Qo(e),Bs(e,n,t);break;default:throw Error(f(161))}}}function Bs(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?Ur(n,e,t):Qi(n,e);else if(i!==4&&(e=e.child,e!==null))for(Bs(e,t,n),e=e.sibling;e!==null;)Bs(e,t,n),e=e.sibling}function Fs(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?Ki(n,e,t):$n(n,e);else if(i!==4&&(e=e.child,e!==null))for(Fs(e,t,n),e=e.sibling;e!==null;)Fs(e,t,n),e=e.sibling}function Xo(e,t,n){for(var i=t,l=!1,u,h;;){if(!l){l=i.return;e:for(;;){if(l===null)throw Error(f(160));switch(u=l.stateNode,l.tag){case 5:h=!1;break e;case 3:u=u.containerInfo,h=!0;break e;case 4:u=u.containerInfo,h=!0;break e}l=l.return}l=!0}if(i.tag===5||i.tag===6)Go(e,i,n),h?w(u,i.stateNode):er(u,i.stateNode);else if(i.tag===18)h?Lu(u,i.stateNode):Uu(u,i.stateNode);else if(i.tag===4){if(i.child!==null){u=i.stateNode.containerInfo,h=!0,i.child.return=i,i=i.child;continue}}else if(bo(e,i,n),i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return,i.tag===4&&(l=!1)}i.sibling.return=i.return,i=i.sibling}}function Hs(e,t){if(ut){switch(t.tag){case 0:case 11:case 14:case 15:Sn(3,t,t.return),yr(3,t),Sn(5,t,t.return);return;case 1:return;case 5:var n=t.stateNode;if(n!=null){var i=t.memoizedProps;e=e!==null?e.memoizedProps:i;var l=t.type,u=t.updateQueue;t.updateQueue=null,u!==null&&Xi(n,u,l,e,i,t)}return;case 6:if(t.stateNode===null)throw Error(f(162));n=t.memoizedProps,Yi(t.stateNode,e!==null?e.memoizedProps:n,n);return;case 3:We&&e!==null&&e.memoizedState.isDehydrated&&Dl(t.stateNode.containerInfo);return;case 12:return;case 13:pi(t);return;case 19:pi(t);return;case 17:return}throw Error(f(163))}switch(t.tag){case 0:case 11:case 14:case 15:Sn(3,t,t.return),yr(3,t),Sn(5,t,t.return);return;case 12:return;case 13:pi(t);return;case 19:pi(t);return;case 3:We&&e!==null&&e.memoizedState.isDehydrated&&Dl(t.stateNode.containerInfo);break;case 22:case 23:return}e:if(hn){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Zt(t.containerInfo,t.pendingChildren);break e}throw Error(f(163))}}function pi(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new mc),t.forEach(function(i){var l=Pc.bind(null,e,i);n.has(i)||(n.add(i),i.then(l,l))})}}function gc(e,t){for(V=t;V!==null;){t=V;var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var l=n[i];try{var u=e;ut?Xo(u,l,t):Go(u,l,t);var h=l.alternate;h!==null&&(h.return=null),l.return=null}catch(q){ot(l,t,q)}}if(n=t.child,t.subtreeFlags&12854&&n!==null)n.return=t,V=n;else for(;V!==null;){t=V;try{var y=t.flags;if(y&32&&ut&&W(t.stateNode),y&512){var N=t.alternate;if(N!==null){var b=N.ref;b!==null&&(typeof b=="function"?b(null):b.current=null)}}if(y&8192)switch(t.tag){case 13:if(t.memoizedState!==null){var K=t.alternate;(K===null||K.memoizedState===null)&&(Ys=Ue())}break;case 22:var ie=t.memoizedState!==null,te=t.alternate,ye=te!==null&&te.memoizedState!==null;if(n=t,ut){e:if(i=n,l=ie,u=null,ut)for(var J=i;;){if(J.tag===5){if(u===null){u=J;var Ke=J.stateNode;l?re(Ke):Ie(J.stateNode,J.memoizedProps)}}else if(J.tag===6){if(u===null){var wt=J.stateNode;l?de(wt):Mt(wt,J.memoizedProps)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===i)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===i)break;for(;J.sibling===null;){if(J.return===null||J.return===i)break e;u===J&&(u=null),J=J.return}u===J&&(u=null),J.sibling.return=J.return,J=J.sibling}}if(ie&&!ye&&n.mode&1){V=n;for(var R=n.child;R!==null;){for(n=V=R;V!==null;){i=V;var x=i.child;switch(i.tag){case 0:case 11:case 14:case 15:Sn(4,i,i.return);break;case 1:hi(i,i.return);var z=i.stateNode;if(typeof z.componentWillUnmount=="function"){var Q=i.return;try{z.props=i.memoizedProps,z.state=i.memoizedState,z.componentWillUnmount()}catch(q){ot(i,Q,q)}}break;case 5:hi(i,i.return);break;case 22:if(i.memoizedState!==null){qo(n);continue}}x!==null?(x.return=i,V=x):qo(n)}R=R.sibling}}}switch(y&4102){case 2:Yo(t),t.flags&=-3;break;case 6:Yo(t),t.flags&=-3,Hs(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Hs(t.alternate,t);break;case 4:Hs(t.alternate,t)}}catch(q){ot(t,t.return,q)}if(n=t.sibling,n!==null){n.return=t.return,V=n;break}V=t.return}}}function yc(e,t,n){V=e,Ko(e)}function Ko(e,t,n){for(var i=(e.mode&1)!==0;V!==null;){var l=V,u=l.child;if(l.tag===22&&i){var h=l.memoizedState!==null||di;if(!h){var y=l.alternate,N=y!==null&&y.memoizedState!==null||xn;y=di;var b=xn;if(di=h,(xn=N)&&!b)for(V=l;V!==null;)h=V,N=h.child,h.tag===22&&h.memoizedState!==null?Jo(l):N!==null?(N.return=h,V=N):Jo(l);for(;u!==null;)V=u,Ko(u),u=u.sibling;V=l,di=y,xn=b}Zo(e)}else l.subtreeFlags&8772&&u!==null?(u.return=l,V=u):Zo(e)}}function Zo(e){for(;V!==null;){var t=V;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:xn||yr(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!xn)if(n===null)i.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:Rt(t.type,n.memoizedProps);i.componentDidUpdate(l,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&Gl(t,u,i);break;case 3:var h=t.updateQueue;if(h!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=Te(t.child.stateNode);break;case 1:n=t.child.stateNode}Gl(t,h,n)}break;case 5:var y=t.stateNode;n===null&&t.flags&4&&Or(y,t.type,t.memoizedProps,t);break;case 6:break;case 4:break;case 12:break;case 13:if(We&&t.memoizedState===null){var N=t.alternate;if(N!==null){var b=N.memoizedState;if(b!==null){var K=b.dehydrated;K!==null&&Ou(K)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(f(163))}xn||t.flags&512&&Ls(t)}catch(ie){ot(t,t.return,ie)}}if(t===e){V=null;break}if(n=t.sibling,n!==null){n.return=t.return,V=n;break}V=t.return}}function qo(e){for(;V!==null;){var t=V;if(t===e){V=null;break}var n=t.sibling;if(n!==null){n.return=t.return,V=n;break}V=t.return}}function Jo(e){for(;V!==null;){var t=V;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{yr(4,t)}catch(N){ot(t,n,N)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var l=t.return;try{i.componentDidMount()}catch(N){ot(t,l,N)}}var u=t.return;try{Ls(t)}catch(N){ot(t,u,N)}break;case 5:var h=t.return;try{Ls(t)}catch(N){ot(t,h,N)}}}catch(N){ot(t,t.return,N)}if(t===e){V=null;break}var y=t.sibling;if(y!==null){y.return=t.return,V=y;break}V=t.return}}var mi=0,vi=1,gi=2,yi=3,xi=4;if(typeof Symbol=="function"&&Symbol.for){var xr=Symbol.for;mi=xr("selector.component"),vi=xr("selector.has_pseudo_class"),gi=xr("selector.role"),yi=xr("selector.test_id"),xi=xr("selector.text")}function js(e){var t=zr(e);if(t!=null){if(typeof t.memoizedProps["data-testname"]!="string")throw Error(f(364));return t}if(e=Gi(e),e===null)throw Error(f(362));return e.stateNode.current}function bs(e,t){switch(t.$$typeof){case mi:if(e.type===t.value)return!0;break;case vi:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var i=e[n++],l=e[n++],u=t[l];if(i.tag!==5||!Tt(i)){for(;u!=null&&bs(i,u);)l++,u=t[l];if(l===t.length){t=!0;break e}else for(i=i.child;i!==null;)e.push(i,l),i=i.sibling}}t=!1}return t;case gi:if(e.tag===5&&Wi(e.stateNode,t.value))return!0;break;case xi:if((e.tag===5||e.tag===6)&&(e=Jn(e),e!==null&&0<=e.indexOf(t.value)))return!0;break;case yi:if(e.tag===5&&(e=e.memoizedProps["data-testname"],typeof e=="string"&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(f(365))}return!1}function Gs(e){switch(e.$$typeof){case mi:return"<"+(X(e.value)||"Unknown")+">";case vi:return":has("+(Gs(e)||"")+")";case gi:return'[role="'+e.value+'"]';case xi:return'"'+e.value+'"';case yi:return'[data-testname="'+e.value+'"]';default:throw Error(f(365))}}function $o(e,t){var n=[];e=[e,0];for(var i=0;i<e.length;){var l=e[i++],u=e[i++],h=t[u];if(l.tag!==5||!Tt(l)){for(;h!=null&&bs(l,h);)u++,h=t[u];if(u===t.length)n.push(l);else for(l=l.child;l!==null;)e.push(l,u),l=l.sibling}}return n}function Ws(e,t){if(!pn)throw Error(f(363));e=js(e),e=$o(e,t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var i=e[n++];if(i.tag===5)Tt(i)||t.push(i.stateNode);else for(i=i.child;i!==null;)e.push(i),i=i.sibling}return t}var xc=Math.ceil,Si=v.ReactCurrentDispatcher,Vs=v.ReactCurrentOwner,Ce=v.ReactCurrentBatchConfig,ae=0,De=null,Ae=null,je=0,ht=0,Hn=$t(0),Oe=0,Sr=null,jn=0,Ei=0,Qs=0,Er=null,st=null,Ys=0,Xs=1/0;function bn(){Xs=Ue()+500}var wi=!1,Ks=null,rn=null,Ti=!1,sn=null,Mi=0,wr=0,Zs=null,_i=-1,Pi=0;function nt(){return ae&6?Ue():_i!==-1?_i:_i=Ue()}function ln(e){return e.mode&1?ae&2&&je!==0?je&-je:tc.transition!==null?(Pi===0&&(e=Fr,Fr<<=1,!(Fr&4194240)&&(Fr=64),Pi=e),Pi):(e=he,e!==0?e:bi()):1}function St(e,t,n){if(50<wr)throw wr=0,Zs=null,Error(f(185));var i=Ri(e,t);return i===null?null:(sr(i,t,n),(!(ae&2)||i!==De)&&(i===De&&(!(ae&2)&&(Ei|=t),Oe===4&&on(i,je)),lt(i,n),t===1&&ae===0&&!(e.mode&1)&&(bn(),Gr&&At())),i)}function Ri(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}function lt(e,t){var n=e.callbackNode;Qu(e,t);var i=jr(e,e===De?je:0);if(i===0)n!==null&&Bl(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&Bl(n),t===1)e.tag===0?ec(ta.bind(null,e)):Fl(ta.bind(null,e)),kr?Ir(function(){ae===0&&At()}):is(ss,At),n=null;else{switch(Ll(i)){case 1:n=ss;break;case 4:n=Zu;break;case 16:n=ls;break;case 536870912:n=qu;break;default:n=ls}n=ca(n,ea.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ea(e,t){if(_i=-1,Pi=0,ae&6)throw Error(f(327));var n=e.callbackNode;if(Tn()&&e.callbackNode!==n)return null;var i=jr(e,e===De?je:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Ci(e,i);else{t=i;var l=ae;ae|=2;var u=ia();(De!==e||je!==t)&&(bn(),En(e,t));do try{wc();break}catch(y){ra(e,y)}while(!0);us(),Si.current=u,ae=l,Ae!==null?t=0:(De=null,je=0,t=Oe)}if(t!==0){if(t===2&&(l=ts(e),l!==0&&(i=l,t=qs(e,l))),t===1)throw n=Sr,En(e,0),on(e,i),lt(e,Ue()),n;if(t===6)on(e,i);else{if(l=e.current.alternate,!(i&30)&&!Sc(l)&&(t=Ci(e,i),t===2&&(u=ts(e),u!==0&&(i=u,t=qs(e,u))),t===1))throw n=Sr,En(e,0),on(e,i),lt(e,Ue()),n;switch(e.finishedWork=l,e.finishedLanes=i,t){case 0:case 1:throw Error(f(345));case 2:wn(e,st);break;case 3:if(on(e,i),(i&130023424)===i&&(t=Ys+500-Ue(),10<t)){if(jr(e,0)!==0)break;if(l=e.suspendedLanes,(l&i)!==i){nt(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=et(wn.bind(null,e,st),t);break}wn(e,st);break;case 4:if(on(e,i),(i&4194240)===i)break;for(t=e.eventTimes,l=-1;0<i;){var h=31-Pt(i);u=1<<h,h=t[h],h>l&&(l=h),i&=~u}if(i=l,i=Ue()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*xc(i/1960))-i,10<i){e.timeoutHandle=et(wn.bind(null,e,st),i);break}wn(e,st);break;case 5:wn(e,st);break;default:throw Error(f(329))}}}return lt(e,Ue()),e.callbackNode===n?ea.bind(null,e):null}function qs(e,t){var n=Er;return e.current.memoizedState.isDehydrated&&(En(e,t).flags|=256),e=Ci(e,t),e!==2&&(t=st,st=n,t!==null&&Js(t)),e}function Js(e){st===null?st=e:st.push.apply(st,e)}function Sc(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var l=n[i],u=l.getSnapshot;l=l.value;try{if(!Dt(u(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function on(e,t){for(t&=~Qs,t&=~Ei,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Pt(t),i=1<<n;e[n]=-1,t&=~i}}function ta(e){if(ae&6)throw Error(f(327));Tn();var t=jr(e,0);if(!(t&1))return lt(e,Ue()),null;var n=Ci(e,t);if(e.tag!==0&&n===2){var i=ts(e);i!==0&&(t=i,n=qs(e,i))}if(n===1)throw n=Sr,En(e,0),on(e,t),lt(e,Ue()),n;if(n===6)throw Error(f(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wn(e,st),lt(e,Ue()),null}function na(e){sn!==null&&sn.tag===0&&!(ae&6)&&Tn();var t=ae;ae|=1;var n=Ce.transition,i=he;try{if(Ce.transition=null,he=1,e)return e()}finally{he=i,Ce.transition=n,ae=t,!(ae&6)&&At()}}function $s(){ht=Hn.current,Ee(Hn)}function En(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==Nt&&(e.timeoutHandle=Nt,jt(n)),Ae!==null)for(n=Ae.return;n!==null;){var i=n;switch(vs(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Lr();break;case 3:Bn(),Ee(rt),Ee(Ve),Ts();break;case 5:Es(i);break;case 4:Bn();break;case 13:Ee(_e);break;case 19:Ee(_e);break;case 10:cs(i.type._context);break;case 22:case 23:$s()}n=n.return}if(De=e,Ae=e=an(e.current,null),je=ht=t,Oe=0,Sr=null,Qs=Ei=jn=0,st=Er=null,Ot!==null){for(t=0;t<Ot.length;t++)if(n=Ot[t],i=n.interleaved,i!==null){n.interleaved=null;var l=i.next,u=n.pending;if(u!==null){var h=u.next;u.next=l,i.next=h}n.pending=i}Ot=null}return e}function ra(e,t){do{var n=Ae;try{if(us(),ei.current=li,ti){for(var i=Pe.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}ti=!1}if(Fn=0,Le=Qe=Pe=null,fr=!1,dr=0,Vs.current=null,n===null||n.return===null){Oe=1,Sr=t,Ae=null;break}e:{var u=e,h=n.return,y=n,N=t;if(t=je,y.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var b=N,K=y,ie=K.tag;if(!(K.mode&1)&&(ie===0||ie===11||ie===15)){var te=K.alternate;te?(K.updateQueue=te.updateQueue,K.memoizedState=te.memoizedState,K.lanes=te.lanes):(K.updateQueue=null,K.memoizedState=null)}var ye=Mo(h);if(ye!==null){ye.flags&=-257,_o(ye,h,y,u,t),ye.mode&1&&To(u,b,t),t=ye,N=b;var J=t.updateQueue;if(J===null){var Ke=new Set;Ke.add(N),t.updateQueue=Ke}else J.add(N);break e}else{if(!(t&1)){To(u,b,t),el();break e}N=Error(f(426))}}else if(Me&&y.mode&1){var wt=Mo(h);if(wt!==null){!(wt.flags&65536)&&(wt.flags|=256),_o(wt,h,y,u,t),xs(N);break e}}u=N,Oe!==4&&(Oe=2),Er===null?Er=[u]:Er.push(u),N=Ns(N,y),y=h;do{switch(y.tag){case 3:y.flags|=65536,t&=-t,y.lanes|=t;var R=Eo(y,N,t);bl(y,R);break e;case 1:u=N;var x=y.type,z=y.stateNode;if(!(y.flags&128)&&(typeof x.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(rn===null||!rn.has(z)))){y.flags|=65536,t&=-t,y.lanes|=t;var Q=wo(y,u,t);bl(y,Q);break e}}y=y.return}while(y!==null)}la(n)}catch(q){t=q,Ae===n&&n!==null&&(Ae=n=n.return);continue}break}while(!0)}function ia(){var e=Si.current;return Si.current=li,e===null?li:e}function el(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),De===null||!(jn&268435455)&&!(Ei&268435455)||on(De,je)}function Ci(e,t){var n=ae;ae|=2;var i=ia();De===e&&je===t||En(e,t);do try{Ec();break}catch(l){ra(e,l)}while(!0);if(us(),ae=n,Si.current=i,Ae!==null)throw Error(f(261));return De=null,je=0,Oe}function Ec(){for(;Ae!==null;)sa(Ae)}function wc(){for(;Ae!==null&&!Xu();)sa(Ae)}function sa(e){var t=ua(e.alternate,e,ht);e.memoizedProps=e.pendingProps,t===null?la(e):Ae=t,Vs.current=null}function la(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=pc(n,t),n!==null){n.flags&=32767,Ae=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oe=6,Ae=null;return}}else if(n=fc(n,t,ht),n!==null){Ae=n;return}if(t=t.sibling,t!==null){Ae=t;return}Ae=t=e}while(t!==null);Oe===0&&(Oe=5)}function wn(e,t){var n=he,i=Ce.transition;try{Ce.transition=null,he=1,Tc(e,t,n)}finally{Ce.transition=i,he=n}return null}function Tc(e,t,n){do Tn();while(sn!==null);if(ae&6)throw Error(f(327));var i=e.finishedWork,l=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(f(177));e.callbackNode=null,e.callbackPriority=0;var u=i.lanes|i.childLanes;if(Yu(e,u),e===De&&(Ae=De=null,je=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Ti||(Ti=!0,ca(ls,function(){return Tn(),null})),u=(i.flags&15990)!==0,i.subtreeFlags&15990||u){u=Ce.transition,Ce.transition=null;var h=he;he=1;var y=ae;ae|=4,Vs.current=null,vc(e,i),gc(e,i),Y(e.containerInfo),e.current=i,yc(i),Ku(),ae=y,he=h,Ce.transition=u}else e.current=i;if(Ti&&(Ti=!1,sn=e,Mi=l),u=e.pendingLanes,u===0&&(rn=null),Ju(i.stateNode),lt(e,Ue()),t!==null)for(n=e.onRecoverableError,i=0;i<t.length;i++)n(t[i]);if(wi)throw wi=!1,e=Ks,Ks=null,e;return Mi&1&&e.tag!==0&&Tn(),u=e.pendingLanes,u&1?e===Zs?wr++:(wr=0,Zs=e):wr=0,At(),null}function Tn(){if(sn!==null){var e=Ll(Mi),t=Ce.transition,n=he;try{if(Ce.transition=null,he=16>e?16:e,sn===null)var i=!1;else{if(e=sn,sn=null,Mi=0,ae&6)throw Error(f(331));var l=ae;for(ae|=4,V=e.current;V!==null;){var u=V,h=u.child;if(V.flags&16){var y=u.deletions;if(y!==null){for(var N=0;N<y.length;N++){var b=y[N];for(V=b;V!==null;){var K=V;switch(K.tag){case 0:case 11:case 15:Sn(8,K,u)}var ie=K.child;if(ie!==null)ie.return=K,V=ie;else for(;V!==null;){K=V;var te=K.sibling,ye=K.return;if(Wo(K),K===b){V=null;break}if(te!==null){te.return=ye,V=te;break}V=ye}}}var J=u.alternate;if(J!==null){var Ke=J.child;if(Ke!==null){J.child=null;do{var wt=Ke.sibling;Ke.sibling=null,Ke=wt}while(Ke!==null)}}V=u}}if(u.subtreeFlags&2064&&h!==null)h.return=u,V=h;else e:for(;V!==null;){if(u=V,u.flags&2048)switch(u.tag){case 0:case 11:case 15:Sn(9,u,u.return)}var R=u.sibling;if(R!==null){R.return=u.return,V=R;break e}V=u.return}}var x=e.current;for(V=x;V!==null;){h=V;var z=h.child;if(h.subtreeFlags&2064&&z!==null)z.return=h,V=z;else e:for(h=x;V!==null;){if(y=V,y.flags&2048)try{switch(y.tag){case 0:case 11:case 15:yr(9,y)}}catch(q){ot(y,y.return,q)}if(y===h){V=null;break e}var Q=y.sibling;if(Q!==null){Q.return=y.return,V=Q;break e}V=y.return}}if(ae=l,At(),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(br,e)}catch{}i=!0}return i}finally{he=n,Ce.transition=t}}return!1}function oa(e,t,n){t=Ns(n,t),t=Eo(e,t,1),nn(e,t),t=nt(),e=Ri(e,1),e!==null&&(sr(e,1,t),lt(e,t))}function ot(e,t,n){if(e.tag===3)oa(e,e,n);else for(;t!==null;){if(t.tag===3){oa(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(rn===null||!rn.has(i))){e=Ns(n,e),e=wo(t,e,1),nn(t,e),e=nt(),t=Ri(t,1),t!==null&&(sr(t,1,e),lt(t,e));break}}t=t.return}}function Mc(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=nt(),e.pingedLanes|=e.suspendedLanes&n,De===e&&(je&n)===n&&(Oe===4||Oe===3&&(je&130023424)===je&&500>Ue()-Ys?En(e,0):Qs|=n),lt(e,t)}function aa(e,t){t===0&&(e.mode&1?(t=Hr,Hr<<=1,!(Hr&130023424)&&(Hr=4194304)):t=1);var n=nt();e=Ri(e,t),e!==null&&(sr(e,t,n),lt(e,n))}function _c(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),aa(e,n)}function Pc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(f(314))}i!==null&&i.delete(t),aa(e,n)}var ua;ua=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||rt.current)dt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return dt=!1,hc(e,t,n);dt=!!(e.flags&131072)}else dt=!1,Me&&t.flags&1048576&&Xl(t,qr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var l=Nn(t,Ve.current);In(t,n),l=_s(null,t,i,e,l,n);var u=Ps();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,it(i)?(u=!0,Br(t)):u=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,ds(t),l.updater=Kr,t.stateNode=l,l._reactInternals=t,ps(t,i,e,n),t=Ds(null,t,i,!0,u,n)):(t.tag=0,Me&&u&&ms(t),tt(null,t,l,n),t=t.child),t;case 16:i=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,l=i._init,i=l(i._payload),t.type=i,l=t.tag=Cc(i),e=Rt(i,e),l){case 0:t=Is(null,t,i,e,n);break e;case 1:t=Do(null,t,i,e,n);break e;case 11:t=Co(null,t,i,e,n);break e;case 14:t=zo(null,t,i,Rt(i.type,e),n);break e}throw Error(f(306,i,""))}return t;case 0:return i=t.type,l=t.pendingProps,l=t.elementType===i?l:Rt(i,l),Is(e,t,i,l,n);case 1:return i=t.type,l=t.pendingProps,l=t.elementType===i?l:Rt(i,l),Do(e,t,i,l,n);case 3:e:{if(Ao(t),e===null)throw Error(f(387));i=t.pendingProps,u=t.memoizedState,l=u.element,jl(e,t),Xr(t,i,null,n);var h=t.memoizedState;if(i=h.element,We&&u.isDehydrated)if(u={element:i,isDehydrated:!1,cache:h.cache,transitions:h.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){l=Error(f(423)),t=Oo(e,t,i,n,l);break e}else if(i!==l){l=Error(f(424)),t=Oo(e,t,i,n,l);break e}else for(We&&(ft=zu(t.stateNode.containerInfo),ct=t,Me=!0,Ct=null,lr=!1),n=eo(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(On(),i===l){t=Yt(e,t,n);break e}tt(e,t,i,n)}t=t.child}return t;case 5:return to(t),e===null&&ys(t),i=t.type,l=t.pendingProps,u=e!==null?e.memoizedProps:null,h=l.children,Ge(i,l)?h=null:u!==null&&Ge(i,u)&&(t.flags|=32),Io(e,t),tt(e,t,h,n),t.child;case 6:return e===null&&ys(t),null;case 13:return Uo(e,t,n);case 4:return Ss(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Un(t,null,i,n):tt(e,t,i,n),t.child;case 11:return i=t.type,l=t.pendingProps,l=t.elementType===i?l:Rt(i,l),Co(e,t,i,l,n);case 7:return tt(e,t,t.pendingProps,n),t.child;case 8:return tt(e,t,t.pendingProps.children,n),t.child;case 12:return tt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,l=t.pendingProps,u=t.memoizedProps,h=l.value,Hl(t,i,h),u!==null)if(Dt(u.value,h)){if(u.children===l.children&&!rt.current){t=Yt(e,t,n);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var y=u.dependencies;if(y!==null){h=u.child;for(var N=y.firstContext;N!==null;){if(N.context===i){if(u.tag===1){N=Gt(-1,n&-n),N.tag=2;var b=u.updateQueue;if(b!==null){b=b.shared;var K=b.pending;K===null?N.next=N:(N.next=K.next,K.next=N),b.pending=N}}u.lanes|=n,N=u.alternate,N!==null&&(N.lanes|=n),fs(u.return,n,t),y.lanes|=n;break}N=N.next}}else if(u.tag===10)h=u.type===t.type?null:u.child;else if(u.tag===18){if(h=u.return,h===null)throw Error(f(341));h.lanes|=n,y=h.alternate,y!==null&&(y.lanes|=n),fs(h,n,t),h=u.sibling}else h=u.child;if(h!==null)h.return=u;else for(h=u;h!==null;){if(h===t){h=null;break}if(u=h.sibling,u!==null){u.return=h.return,h=u;break}h=h.return}u=h}tt(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,i=t.pendingProps.children,In(t,n),l=mt(l),i=i(l),t.flags|=1,tt(e,t,i,n),t.child;case 14:return i=t.type,l=Rt(i,t.pendingProps),l=Rt(i.type,l),zo(e,t,i,l,n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,l=t.pendingProps,l=t.elementType===i?l:Rt(i,l),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,it(i)?(e=!0,Br(t)):e=!1,In(t,n),Ql(t,i,l),ps(t,i,l,n),Ds(null,t,i,!0,e,n);case 19:return Ho(e,t,n);case 22:return ko(e,t,n)}throw Error(f(156,t.tag))};function ca(e,t){return is(e,t)}function Rc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Et(e,t,n,i){return new Rc(e,t,n,i)}function tl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Cc(e){if(typeof e=="function")return tl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===I)return 11;if(e===_)return 14}return 2}function an(e,t){var n=e.alternate;return n===null?(n=Et(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zi(e,t,n,i,l,u){var h=2;if(i=e,typeof e=="function")tl(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case d:return Mn(n.children,l,u,t);case m:h=8,l|=8;break;case E:return e=Et(12,n,t,l|2),e.elementType=E,e.lanes=u,e;case k:return e=Et(13,n,t,l),e.elementType=k,e.lanes=u,e;case M:return e=Et(19,n,t,l),e.elementType=M,e.lanes=u,e;case O:return Ni(n,l,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case S:h=10;break e;case P:h=9;break e;case I:h=11;break e;case _:h=14;break e;case C:h=16,i=null;break e}throw Error(f(130,e==null?e:typeof e,""))}return t=Et(h,n,t,l),t.elementType=e,t.type=i,t.lanes=u,t}function Mn(e,t,n,i){return e=Et(7,e,i,t),e.lanes=n,e}function Ni(e,t,n,i){return e=Et(22,e,i,t),e.elementType=O,e.lanes=n,e.stateNode={},e}function nl(e,t,n){return e=Et(6,e,null,t),e.lanes=n,e}function rl(e,t,n){return t=Et(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,i,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Nt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ns(0),this.expirationTimes=ns(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ns(0),this.identifierPrefix=i,this.onRecoverableError=l,We&&(this.mutableSourceEagerHydrationData=null)}function fa(e,t,n,i,l,u,h,y,N){return e=new zc(e,t,n,y,N),t===1?(t=1,u===!0&&(t|=8)):t=0,u=Et(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null},ds(u),e}function da(e){if(!e)return en;e=e._reactInternals;e:{if(F(e)!==e||e.tag!==1)throw Error(f(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(it(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(f(171))}if(e.tag===1){var n=e.type;if(it(n))return Ol(e,n,t)}return t}function ha(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(f(188)):(e=Object.keys(e).join(","),Error(f(268,e)));return e=$(t),e===null?null:e.stateNode}function pa(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function il(e,t){pa(e,t),(e=e.alternate)&&pa(e,t)}function Nc(e){return e=$(e),e===null?null:e.stateNode}function kc(){return null}return a.attemptContinuousHydration=function(e){if(e.tag===13){var t=nt();St(e,134217728,t),il(e,134217728)}},a.attemptHydrationAtCurrentPriority=function(e){if(e.tag===13){var t=nt(),n=ln(e);St(e,n,t),il(e,n)}},a.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ir(t.pendingLanes);n!==0&&(rs(t,n|1),lt(t,Ue()),!(ae&6)&&(bn(),At()))}break;case 13:var i=nt();na(function(){return St(e,1,i)}),il(e,1)}},a.batchedUpdates=function(e,t){var n=ae;ae|=1;try{return e(t)}finally{ae=n,ae===0&&(bn(),Gr&&At())}},a.createComponentSelector=function(e){return{$$typeof:mi,value:e}},a.createContainer=function(e,t,n,i,l,u,h){return fa(e,t,!1,null,n,i,l,u,h)},a.createHasPseudoClassSelector=function(e){return{$$typeof:vi,value:e}},a.createHydrationContainer=function(e,t,n,i,l,u,h,y,N){return e=fa(n,i,!0,e,l,u,h,y,N),e.context=da(null),n=e.current,i=nt(),l=ln(n),u=Gt(i,l),u.callback=t??null,nn(n,u),e.current.lanes=l,sr(e,l,i),lt(e,i),e},a.createPortal=function(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}},a.createRoleSelector=function(e){return{$$typeof:gi,value:e}},a.createTestNameSelector=function(e){return{$$typeof:yi,value:e}},a.createTextSelector=function(e){return{$$typeof:xi,value:e}},a.deferredUpdates=function(e){var t=he,n=Ce.transition;try{return Ce.transition=null,he=16,e()}finally{he=t,Ce.transition=n}},a.discreteUpdates=function(e,t,n,i,l){var u=he,h=Ce.transition;try{return Ce.transition=null,he=1,e(t,n,i,l)}finally{he=u,Ce.transition=h,ae===0&&bn()}},a.findAllNodes=Ws,a.findBoundingRects=function(e,t){if(!pn)throw Error(f(363));t=Ws(e,t),e=[];for(var n=0;n<t.length;n++)e.push(Dr(t[n]));for(t=e.length-1;0<t;t--){n=e[t];for(var i=n.x,l=i+n.width,u=n.y,h=u+n.height,y=t-1;0<=y;y--)if(t!==y){var N=e[y],b=N.x,K=b+N.width,ie=N.y,te=ie+N.height;if(i>=b&&u>=ie&&l<=K&&h<=te){e.splice(t,1);break}else if(i!==b||n.width!==N.width||te<u||ie>h){if(!(u!==ie||n.height!==N.height||K<i||b>l)){b>i&&(N.width+=b-i,N.x=i),K<l&&(N.width=l-b),e.splice(t,1);break}}else{ie>u&&(N.height+=ie-u,N.y=u),te<h&&(N.height=h-ie),e.splice(t,1);break}}}return e},a.findHostInstance=ha,a.findHostInstanceWithNoPortals=function(e){return e=H(e),e=e!==null?ze(e):null,e===null?null:e.stateNode},a.findHostInstanceWithWarning=function(e){return ha(e)},a.flushControlled=function(e){var t=ae;ae|=1;var n=Ce.transition,i=he;try{Ce.transition=null,he=1,e()}finally{he=i,Ce.transition=n,ae=t,ae===0&&(bn(),At())}},a.flushPassiveEffects=Tn,a.flushSync=na,a.focusWithin=function(e,t){if(!pn)throw Error(f(363));for(e=js(e),t=$o(e,t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!Tt(n)){if(n.tag===5&&Vi(n.stateNode))return!0;for(n=n.child;n!==null;)t.push(n),n=n.sibling}}return!1},a.getCurrentUpdatePriority=function(){return he},a.getFindAllNodesFailureDescription=function(e,t){if(!pn)throw Error(f(363));var n=0,i=[];e=[js(e),0];for(var l=0;l<e.length;){var u=e[l++],h=e[l++],y=t[h];if((u.tag!==5||!Tt(u))&&(bs(u,y)&&(i.push(Gs(y)),h++,h>n&&(n=h)),h<t.length))for(u=u.child;u!==null;)e.push(u,h),u=u.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Gs(t[n]));return`findAllNodes was able to match part of the selector:
  `+(i.join(" > ")+`

No matching component was found for:
  `)+e.join(" > ")}return null},a.getPublicRootInstance=function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return Te(e.child.stateNode);default:return e.child.stateNode}},a.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:Nc,findFiberByHostInstance:e.findFiberByHostInstance||kc,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{br=t.inject(e),It=t}catch{}e=!!t.checkDCE}}return e},a.isAlreadyRendering=function(){return!1},a.observeVisibleRects=function(e,t,n,i){if(!pn)throw Error(f(363));e=Ws(e,t);var l=Ar(e,n,i).disconnect;return{disconnect:function(){l()}}},a.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},a.runWithPriority=function(e,t){var n=he;try{return he=e,t()}finally{he=n}},a.shouldError=function(){return null},a.shouldSuspend=function(){return!1},a.updateContainer=function(e,t,n,i){var l=t.current,u=nt(),h=ln(l);return n=da(n),t.context===null?t.context=n:t.pendingContext=n,t=Gt(u,h),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),nn(l,t),e=St(l,h,u),e!==null&&Yr(e,l,h),h},a};tu.exports=gf;var yf=tu.exports;const xf=Ac(yf),Rl={},iu=r=>void Object.assign(Rl,r);function Sf(r,s){function a(d,{args:m=[],attach:E,...S},P){let I=`${d[0].toUpperCase()}${d.slice(1)}`,k;if(d==="primitive"){if(S.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const M=S.object;k=Yn(M,{type:d,root:P,attach:E,primitive:!0})}else{const M=Rl[I];if(!M)throw new Error(`R3F: ${I} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(m))throw new Error("R3F: The args prop must be an array!");k=Yn(new M(...m),{type:d,root:P,attach:E,memoizedProps:{args:m}})}return k.__r3f.attach===void 0&&(k.isBufferGeometry?k.__r3f.attach="geometry":k.isMaterial&&(k.__r3f.attach="material")),I!=="inject"&&cl(k,S),k}function o(d,m){let E=!1;if(m){var S,P;(S=m.__r3f)!=null&&S.attach?ul(d,m,m.__r3f.attach):m.isObject3D&&d.isObject3D&&(d.add(m),E=!0),E||(P=d.__r3f)==null||P.objects.push(m),m.__r3f||Yn(m,{}),m.__r3f.parent=d,wl(m),Xn(m)}}function c(d,m,E){let S=!1;if(m){var P,I;if((P=m.__r3f)!=null&&P.attach)ul(d,m,m.__r3f.attach);else if(m.isObject3D&&d.isObject3D){m.parent=d,m.dispatchEvent({type:"added"}),d.dispatchEvent({type:"childadded",child:m});const k=d.children.filter(_=>_!==m),M=k.indexOf(E);d.children=[...k.slice(0,M),m,...k.slice(M)],S=!0}S||(I=d.__r3f)==null||I.objects.push(m),m.__r3f||Yn(m,{}),m.__r3f.parent=d,wl(m),Xn(m)}}function p(d,m,E=!1){d&&[...d].forEach(S=>f(m,S,E))}function f(d,m,E){if(m){var S,P,I;if(m.__r3f&&(m.__r3f.parent=null),(S=d.__r3f)!=null&&S.objects&&(d.__r3f.objects=d.__r3f.objects.filter(O=>O!==m)),(P=m.__r3f)!=null&&P.attach)_a(d,m,m.__r3f.attach);else if(m.isObject3D&&d.isObject3D){var k;d.remove(m),(k=m.__r3f)!=null&&k.root&&Rf(Ui(m),m)}const _=(I=m.__r3f)==null?void 0:I.primitive,C=!_&&(E===void 0?m.dispose!==null:E);if(!_){var M;p((M=m.__r3f)==null?void 0:M.objects,m,C),p(m.children,m,C)}if(delete m.__r3f,C&&m.dispose&&m.type!=="Scene"){const O=()=>{try{m.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?Sl.unstable_scheduleCallback(Sl.unstable_IdlePriority,O):O()}Xn(d)}}function v(d,m,E,S){var P;const I=(P=d.__r3f)==null?void 0:P.parent;if(!I)return;const k=a(m,E,d.__r3f.root);if(d.children){for(const M of d.children)M.__r3f&&o(k,M);d.children=d.children.filter(M=>!M.__r3f)}d.__r3f.objects.forEach(M=>o(k,M)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||f(I,d),k.parent&&(k.__r3f.autoRemovedBeforeAppend=!0),o(I,k),k.raycast&&k.__r3f.eventCount&&Ui(k).getState().internal.interaction.push(k),[S,S.alternate].forEach(M=>{M!==null&&(M.stateNode=k,M.ref&&(typeof M.ref=="function"?M.ref(k):M.ref.current=k))})}const g=()=>{};return{reconciler:xf({createInstance:a,removeChild:f,appendChild:o,appendInitialChild:o,insertBefore:c,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,m)=>{if(!m)return;const E=d.getState().scene;E.__r3f&&(E.__r3f.root=d,o(E,m))},removeChildFromContainer:(d,m)=>{m&&f(d.getState().scene,m)},insertInContainerBefore:(d,m,E)=>{if(!m||!E)return;const S=d.getState().scene;S.__r3f&&c(S,m,E)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var m;return!!((m=d==null?void 0:d.__r3f)!=null?m:{}).handlers},prepareUpdate(d,m,E,S){var P;if(((P=d==null?void 0:d.__r3f)!=null?P:{}).primitive&&S.object&&S.object!==d)return[!0];{const{args:k=[],children:M,..._}=S,{args:C=[],children:O,...A}=E;if(!Array.isArray(k))throw new Error("R3F: the args prop must be an array!");if(k.some((X,G)=>X!==C[G]))return[!0];const U=fu(d,_,A,!0);return U.changes.length?[!1,U]:null}},commitUpdate(d,[m,E],S,P,I,k){m?v(d,S,I,k):cl(d,E)},commitMount(d,m,E,S){var P;const I=(P=d.__r3f)!=null?P:{};d.raycast&&I.handlers&&I.eventCount&&Ui(d).getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>Yn(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var m;const{attach:E,parent:S}=(m=d.__r3f)!=null?m:{};E&&S&&_a(S,d,E),d.isObject3D&&(d.visible=!1),Xn(d)},unhideInstance(d,m){var E;const{attach:S,parent:P}=(E=d.__r3f)!=null?E:{};S&&P&&ul(P,d,S),(d.isObject3D&&m.visible==null||m.visible)&&(d.visible=!0),Xn(d)},createTextInstance:g,hideTextInstance:g,unhideTextInstance:g,getCurrentEventPriority:()=>s?s():Kn.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&we.fun(performance.now)?performance.now:we.fun(Date.now)?Date.now:()=>0,scheduleTimeout:we.fun(setTimeout)?setTimeout:void 0,cancelTimeout:we.fun(clearTimeout)?clearTimeout:void 0}),applyProps:cl}}var Ea,wa;const al=r=>"colorSpace"in r||"outputColorSpace"in r,su=()=>{var r;return(r=Rl.ColorManagement)!=null?r:null},lu=r=>r&&r.isOrthographicCamera,Ef=r=>r&&r.hasOwnProperty("current"),Cr=typeof window<"u"&&((Ea=window.document)!=null&&Ea.createElement||((wa=window.navigator)==null?void 0:wa.product)==="ReactNative")?B.useLayoutEffect:B.useEffect;function ou(r){const s=B.useRef(r);return Cr(()=>void(s.current=r),[r]),s}function wf({set:r}){return Cr(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}class au extends B.Component{constructor(...s){super(...s),this.state={error:!1}}componentDidCatch(s){this.props.set(s)}render(){return this.state.error?null:this.props.children}}au.getDerivedStateFromError=()=>({error:!0});const uu="__default",Ta=new Map,Tf=r=>r&&!!r.memoized&&!!r.changes;function cu(r){var s;const a=typeof window<"u"?(s=window.devicePixelRatio)!=null?s:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],a),r[1]):r}const Tr=r=>{var s;return(s=r.__r3f)==null?void 0:s.root.getState()};function Ui(r){let s=r.__r3f.root;for(;s.getState().previousRoot;)s=s.getState().previousRoot;return s}const we={obj:r=>r===Object(r)&&!we.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,arr:r=>Array.isArray(r),equ(r,s,{arrays:a="shallow",objects:o="reference",strict:c=!0}={}){if(typeof r!=typeof s||!!r!=!!s)return!1;if(we.str(r)||we.num(r)||we.boo(r))return r===s;const p=we.obj(r);if(p&&o==="reference")return r===s;const f=we.arr(r);if(f&&a==="reference")return r===s;if((f||p)&&r===s)return!0;let v;for(v in r)if(!(v in s))return!1;if(p&&a==="shallow"&&o==="shallow"){for(v in c?s:r)if(!we.equ(r[v],s[v],{strict:c,objects:"reference"}))return!1}else for(v in c?s:r)if(r[v]!==s[v])return!1;if(we.und(v)){if(f&&r.length===0&&s.length===0||p&&Object.keys(r).length===0&&Object.keys(s).length===0)return!0;if(r!==s)return!1}return!0}};function Mf(r){r.dispose&&r.type!=="Scene"&&r.dispose();for(const s in r)s.dispose==null||s.dispose(),delete r[s]}function Yn(r,s){const a=r;return a.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...s},r}function El(r,s){let a=r;if(s.includes("-")){const o=s.split("-"),c=o.pop();return a=o.reduce((p,f)=>p[f],r),{target:a,key:c}}else return{target:a,key:s}}const Ma=/-\d+$/;function ul(r,s,a){if(we.str(a)){if(Ma.test(a)){const p=a.replace(Ma,""),{target:f,key:v}=El(r,p);Array.isArray(f[v])||(f[v]=[])}const{target:o,key:c}=El(r,a);s.__r3f.previousAttach=o[c],o[c]=s}else s.__r3f.previousAttach=a(r,s)}function _a(r,s,a){var o,c;if(we.str(a)){const{target:p,key:f}=El(r,a),v=s.__r3f.previousAttach;v===void 0?delete p[f]:p[f]=v}else(o=s.__r3f)==null||o.previousAttach==null||o.previousAttach(r,s);(c=s.__r3f)==null||delete c.previousAttach}function fu(r,{children:s,key:a,ref:o,...c},{children:p,key:f,ref:v,...g}={},T=!1){const d=r.__r3f,m=Object.entries(c),E=[];if(T){const P=Object.keys(g);for(let I=0;I<P.length;I++)c.hasOwnProperty(P[I])||m.unshift([P[I],uu+"remove"])}m.forEach(([P,I])=>{var k;if((k=r.__r3f)!=null&&k.primitive&&P==="object"||we.equ(I,g[P]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(P))return E.push([P,I,!0,[]]);let M=[];P.includes("-")&&(M=P.split("-")),E.push([P,I,!1,M]);for(const _ in c){const C=c[_];_.startsWith(`${P}-`)&&E.push([_,C,!1,_.split("-")])}});const S={...c};return d!=null&&d.memoizedProps&&d!=null&&d.memoizedProps.args&&(S.args=d.memoizedProps.args),d!=null&&d.memoizedProps&&d!=null&&d.memoizedProps.attach&&(S.attach=d.memoizedProps.attach),{memoized:S,changes:E}}function cl(r,s){var a;const o=r.__r3f,c=o==null?void 0:o.root,p=c==null||c.getState==null?void 0:c.getState(),{memoized:f,changes:v}=Tf(s)?s:fu(r,s),g=o==null?void 0:o.eventCount;r.__r3f&&(r.__r3f.memoizedProps=f);for(let E=0;E<v.length;E++){let[S,P,I,k]=v[E];if(al(r)){const O="srgb",A="srgb-linear";S==="encoding"?(S="colorSpace",P=P===3001?O:A):S==="outputEncoding"&&(S="outputColorSpace",P=P===3001?O:A)}let M=r,_=M[S];if(k.length&&(_=k.reduce((C,O)=>C[O],r),!(_&&_.set))){const[C,...O]=k.reverse();M=O.reverse().reduce((A,U)=>A[U],r),S=C}if(P===uu+"remove")if(M.constructor){let C=Ta.get(M.constructor);C||(C=new M.constructor,Ta.set(M.constructor,C)),P=C[S]}else P=0;if(I&&o)P?o.handlers[S]=P:delete o.handlers[S],o.eventCount=Object.keys(o.handlers).length;else if(_&&_.set&&(_.copy||_ instanceof ll)){if(Array.isArray(P))_.fromArray?_.fromArray(P):_.set(...P);else if(_.copy&&P&&P.constructor&&_.constructor===P.constructor)_.copy(P);else if(P!==void 0){var T;const C=(T=_)==null?void 0:T.isColor;!C&&_.setScalar?_.setScalar(P):_ instanceof ll&&P instanceof ll?_.mask=P.mask:_.set(P),!su()&&p&&!p.linear&&C&&_.convertSRGBToLinear()}}else{var d;if(M[S]=P,(d=M[S])!=null&&d.isTexture&&M[S].format===Gc&&M[S].type===fn&&p){const C=M[S];al(C)&&al(p.gl)?C.colorSpace=p.gl.outputColorSpace:C.encoding=p.gl.outputEncoding}}Xn(r)}if(o&&o.parent&&r.raycast&&g!==o.eventCount){const E=Ui(r).getState().internal,S=E.interaction.indexOf(r);S>-1&&E.interaction.splice(S,1),o.eventCount&&E.interaction.push(r)}return!(v.length===1&&v[0][0]==="onUpdate")&&v.length&&(a=r.__r3f)!=null&&a.parent&&wl(r),r}function Xn(r){var s,a;const o=(s=r.__r3f)==null||(a=s.root)==null||a.getState==null?void 0:a.getState();o&&o.internal.frames===0&&o.invalidate()}function wl(r){r.onUpdate==null||r.onUpdate(r)}function _f(r,s){r.manual||(lu(r)?(r.left=s.width/-2,r.right=s.width/2,r.top=s.height/2,r.bottom=s.height/-2):r.aspect=s.width/s.height,r.updateProjectionMatrix(),r.updateMatrixWorld())}function Di(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function Pf(){var r;const s=typeof self<"u"&&self||typeof window<"u"&&window;if(!s)return Kn.DefaultEventPriority;switch((r=s.event)==null?void 0:r.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Kn.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Kn.ContinuousEventPriority;default:return Kn.DefaultEventPriority}}function du(r,s,a,o){const c=a.get(s);c&&(a.delete(s),a.size===0&&(r.delete(o),c.target.releasePointerCapture(o)))}function Rf(r,s){const{internal:a}=r.getState();a.interaction=a.interaction.filter(o=>o!==s),a.initialHits=a.initialHits.filter(o=>o!==s),a.hovered.forEach((o,c)=>{(o.eventObject===s||o.object===s)&&a.hovered.delete(c)}),a.capturedMap.forEach((o,c)=>{du(a.capturedMap,s,o,c)})}function Cf(r){function s(g){const{internal:T}=r.getState(),d=g.offsetX-T.initialClick[0],m=g.offsetY-T.initialClick[1];return Math.round(Math.sqrt(d*d+m*m))}function a(g){return g.filter(T=>["Move","Over","Enter","Out","Leave"].some(d=>{var m;return(m=T.__r3f)==null?void 0:m.handlers["onPointer"+d]}))}function o(g,T){const d=r.getState(),m=new Set,E=[],S=T?T(d.internal.interaction):d.internal.interaction;for(let M=0;M<S.length;M++){const _=Tr(S[M]);_&&(_.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(g,d);function P(M){const _=Tr(M);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var C;_.events.compute==null||_.events.compute(g,_,(C=_.previousRoot)==null?void 0:C.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(M,!0):[]}let I=S.flatMap(P).sort((M,_)=>{const C=Tr(M.object),O=Tr(_.object);return!C||!O?M.distance-_.distance:O.events.priority-C.events.priority||M.distance-_.distance}).filter(M=>{const _=Di(M);return m.has(_)?!1:(m.add(_),!0)});d.events.filter&&(I=d.events.filter(I,d));for(const M of I){let _=M.object;for(;_;){var k;(k=_.__r3f)!=null&&k.eventCount&&E.push({...M,eventObject:_}),_=_.parent}}if("pointerId"in g&&d.internal.capturedMap.has(g.pointerId))for(let M of d.internal.capturedMap.get(g.pointerId).values())m.has(Di(M.intersection))||E.push(M.intersection);return E}function c(g,T,d,m){const E=r.getState();if(g.length){const S={stopped:!1};for(const P of g){const I=Tr(P.object)||E,{raycaster:k,pointer:M,camera:_,internal:C}=I,O=new be(M.x,M.y,0).unproject(_),A=L=>{var H,$;return(H=($=C.capturedMap.get(L))==null?void 0:$.has(P.eventObject))!=null?H:!1},U=L=>{const H={intersection:P,target:T.target};C.capturedMap.has(L)?C.capturedMap.get(L).set(P.eventObject,H):C.capturedMap.set(L,new Map([[P.eventObject,H]])),T.target.setPointerCapture(L)},X=L=>{const H=C.capturedMap.get(L);H&&du(C.capturedMap,P.eventObject,H,L)};let G={};for(let L in T){let H=T[L];typeof H!="function"&&(G[L]=H)}let F={...P,...G,pointer:M,intersections:g,stopped:S.stopped,delta:d,unprojectedPoint:O,ray:k.ray,camera:_,stopPropagation(){const L="pointerId"in T&&C.capturedMap.get(T.pointerId);if((!L||L.has(P.eventObject))&&(F.stopped=S.stopped=!0,C.hovered.size&&Array.from(C.hovered.values()).find(H=>H.eventObject===P.eventObject))){const H=g.slice(0,g.indexOf(P));p([...H,P])}},target:{hasPointerCapture:A,setPointerCapture:U,releasePointerCapture:X},currentTarget:{hasPointerCapture:A,setPointerCapture:U,releasePointerCapture:X},nativeEvent:T};if(m(F),S.stopped===!0)break}}return g}function p(g){const{internal:T}=r.getState();for(const d of T.hovered.values())if(!g.length||!g.find(m=>m.object===d.object&&m.index===d.index&&m.instanceId===d.instanceId)){const E=d.eventObject.__r3f,S=E==null?void 0:E.handlers;if(T.hovered.delete(Di(d)),E!=null&&E.eventCount){const P={...d,intersections:g};S.onPointerOut==null||S.onPointerOut(P),S.onPointerLeave==null||S.onPointerLeave(P)}}}function f(g,T){for(let d=0;d<T.length;d++){const m=T[d].__r3f;m==null||m.handlers.onPointerMissed==null||m.handlers.onPointerMissed(g)}}function v(g){switch(g){case"onPointerLeave":case"onPointerCancel":return()=>p([]);case"onLostPointerCapture":return T=>{const{internal:d}=r.getState();"pointerId"in T&&d.capturedMap.has(T.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(T.pointerId)&&(d.capturedMap.delete(T.pointerId),p([]))})}}return function(d){const{onPointerMissed:m,internal:E}=r.getState();E.lastEvent.current=d;const S=g==="onPointerMove",P=g==="onClick"||g==="onContextMenu"||g==="onDoubleClick",k=o(d,S?a:void 0),M=P?s(d):0;g==="onPointerDown"&&(E.initialClick=[d.offsetX,d.offsetY],E.initialHits=k.map(C=>C.eventObject)),P&&!k.length&&M<=2&&(f(d,E.interaction),m&&m(d)),S&&p(k);function _(C){const O=C.eventObject,A=O.__r3f,U=A==null?void 0:A.handlers;if(A!=null&&A.eventCount)if(S){if(U.onPointerOver||U.onPointerEnter||U.onPointerOut||U.onPointerLeave){const X=Di(C),G=E.hovered.get(X);G?G.stopped&&C.stopPropagation():(E.hovered.set(X,C),U.onPointerOver==null||U.onPointerOver(C),U.onPointerEnter==null||U.onPointerEnter(C))}U.onPointerMove==null||U.onPointerMove(C)}else{const X=U[g];X?(!P||E.initialHits.includes(O))&&(f(d,E.interaction.filter(G=>!E.initialHits.includes(G))),X(C)):P&&E.initialHits.includes(O)&&f(d,E.interaction.filter(G=>!E.initialHits.includes(G)))}}c(k,d,M,_)}}return{handlePointer:v}}const hu=r=>!!(r!=null&&r.render),pu=B.createContext(null),zf=(r,s)=>{const a=vf((v,g)=>{const T=new be,d=new be,m=new be;function E(M=g().camera,_=d,C=g().size){const{width:O,height:A,top:U,left:X}=C,G=O/A;_.isVector3?m.copy(_):m.set(..._);const F=M.getWorldPosition(T).distanceTo(m);if(lu(M))return{width:O/M.zoom,height:A/M.zoom,top:U,left:X,factor:1,distance:F,aspect:G};{const L=M.fov*Math.PI/180,H=2*Math.tan(L/2)*F,$=H*(O/A);return{width:$,height:H,top:U,left:X,factor:O/$,distance:F,aspect:G}}}let S;const P=M=>v(_=>({performance:{..._.performance,current:M}})),I=new xe;return{set:v,get:g,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(M=1)=>r(g(),M),advance:(M,_)=>s(M,_,g()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new bc,pointer:I,mouse:I,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=g();S&&clearTimeout(S),M.performance.current!==M.performance.min&&P(M.performance.min),S=setTimeout(()=>P(g().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:E},setEvents:M=>v(_=>({..._,events:{..._.events,...M}})),setSize:(M,_,C,O,A)=>{const U=g().camera,X={width:M,height:_,top:O||0,left:A||0,updateStyle:C};v(G=>({size:X,viewport:{...G.viewport,...E(U,d,X)}}))},setDpr:M=>v(_=>{const C=cu(M);return{viewport:{..._.viewport,dpr:C,initialDpr:_.viewport.initialDpr||C}}}),setFrameloop:(M="always")=>{const _=g().clock;_.stop(),_.elapsedTime=0,M!=="never"&&(_.start(),_.elapsedTime=0),v(()=>({frameloop:M}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:B.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(M,_,C)=>{const O=g().internal;return O.priority=O.priority+(_>0?1:0),O.subscribers.push({ref:M,priority:_,store:C}),O.subscribers=O.subscribers.sort((A,U)=>A.priority-U.priority),()=>{const A=g().internal;A!=null&&A.subscribers&&(A.priority=A.priority-(_>0?1:0),A.subscribers=A.subscribers.filter(U=>U.ref!==M))}}}}}),o=a.getState();let c=o.size,p=o.viewport.dpr,f=o.camera;return a.subscribe(()=>{const{camera:v,size:g,viewport:T,gl:d,set:m}=a.getState();if(g.width!==c.width||g.height!==c.height||T.dpr!==p){var E;c=g,p=T.dpr,_f(v,g),d.setPixelRatio(T.dpr);const S=(E=g.updateStyle)!=null?E:typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(g.width,g.height,S)}v!==f&&(f=v,m(S=>({viewport:{...S.viewport,...S.viewport.getCurrentViewport(v)}})))}),a.subscribe(v=>r(v)),a};let Ai,Nf=new Set,kf=new Set,If=new Set;function fl(r,s){if(r.size)for(const{callback:a}of r.values())a(s)}function Mr(r,s){switch(r){case"before":return fl(Nf,s);case"after":return fl(kf,s);case"tail":return fl(If,s)}}let dl,hl;function pl(r,s,a){let o=s.clock.getDelta();for(s.frameloop==="never"&&typeof r=="number"&&(o=r-s.clock.elapsedTime,s.clock.oldTime=s.clock.elapsedTime,s.clock.elapsedTime=r),dl=s.internal.subscribers,Ai=0;Ai<dl.length;Ai++)hl=dl[Ai],hl.ref.current(hl.store.getState(),o,a);return!s.internal.priority&&s.gl.render&&s.gl.render(s.scene,s.camera),s.internal.frames=Math.max(0,s.internal.frames-1),s.frameloop==="always"?1:s.internal.frames}function Df(r){let s=!1,a=!1,o,c,p;function f(T){c=requestAnimationFrame(f),s=!0,o=0,Mr("before",T),a=!0;for(const m of r.values()){var d;p=m.store.getState(),p.internal.active&&(p.frameloop==="always"||p.internal.frames>0)&&!((d=p.gl.xr)!=null&&d.isPresenting)&&(o+=pl(T,p))}if(a=!1,Mr("after",T),o===0)return Mr("tail",T),s=!1,cancelAnimationFrame(c)}function v(T,d=1){var m;if(!T)return r.forEach(E=>v(E.store.getState(),d));(m=T.gl.xr)!=null&&m.isPresenting||!T.internal.active||T.frameloop==="never"||(d>1?T.internal.frames=Math.min(60,T.internal.frames+d):a?T.internal.frames=2:T.internal.frames=1,s||(s=!0,requestAnimationFrame(f)))}function g(T,d=!0,m,E){if(d&&Mr("before",T),m)pl(T,m,E);else for(const S of r.values())pl(T,S.store.getState());d&&Mr("after",T)}return{loop:f,invalidate:v,advance:g}}function mu(){const r=B.useContext(pu);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function Ft(r=a=>a,s){return mu()(r,s)}function Cl(r,s=0){const a=mu(),o=a.getState().internal.subscribe,c=ou(r);return Cr(()=>o(c,s,a),[s,o,a]),null}const Zn=new Map,{invalidate:Pa,advance:Ra}=Df(Zn),{reconciler:Fi,applyProps:Vn}=Sf(Zn,Pf),Qn={objects:"shallow",strict:!1},Af=(r,s)=>{const a=typeof r=="function"?r(s):r;return hu(a)?a:new Hc({powerPreference:"high-performance",canvas:s,antialias:!0,alpha:!0,...r})};function Of(r,s){const a=typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement;if(s){const{width:o,height:c,top:p,left:f,updateStyle:v=a}=s;return{width:o,height:c,top:p,left:f,updateStyle:v}}else if(typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:o,height:c,top:p,left:f}=r.parentElement.getBoundingClientRect();return{width:o,height:c,top:p,left:f,updateStyle:a}}else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0,updateStyle:a};return{width:0,height:0,top:0,left:0}}function Uf(r){const s=Zn.get(r),a=s==null?void 0:s.fiber,o=s==null?void 0:s.store;s&&console.warn("R3F.createRoot should only be called once!");const c=typeof reportError=="function"?reportError:console.error,p=o||zf(Pa,Ra),f=a||Fi.createContainer(p,Kn.ConcurrentRoot,null,!1,null,"",c,null);s||Zn.set(r,{fiber:f,store:p});let v,g=!1,T;return{configure(d={}){let{gl:m,size:E,scene:S,events:P,onCreated:I,shadows:k=!1,linear:M=!1,flat:_=!1,legacy:C=!1,orthographic:O=!1,frameloop:A="always",dpr:U=[1,2],performance:X,raycaster:G,camera:F,onPointerMissed:L}=d,H=p.getState(),$=H.gl;H.gl||H.set({gl:$=Af(m,r)});let le=H.raycaster;le||H.set({raycaster:le=new Oc});const{params:ze,...Ne}=G||{};if(we.equ(Ne,le,Qn)||Vn(le,{...Ne}),we.equ(ze,le.params,Qn)||Vn(le,{params:{...le.params,...ze}}),!H.camera||H.camera===T&&!we.equ(T,F,Qn)){T=F;const Y=F instanceof jc,ee=Y?F:O?new Pr(0,0,0,0,.1,1e3):new Rr(75,0,.1,1e3);Y||(ee.position.z=5,F&&(Vn(ee,F),("aspect"in F||"left"in F||"right"in F||"bottom"in F||"top"in F)&&(ee.manual=!0,ee.updateProjectionMatrix())),!H.camera&&!(F!=null&&F.rotation)&&ee.lookAt(0,0,0)),H.set({camera:ee}),le.camera=ee}if(!H.scene){let Y;S!=null&&S.isScene?Y=S:(Y=new xl,S&&Vn(Y,S)),H.set({scene:Yn(Y)})}if(!H.xr){var Te;const Y=(fe,ke)=>{const Ge=p.getState();Ge.frameloop!=="never"&&Ra(fe,!0,Ge,ke)},ee=()=>{const fe=p.getState();fe.gl.xr.enabled=fe.gl.xr.isPresenting,fe.gl.xr.setAnimationLoop(fe.gl.xr.isPresenting?Y:null),fe.gl.xr.isPresenting||Pa(fe)},ue={connect(){const fe=p.getState().gl;fe.xr.addEventListener("sessionstart",ee),fe.xr.addEventListener("sessionend",ee)},disconnect(){const fe=p.getState().gl;fe.xr.removeEventListener("sessionstart",ee),fe.xr.removeEventListener("sessionend",ee)}};typeof((Te=$.xr)==null?void 0:Te.addEventListener)=="function"&&ue.connect(),H.set({xr:ue})}if($.shadowMap){const Y=$.shadowMap.enabled,ee=$.shadowMap.type;if($.shadowMap.enabled=!!k,we.boo(k))$.shadowMap.type=sl;else if(we.str(k)){var He;const ue={basic:Bc,percentage:Lc,soft:sl,variance:Uc};$.shadowMap.type=(He=ue[k])!=null?He:sl}else we.obj(k)&&Object.assign($.shadowMap,k);(Y!==$.shadowMap.enabled||ee!==$.shadowMap.type)&&($.shadowMap.needsUpdate=!0)}const j=su();j&&("enabled"in j?j.enabled=!C:"legacyMode"in j&&(j.legacyMode=C)),g||Vn($,{outputEncoding:M?3e3:3001,toneMapping:_?Va:Fc}),H.legacy!==C&&H.set(()=>({legacy:C})),H.linear!==M&&H.set(()=>({linear:M})),H.flat!==_&&H.set(()=>({flat:_})),m&&!we.fun(m)&&!hu(m)&&!we.equ(m,$,Qn)&&Vn($,m),P&&!H.events.handlers&&H.set({events:P(p)});const Z=Of(r,E);return we.equ(Z,H.size,Qn)||H.setSize(Z.width,Z.height,Z.updateStyle,Z.top,Z.left),U&&H.viewport.dpr!==cu(U)&&H.setDpr(U),H.frameloop!==A&&H.setFrameloop(A),H.onPointerMissed||H.set({onPointerMissed:L}),X&&!we.equ(X,H.performance,Qn)&&H.set(Y=>({performance:{...Y.performance,...X}})),v=I,g=!0,this},render(d){return g||this.configure(),Fi.updateContainer(D.jsx(Lf,{store:p,children:d,onCreated:v,rootElement:r}),f,null,()=>{}),p},unmount(){vu(r)}}}function Lf({store:r,children:s,onCreated:a,rootElement:o}){return Cr(()=>{const c=r.getState();c.set(p=>({internal:{...p.internal,active:!0}})),a&&a(c),r.getState().events.connected||c.events.connect==null||c.events.connect(o)},[]),D.jsx(pu.Provider,{value:r,children:s})}function vu(r,s){const a=Zn.get(r),o=a==null?void 0:a.fiber;if(o){const c=a==null?void 0:a.store.getState();c&&(c.internal.active=!1),Fi.updateContainer(null,o,null,()=>{c&&setTimeout(()=>{try{var p,f,v,g;c.events.disconnect==null||c.events.disconnect(),(p=c.gl)==null||(f=p.renderLists)==null||f.dispose==null||f.dispose(),(v=c.gl)==null||v.forceContextLoss==null||v.forceContextLoss(),(g=c.gl)!=null&&g.xr&&c.xr.disconnect(),Mf(c),Zn.delete(r)}catch{}},500)})}}Fi.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:B.version});const ml={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Bf(r){const{handlePointer:s}=Cf(r);return{priority:1,enabled:!0,compute(a,o,c){o.pointer.set(a.offsetX/o.size.width*2-1,-(a.offsetY/o.size.height)*2+1),o.raycaster.setFromCamera(o.pointer,o.camera)},connected:void 0,handlers:Object.keys(ml).reduce((a,o)=>({...a,[o]:s(o)}),{}),update:()=>{var a;const{events:o,internal:c}=r.getState();(a=c.lastEvent)!=null&&a.current&&o.handlers&&o.handlers.onPointerMove(c.lastEvent.current)},connect:a=>{var o;const{set:c,events:p}=r.getState();p.disconnect==null||p.disconnect(),c(f=>({events:{...f.events,connected:a}})),Object.entries((o=p.handlers)!=null?o:[]).forEach(([f,v])=>{const[g,T]=ml[f];a.addEventListener(g,v,{passive:T})})},disconnect:()=>{const{set:a,events:o}=r.getState();if(o.connected){var c;Object.entries((c=o.handlers)!=null?c:[]).forEach(([p,f])=>{if(o&&o.connected instanceof HTMLElement){const[v]=ml[p];o.connected.removeEventListener(v,f)}}),a(p=>({events:{...p.events,connected:void 0}}))}}}}function Ca(r,s){let a;return(...o)=>{window.clearTimeout(a),a=window.setTimeout(()=>r(...o),s)}}function Ff({debounce:r,scroll:s,polyfill:a,offsetSize:o}={debounce:0,scroll:!1,offsetSize:!1}){const c=a||(typeof window>"u"?class{}:window.ResizeObserver);if(!c)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[p,f]=B.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),v=B.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:p,orientationHandler:null}),g=r?typeof r=="number"?r:r.scroll:null,T=r?typeof r=="number"?r:r.resize:null,d=B.useRef(!1);B.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[m,E,S]=B.useMemo(()=>{const M=()=>{if(!v.current.element)return;const{left:_,top:C,width:O,height:A,bottom:U,right:X,x:G,y:F}=v.current.element.getBoundingClientRect(),L={left:_,top:C,width:O,height:A,bottom:U,right:X,x:G,y:F};v.current.element instanceof HTMLElement&&o&&(L.height=v.current.element.offsetHeight,L.width=v.current.element.offsetWidth),Object.freeze(L),d.current&&!Gf(v.current.lastBounds,L)&&f(v.current.lastBounds=L)};return[M,T?Ca(M,T):M,g?Ca(M,g):M]},[f,o,g,T]);function P(){v.current.scrollContainers&&(v.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",S,!0)),v.current.scrollContainers=null),v.current.resizeObserver&&(v.current.resizeObserver.disconnect(),v.current.resizeObserver=null),v.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",v.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",v.current.orientationHandler))}function I(){v.current.element&&(v.current.resizeObserver=new c(S),v.current.resizeObserver.observe(v.current.element),s&&v.current.scrollContainers&&v.current.scrollContainers.forEach(M=>M.addEventListener("scroll",S,{capture:!0,passive:!0})),v.current.orientationHandler=()=>{S()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",v.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",v.current.orientationHandler))}const k=M=>{!M||M===v.current.element||(P(),v.current.element=M,v.current.scrollContainers=gu(M),I())};return jf(S,!!s),Hf(E),B.useEffect(()=>{P(),I()},[s,S,E]),B.useEffect(()=>P,[]),[k,p,m]}function Hf(r){B.useEffect(()=>{const s=r;return window.addEventListener("resize",s),()=>void window.removeEventListener("resize",s)},[r])}function jf(r,s){B.useEffect(()=>{if(s){const a=r;return window.addEventListener("scroll",a,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",a,!0)}},[r,s])}function gu(r){const s=[];if(!r||r===document.body)return s;const{overflow:a,overflowX:o,overflowY:c}=window.getComputedStyle(r);return[a,o,c].some(p=>p==="auto"||p==="scroll")&&s.push(r),[...s,...gu(r.parentElement)]}const bf=["x","y","top","bottom","left","right","width","height"],Gf=(r,s)=>bf.every(a=>r[a]===s[a]);var Wf=Object.defineProperty,Vf=Object.defineProperties,Qf=Object.getOwnPropertyDescriptors,za=Object.getOwnPropertySymbols,Yf=Object.prototype.hasOwnProperty,Xf=Object.prototype.propertyIsEnumerable,Na=(r,s,a)=>s in r?Wf(r,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[s]=a,ka=(r,s)=>{for(var a in s||(s={}))Yf.call(s,a)&&Na(r,a,s[a]);if(za)for(var a of za(s))Xf.call(s,a)&&Na(r,a,s[a]);return r},Kf=(r,s)=>Vf(r,Qf(s)),Ia,Da;typeof window<"u"&&((Ia=window.document)!=null&&Ia.createElement||((Da=window.navigator)==null?void 0:Da.product)==="ReactNative")?B.useLayoutEffect:B.useEffect;function yu(r,s,a){if(!r)return;if(a(r)===!0)return r;let o=r.child;for(;o;){const c=yu(o,s,a);if(c)return c;o=o.sibling}}function xu(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const Aa=console.error;console.error=function(){const r=[...arguments].join("");if(r!=null&&r.startsWith("Warning:")&&r.includes("useContext")){console.error=Aa;return}return Aa.apply(this,arguments)};const zl=xu(B.createContext(null));class Su extends B.Component{render(){return B.createElement(zl.Provider,{value:this._reactInternals},this.props.children)}}function Zf(){const r=B.useContext(zl);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const s=B.useId();return B.useMemo(()=>{for(const o of[r,r==null?void 0:r.alternate]){if(!o)continue;const c=yu(o,!1,p=>{let f=p.memoizedState;for(;f;){if(f.memoizedState===s)return!0;f=f.next}});if(c)return c}},[r,s])}function qf(){const r=Zf(),[s]=B.useState(()=>new Map);s.clear();let a=r;for(;a;){if(a.type&&typeof a.type=="object"){const c=a.type._context===void 0&&a.type.Provider===a.type?a.type:a.type._context;c&&c!==zl&&!s.has(c)&&s.set(c,B.useContext(xu(c)))}a=a.return}return s}function Jf(){const r=qf();return B.useMemo(()=>Array.from(r.keys()).reduce((s,a)=>o=>B.createElement(s,null,B.createElement(a.Provider,Kf(ka({},o),{value:r.get(a)}))),s=>B.createElement(Su,ka({},s))),[r])}const $f=B.forwardRef(function({children:s,fallback:a,resize:o,style:c,gl:p,events:f=Bf,eventSource:v,eventPrefix:g,shadows:T,linear:d,flat:m,legacy:E,orthographic:S,frameloop:P,dpr:I,performance:k,raycaster:M,camera:_,scene:C,onPointerMissed:O,onCreated:A,...U},X){B.useMemo(()=>iu(Wc),[]);const G=Jf(),[F,L]=Ff({scroll:!0,debounce:{scroll:50,resize:0},...o}),H=B.useRef(null),$=B.useRef(null);B.useImperativeHandle(X,()=>H.current);const le=ou(O),[ze,Ne]=B.useState(!1),[Te,He]=B.useState(!1);if(ze)throw ze;if(Te)throw Te;const j=B.useRef(null);Cr(()=>{const Y=H.current;L.width>0&&L.height>0&&Y&&(j.current||(j.current=Uf(Y)),j.current.configure({gl:p,events:f,shadows:T,linear:d,flat:m,legacy:E,orthographic:S,frameloop:P,dpr:I,performance:k,raycaster:M,camera:_,scene:C,size:L,onPointerMissed:(...ee)=>le.current==null?void 0:le.current(...ee),onCreated:ee=>{ee.events.connect==null||ee.events.connect(v?Ef(v)?v.current:v:$.current),g&&ee.setEvents({compute:(ue,fe)=>{const ke=ue[g+"X"],Ge=ue[g+"Y"];fe.pointer.set(ke/fe.size.width*2-1,-(Ge/fe.size.height)*2+1),fe.raycaster.setFromCamera(fe.pointer,fe.camera)}}),A==null||A(ee)}}),j.current.render(D.jsx(G,{children:D.jsx(au,{set:He,children:D.jsx(B.Suspense,{fallback:D.jsx(wf,{set:Ne}),children:s??null})})})))}),B.useEffect(()=>{const Y=H.current;if(Y)return()=>vu(Y)},[]);const Z=v?"none":"auto";return D.jsx("div",{ref:$,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Z,...c},...U,children:D.jsx("div",{ref:F,style:{width:"100%",height:"100%"},children:D.jsx("canvas",{ref:H,style:{display:"block"},children:a})})})}),ed=B.forwardRef(function(s,a){return D.jsx(Su,{children:D.jsx($f,{...s,ref:a})})});/**
 * postprocessing v6.38.0 build Sat Nov 08 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rschen
 * @license Zlib
 */var vl=1/1e3,td=1e3,nd=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(r){typeof document<"u"&&document.hidden!==void 0&&(r?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=r)}get delta(){return this._delta*vl}get fixedDelta(){return this._fixedDelta*vl}set fixedDelta(r){this._fixedDelta=r*td}get elapsed(){return this._elapsed*vl}update(r){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(r!==void 0?r:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(r){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},rd=(()=>{const r=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),s=new Float32Array([0,0,2,0,0,2]),a=new ef;return a.setAttribute("position",new ma(r,3)),a.setAttribute("uv",new ma(s,2)),a})(),at=class Tl{static get fullscreenGeometry(){return rd}constructor(s="Pass",a=new xl,o=new Pr){this.name=s,this.renderer=null,this.scene=a,this.camera=o,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(s){if(this.rtt===s){const a=this.fullscreenMaterial;a!==null&&(a.needsUpdate=!0),this.rtt=!s}}set mainScene(s){}set mainCamera(s){}setRenderer(s){this.renderer=s}isEnabled(){return this.enabled}setEnabled(s){this.enabled=s}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(s){let a=this.screen;a!==null?a.material=s:(a=new qc(Tl.fullscreenGeometry,s),a.frustumCulled=!1,this.scene===null&&(this.scene=new xl),this.scene.add(a),this.screen=a)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(s){this.fullscreenMaterial=s}getDepthTexture(){return null}setDepthTexture(s,a=qn){}render(s,a,o,c,p){throw new Error("Render method not implemented!")}setSize(s,a){}initialize(s,a,o){}dispose(){for(const s of Object.keys(this)){const a=this[s];(a instanceof Ht||a instanceof Xa||a instanceof Ka||a instanceof Tl)&&this[s].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},id=class extends at{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(r,s,a,o,c){const p=r.state.buffers.stencil;p.setLocked(!1),p.setTest(!1)}},sd=`#ifdef COLOR_WRITE
#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#endif
#ifdef DEPTH_WRITE
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
#ifdef USE_WEIGHTS
uniform vec4 channelWeights;
#endif
uniform float opacity;varying vec2 vUv;void main(){
#ifdef COLOR_WRITE
vec4 texel=texture2D(inputBuffer,vUv);
#ifdef USE_WEIGHTS
texel*=channelWeights;
#endif
gl_FragColor=opacity*texel;
#ifdef COLOR_SPACE_CONVERSION
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
#else
gl_FragColor=vec4(0.0);
#endif
#ifdef DEPTH_WRITE
gl_FragDepth=readDepth(vUv);
#endif
}`,Eu="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",wu=class extends dn{constructor(){super({name:"CopyMaterial",defines:{DEPTH_PACKING:"0",COLOR_WRITE:"1"},uniforms:{inputBuffer:new ge(null),depthBuffer:new ge(null),channelWeights:new ge(null),opacity:new ge(1)},blending:Pn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:sd,vertexShader:Eu}),this.depthFunc=$c}get inputBuffer(){return this.uniforms.inputBuffer.value}set inputBuffer(r){const s=r!==null;this.colorWrite!==s&&(s?this.defines.COLOR_WRITE=!0:delete this.defines.COLOR_WRITE,this.colorWrite=s,this.needsUpdate=!0),this.uniforms.inputBuffer.value=r}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(r){const s=r!==null;this.depthWrite!==s&&(s?this.defines.DEPTH_WRITE=!0:delete this.defines.DEPTH_WRITE,this.depthTest=s,this.depthWrite=s,this.needsUpdate=!0),this.uniforms.depthBuffer.value=r}set depthPacking(r){this.defines.DEPTH_PACKING=r.toFixed(0),this.needsUpdate=!0}get channelWeights(){return this.uniforms.channelWeights.value}set channelWeights(r){r!==null?(this.defines.USE_WEIGHTS="1",this.uniforms.channelWeights.value=r):delete this.defines.USE_WEIGHTS,this.needsUpdate=!0}setInputBuffer(r){this.uniforms.inputBuffer.value=r}getOpacity(r){return this.uniforms.opacity.value}setOpacity(r){this.uniforms.opacity.value=r}},ld=class extends at{constructor(r,s=!0){super("CopyPass"),this.fullscreenMaterial=new wu,this.needsSwap=!1,this.renderTarget=r,r===void 0&&(this.renderTarget=new Ht(1,1,{minFilter:Li,magFilter:Li,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=s}get resize(){return this.autoResize}set resize(r){this.autoResize=r}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(r){this.autoResize=r}render(r,s,a,o,c){this.fullscreenMaterial.inputBuffer=s.texture,r.setRenderTarget(this.renderToScreen?null:this.renderTarget),r.render(this.scene,this.camera)}setSize(r,s){this.autoResize&&this.renderTarget.setSize(r,s)}initialize(r,s,a){a!==void 0&&(this.renderTarget.texture.type=a,a!==fn?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":r!==null&&r.outputColorSpace===Ze&&(this.renderTarget.texture.colorSpace=Ze))}},Oa=new Fe,Tu=class extends at{constructor(r=!0,s=!0,a=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=r,this.depth=s,this.stencil=a,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(r,s,a){this.color=r,this.depth=s,this.stencil=a}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(r){this.overrideClearColor=r}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(r){this.overrideClearAlpha=r}render(r,s,a,o,c){const p=this.overrideClearColor,f=this.overrideClearAlpha,v=r.getClearAlpha(),g=p!==null,T=f>=0;g?(r.getClearColor(Oa),r.setClearColor(p,T?f:v)):T&&r.setClearAlpha(f),r.setRenderTarget(this.renderToScreen?null:s),r.clear(this.color,this.depth,this.stencil),g?r.setClearColor(Oa,v):T&&r.setClearAlpha(v)}},od=class extends at{constructor(r,s){super("MaskPass",r,s),this.needsSwap=!1,this.clearPass=new Tu(!1,!1,!0),this.inverse=!1}set mainScene(r){this.scene=r}set mainCamera(r){this.camera=r}get inverted(){return this.inverse}set inverted(r){this.inverse=r}get clear(){return this.clearPass.enabled}set clear(r){this.clearPass.enabled=r}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(r){this.inverted=r}render(r,s,a,o,c){const p=r.getContext(),f=r.state.buffers,v=this.scene,g=this.camera,T=this.clearPass,d=this.inverted?0:1,m=1-d;f.color.setMask(!1),f.depth.setMask(!1),f.color.setLocked(!0),f.depth.setLocked(!0),f.stencil.setTest(!0),f.stencil.setOp(p.REPLACE,p.REPLACE,p.REPLACE),f.stencil.setFunc(p.ALWAYS,d,4294967295),f.stencil.setClear(m),f.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?T.render(r,null):(T.render(r,s),T.render(r,a))),this.renderToScreen?(r.setRenderTarget(null),r.render(v,g)):(r.setRenderTarget(s),r.render(v,g),r.setRenderTarget(a),r.render(v,g)),f.color.setLocked(!1),f.depth.setLocked(!1),f.stencil.setLocked(!1),f.stencil.setFunc(p.EQUAL,1,4294967295),f.stencil.setOp(p.KEEP,p.KEEP,p.KEEP),f.stencil.setLocked(!0)}},ad=class{constructor(s=null,{depthBuffer:a=!0,stencilBuffer:o=!1,multisampling:c=0,frameBufferType:p}={}){this.renderer=null,this.inputBuffer=this.createBuffer(a,o,p,c),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new ld,this.depthTexture=null,this.passes=[],this.timer=new nd,this.autoRenderToScreen=!0,this.setRenderer(s)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(s){const a=this.inputBuffer,o=this.multisampling;o>0&&s>0?(this.inputBuffer.samples=s,this.outputBuffer.samples=s,this.inputBuffer.dispose(),this.outputBuffer.dispose()):o!==s&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(a.depthBuffer,a.stencilBuffer,a.texture.type,s),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(s){if(this.renderer=s,s!==null){const a=s.getSize(new xe),o=s.getContext().getContextAttributes().alpha,c=this.inputBuffer.texture.type;c===fn&&s.outputColorSpace===Ze&&(this.inputBuffer.texture.colorSpace=Ze,this.outputBuffer.texture.colorSpace=Ze,this.inputBuffer.dispose(),this.outputBuffer.dispose()),s.autoClear=!1,this.setSize(a.width,a.height);for(const p of this.passes)p.initialize(s,o,c)}}replaceRenderer(s,a=!0){const o=this.renderer,c=o.domElement.parentNode;return this.setRenderer(s),a&&c!==null&&(c.removeChild(o.domElement),c.appendChild(s.domElement)),o}createDepthTexture(){const s=this.depthTexture=new Vc;return this.inputBuffer.depthTexture=s,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(s.format=Qc,s.type=Yc):s.type=Xc,s}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const s of this.passes)s.setDepthTexture(null)}}createBuffer(s,a,o,c){const p=this.renderer,f=p===null?new xe:p.getDrawingBufferSize(new xe),v={minFilter:Li,magFilter:Li,stencilBuffer:a,depthBuffer:s,type:o},g=new Ht(f.width,f.height,v);return c>0&&(g.samples=c),o===fn&&p!==null&&p.outputColorSpace===Ze&&(g.texture.colorSpace=Ze),g.texture.name="EffectComposer.Buffer",g.texture.generateMipmaps=!1,g}setMainScene(s){for(const a of this.passes)a.mainScene=s}setMainCamera(s){for(const a of this.passes)a.mainCamera=s}addPass(s,a){const o=this.passes,c=this.renderer,p=c.getDrawingBufferSize(new xe),f=c.getContext().getContextAttributes().alpha,v=this.inputBuffer.texture.type;if(s.setRenderer(c),s.setSize(p.width,p.height),s.initialize(c,f,v),this.autoRenderToScreen&&(o.length>0&&(o[o.length-1].renderToScreen=!1),s.renderToScreen&&(this.autoRenderToScreen=!1)),a!==void 0?o.splice(a,0,s):o.push(s),this.autoRenderToScreen&&(o[o.length-1].renderToScreen=!0),s.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const g=this.createDepthTexture();for(s of o)s.setDepthTexture(g)}else s.setDepthTexture(this.depthTexture)}removePass(s){const a=this.passes,o=a.indexOf(s);if(o!==-1&&a.splice(o,1).length>0){if(this.depthTexture!==null){const f=(g,T)=>g||T.needsDepthTexture;a.reduce(f,!1)||(s.getDepthTexture()===this.depthTexture&&s.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&o===a.length&&(s.renderToScreen=!1,a.length>0&&(a[a.length-1].renderToScreen=!0))}}removeAllPasses(){const s=this.passes;this.deleteDepthTexture(),s.length>0&&(this.autoRenderToScreen&&(s[s.length-1].renderToScreen=!1),this.passes=[])}render(s){const a=this.renderer,o=this.copyPass;let c=this.inputBuffer,p=this.outputBuffer,f=!1,v,g,T;s===void 0&&(this.timer.update(),s=this.timer.getDelta());for(const d of this.passes)d.enabled&&(d.render(a,c,p,s,f),d.needsSwap&&(f&&(o.renderToScreen=d.renderToScreen,v=a.getContext(),g=a.state.buffers.stencil,g.setFunc(v.NOTEQUAL,1,4294967295),o.render(a,c,p,s,f),g.setFunc(v.EQUAL,1,4294967295)),T=c,c=p,p=T),d instanceof od?f=!0:d instanceof id&&(f=!1))}setSize(s,a,o){const c=this.renderer,p=c.getSize(new xe);(s===void 0||a===void 0)&&(s=p.width,a=p.height),(p.width!==s||p.height!==a)&&c.setSize(s,a,o);const f=c.getDrawingBufferSize(new xe);this.inputBuffer.setSize(f.width,f.height),this.outputBuffer.setSize(f.width,f.height);for(const v of this.passes)v.setSize(f.width,f.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const s of this.passes)s.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),at.fullscreenGeometry.dispose()}},Xt={NONE:0,DEPTH:1,CONVOLUTION:2},ve={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},ud=class{constructor(){this.shaderParts=new Map([[ve.FRAGMENT_HEAD,null],[ve.FRAGMENT_MAIN_UV,null],[ve.FRAGMENT_MAIN_IMAGE,null],[ve.VERTEX_HEAD,null],[ve.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Xt.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Qa}},gl=!1,Ua=class{constructor(r=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(r),this.meshCount=0,this.replaceMaterial=s=>{if(s.isMesh){let a;if(s.material.flatShading)switch(s.material.side){case Ii:a=this.materialsFlatShadedDoubleSide;break;case ki:a=this.materialsFlatShadedBackSide;break;default:a=this.materialsFlatShaded;break}else switch(s.material.side){case Ii:a=this.materialsDoubleSide;break;case ki:a=this.materialsBackSide;break;default:a=this.materials;break}this.originalMaterials.set(s,s.material),s.isSkinnedMesh?s.material=a[2]:s.isInstancedMesh?s.material=a[1]:s.material=a[0],++this.meshCount}}}cloneMaterial(r){if(!(r instanceof dn))return r.clone();const s=r.uniforms,a=new Map;for(const c in s){const p=s[c].value;p.isRenderTargetTexture&&(s[c].value=null,a.set(c,p))}const o=r.clone();for(const c of a)s[c[0]].value=c[1],o.uniforms[c[0]].value=c[1];return o}setMaterial(r){if(this.disposeMaterials(),this.material=r,r!==null){const s=this.materials=[this.cloneMaterial(r),this.cloneMaterial(r),this.cloneMaterial(r)];for(const a of s)a.uniforms=Object.assign({},r.uniforms),a.side=Jc;s[2].skinning=!0,this.materialsBackSide=s.map(a=>{const o=this.cloneMaterial(a);return o.uniforms=Object.assign({},r.uniforms),o.side=ki,o}),this.materialsDoubleSide=s.map(a=>{const o=this.cloneMaterial(a);return o.uniforms=Object.assign({},r.uniforms),o.side=Ii,o}),this.materialsFlatShaded=s.map(a=>{const o=this.cloneMaterial(a);return o.uniforms=Object.assign({},r.uniforms),o.flatShading=!0,o}),this.materialsFlatShadedBackSide=s.map(a=>{const o=this.cloneMaterial(a);return o.uniforms=Object.assign({},r.uniforms),o.flatShading=!0,o.side=ki,o}),this.materialsFlatShadedDoubleSide=s.map(a=>{const o=this.cloneMaterial(a);return o.uniforms=Object.assign({},r.uniforms),o.flatShading=!0,o.side=Ii,o})}}render(r,s,a){const o=r.shadowMap.enabled;if(r.shadowMap.enabled=!1,gl){const c=this.originalMaterials;this.meshCount=0,s.traverse(this.replaceMaterial),r.render(s,a);for(const p of c)p[0].material=p[1];this.meshCount!==c.size&&c.clear()}else{const c=s.overrideMaterial;s.overrideMaterial=this.material,r.render(s,a),s.overrideMaterial=c}r.shadowMap.enabled=o}disposeMaterials(){if(this.material!==null){const r=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const s of r)s.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return gl}static set workaroundEnabled(r){gl=r}},cn=-1,qe=class extends Pl{constructor(r,s=cn,a=cn,o=1){super(),this.resizable=r,this.baseSize=new xe(1,1),this.preferredSize=new xe(s,a),this.target=this.preferredSize,this.s=o,this.effectiveSize=new xe,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const r=this.baseSize,s=this.preferredSize,a=this.effectiveSize,o=this.scale;s.width!==cn?a.width=s.width:s.height!==cn?a.width=Math.round(s.height*(r.width/Math.max(r.height,1))):a.width=Math.round(r.width*o),s.height!==cn?a.height=s.height:s.width!==cn?a.height=Math.round(s.width/Math.max(r.width/Math.max(r.height,1),1)):a.height=Math.round(r.height*o)}get width(){return this.effectiveSize.width}set width(r){this.preferredWidth=r}get height(){return this.effectiveSize.height}set height(r){this.preferredHeight=r}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(r){this.s!==r&&(this.s=r,this.preferredSize.setScalar(cn),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(r){this.scale=r}get baseWidth(){return this.baseSize.width}set baseWidth(r){this.baseSize.width!==r&&(this.baseSize.width=r,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(r){this.baseWidth=r}get baseHeight(){return this.baseSize.height}set baseHeight(r){this.baseSize.height!==r&&(this.baseSize.height=r,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(r){this.baseHeight=r}setBaseSize(r,s){(this.baseSize.width!==r||this.baseSize.height!==s)&&(this.baseSize.set(r,s),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(r){this.preferredSize.width!==r&&(this.preferredSize.width=r,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(r){this.preferredWidth=r}get preferredHeight(){return this.preferredSize.height}set preferredHeight(r){this.preferredSize.height!==r&&(this.preferredSize.height=r,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(r){this.preferredHeight=r}setPreferredSize(r,s){(this.preferredSize.width!==r||this.preferredSize.height!==s)&&(this.preferredSize.set(r,s),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(r){this.s=r.scale,this.baseSize.set(r.baseWidth,r.baseHeight),this.preferredSize.set(r.preferredWidth,r.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return cn}},ce={ADD:0,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},cd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb,y.a),y.a*opacity);}",fd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb)*0.5,y.a),y.a*opacity);}",dd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.xy,xHSL.z));return mix(x,vec4(z,y.a),y.a*opacity);}",hd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=mix(step(0.0,b)*(1.0-min(vec3(1.0),(1.0-a)/b)),vec3(1.0),step(1.0,a));return mix(x,vec4(z,y.a),y.a*opacity);}",pd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=step(0.0,a)*mix(min(vec3(1.0),a/max(1.0-b,1e-9)),vec3(1.0),step(1.0,b));return mix(x,vec4(z,y.a),y.a*opacity);}",md="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb,y.rgb),y.a),y.a*opacity);}",vd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(abs(x.rgb-y.rgb),y.a),y.a*opacity);}",gd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb/max(y.rgb,1e-12),y.a),y.a*opacity);}",yd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb-2.0*x.rgb*y.rgb),y.a),y.a*opacity);}",xd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=min(x.rgb,1.0);vec3 b=min(y.rgb,1.0);vec3 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,b));return mix(x,vec4(z,y.a),y.a*opacity);}",Sd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(step(1.0,x.rgb+y.rgb),y.a),y.a*opacity);}",Ed="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.x,xHSL.yz));return mix(x,vec4(z,y.a),y.a*opacity);}",wd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-y.rgb,y.a),y.a*opacity);}",Td="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(y.rgb*(1.0-x.rgb),y.a),y.a*opacity);}",Md="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb,y.rgb),y.a),y.a*opacity);}",_d="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(y.rgb+x.rgb-1.0,0.0,1.0),y.a),y.a*opacity);}",Pd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb+y.rgb,1.0),y.a),y.a*opacity);}",Rd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(2.0*y.rgb+x.rgb-1.0,0.0,1.0),y.a),y.a*opacity);}",Cd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.xy,yHSL.z));return mix(x,vec4(z,y.a),y.a*opacity);}",zd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb*y.rgb,y.a),y.a*opacity);}",Nd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-abs(1.0-x.rgb-y.rgb),y.a),y.a*opacity);}",kd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,y.a*opacity);}",Id="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(2.0*y.rgb*x.rgb,1.0-2.0*(1.0-y.rgb)*(1.0-x.rgb),step(0.5,x.rgb));return mix(x,vec4(z,y.a),y.a*opacity);}",Dd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 y2=2.0*y.rgb;vec3 z=mix(mix(y2,x.rgb,step(0.5*x.rgb,y.rgb)),max(y2-1.0,vec3(0.0)),step(x.rgb,y2-1.0));return mix(x,vec4(z,y.a),y.a*opacity);}",Ad="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(min(x.rgb*x.rgb/max(1.0-y.rgb,1e-12),1.0),y.rgb,step(1.0,y.rgb));return mix(x,vec4(z,y.a),y.a*opacity);}",Od="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.x,yHSL.y,xHSL.z));return mix(x,vec4(z,y.a),y.a*opacity);}",Ud="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb-min(x.rgb*y.rgb,1.0),y.a),y.a*opacity);}",Ld="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb;vec3 b=y.rgb;vec3 y2=2.0*b;vec3 w=step(0.5,b);vec3 c=a-(1.0-y2)*a*(1.0-a);vec3 d=mix(a+(y2-1.0)*(sqrt(a)-a),a+(y2-1.0)*a*((16.0*a-12.0)*a+3.0),w*(1.0-step(0.25,a)));vec3 z=mix(c,d,w);return mix(x,vec4(z,y.a),y.a*opacity);}",Bd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",Fd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb+y.rgb-1.0,0.0),y.a),y.a*opacity);}",Hd="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(max(1.0-min((1.0-x.rgb)/(2.0*y.rgb),1.0),0.0),min(x.rgb/(2.0*(1.0-y.rgb)),1.0),step(0.5,y.rgb));return mix(x,vec4(z,y.a),y.a*opacity);}",jd=new Map([[ce.ADD,cd],[ce.AVERAGE,fd],[ce.COLOR,dd],[ce.COLOR_BURN,hd],[ce.COLOR_DODGE,pd],[ce.DARKEN,md],[ce.DIFFERENCE,vd],[ce.DIVIDE,gd],[ce.DST,null],[ce.EXCLUSION,yd],[ce.HARD_LIGHT,xd],[ce.HARD_MIX,Sd],[ce.HUE,Ed],[ce.INVERT,wd],[ce.INVERT_RGB,Td],[ce.LIGHTEN,Md],[ce.LINEAR_BURN,_d],[ce.LINEAR_DODGE,Pd],[ce.LINEAR_LIGHT,Rd],[ce.LUMINOSITY,Cd],[ce.MULTIPLY,zd],[ce.NEGATION,Nd],[ce.NORMAL,kd],[ce.OVERLAY,Id],[ce.PIN_LIGHT,Dd],[ce.REFLECT,Ad],[ce.SATURATION,Od],[ce.SCREEN,Ud],[ce.SOFT_LIGHT,Ld],[ce.SRC,Bd],[ce.SUBTRACT,Fd],[ce.VIVID_LIGHT,Hd]]),bd=class extends Pl{constructor(r,s=1){super(),this._blendFunction=r,this.opacity=new ge(s)}getOpacity(){return this.opacity.value}setOpacity(r){this.opacity.value=r}get blendFunction(){return this._blendFunction}set blendFunction(r){this._blendFunction=r,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(r){this.blendFunction=r}getShaderCode(){return jd.get(this.blendFunction)}},Ml=class extends Pl{constructor(r,s,{attributes:a=Xt.NONE,blendFunction:o=ce.NORMAL,defines:c=new Map,uniforms:p=new Map,extensions:f=null,vertexShader:v=null}={}){super(),this.name=r,this.renderer=null,this.attributes=a,this.fragmentShader=s,this.vertexShader=v,this.defines=c,this.uniforms=p,this.extensions=f,this.blendMode=new bd(o),this.blendMode.addEventListener("change",g=>this.setChanged()),this._inputColorSpace=Qa,this._outputColorSpace=Ya}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(r){this._inputColorSpace=r,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(r){this._outputColorSpace=r,this.setChanged()}set mainScene(r){}set mainCamera(r){}getName(){return this.name}setRenderer(r){this.renderer=r}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(r){this.attributes=r,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(r){this.fragmentShader=r,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(r){this.vertexShader=r,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(r,s=qn){}update(r,s,a){}setSize(r,s){}initialize(r,s,a){}dispose(){for(const r of Object.keys(this)){const s=this[r];(s instanceof Ht||s instanceof Xa||s instanceof Ka||s instanceof at)&&this[r].dispose()}}},Nl={MEDIUM:2,LARGE:3},Gd=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,Wd="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",Vd=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Qd=class extends dn{constructor(r=new va){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new ge(null),texelSize:new ge(new va),scale:new ge(1),kernel:new ge(0)},blending:Pn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Gd,vertexShader:Wd}),this.setTexelSize(r.x,r.y),this.kernelSize=Nl.MEDIUM}set inputBuffer(r){this.uniforms.inputBuffer.value=r}setInputBuffer(r){this.inputBuffer=r}get kernelSequence(){return Vd[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(r){this.uniforms.scale.value=r}getScale(){return this.uniforms.scale.value}setScale(r){this.uniforms.scale.value=r}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(r){this.uniforms.kernel.value=r}setKernel(r){this.kernel=r}setTexelSize(r,s){this.uniforms.texelSize.value.set(r,s,r*.5,s*.5)}setSize(r,s){const a=1/r,o=1/s;this.uniforms.texelSize.value.set(a,o,a*.5,o*.5)}},Yd=class extends at{constructor({kernelSize:r=Nl.MEDIUM,resolutionScale:s=.5,width:a=qe.AUTO_SIZE,height:o=qe.AUTO_SIZE,resolutionX:c=a,resolutionY:p=o}={}){super("KawaseBlurPass"),this.renderTargetA=new Ht(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const f=this.resolution=new qe(this,c,p,s);f.addEventListener("change",v=>this.setSize(f.baseWidth,f.baseHeight)),this._blurMaterial=new Qd,this._blurMaterial.kernelSize=r,this.copyMaterial=new wu}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(r){this._blurMaterial=r}get dithering(){return this.copyMaterial.dithering}set dithering(r){this.copyMaterial.dithering=r}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(r){this.blurMaterial.kernelSize=r}get width(){return this.resolution.width}set width(r){this.resolution.preferredWidth=r}get height(){return this.resolution.height}set height(r){this.resolution.preferredHeight=r}get scale(){return this.blurMaterial.scale}set scale(r){this.blurMaterial.scale=r}getScale(){return this.blurMaterial.scale}setScale(r){this.blurMaterial.scale=r}getKernelSize(){return this.kernelSize}setKernelSize(r){this.kernelSize=r}getResolutionScale(){return this.resolution.scale}setResolutionScale(r){this.resolution.scale=r}render(r,s,a,o,c){const p=this.scene,f=this.camera,v=this.renderTargetA,g=this.renderTargetB,T=this.blurMaterial,d=T.kernelSequence;let m=s;this.fullscreenMaterial=T;for(let E=0,S=d.length;E<S;++E){const P=E&1?g:v;T.kernel=d[E],T.inputBuffer=m.texture,r.setRenderTarget(P),r.render(p,f),m=P}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=m.texture,r.setRenderTarget(this.renderToScreen?null:a),r.render(p,f)}setSize(r,s){const a=this.resolution;a.setBaseSize(r,s);const o=a.width,c=a.height;this.renderTargetA.setSize(o,c),this.renderTargetB.setSize(o,c),this.blurMaterial.setSize(r,s)}initialize(r,s,a){a!==void 0&&(this.renderTargetA.texture.type=a,this.renderTargetB.texture.type=a,a!==fn?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):r!==null&&r.outputColorSpace===Ze&&(this.renderTargetA.texture.colorSpace=Ze,this.renderTargetB.texture.colorSpace=Ze))}static get AUTO_SIZE(){return qe.AUTO_SIZE}},Xd=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);float mask=1.0;
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);mask=low*high;
#elif defined(THRESHOLD)
mask=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=texel*mask;
#else
gl_FragColor=vec4(l*mask);
#endif
}`,Kd=class extends dn{constructor(r=!1,s=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Za.replace(/\D+/g,"")},uniforms:{inputBuffer:new ge(null),threshold:new ge(0),smoothing:new ge(1),range:new ge(null)},blending:Pn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Xd,vertexShader:Eu}),this.colorOutput=r,this.luminanceRange=s}set inputBuffer(r){this.uniforms.inputBuffer.value=r}setInputBuffer(r){this.uniforms.inputBuffer.value=r}get threshold(){return this.uniforms.threshold.value}set threshold(r){this.smoothing>0||r>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=r}getThreshold(){return this.threshold}setThreshold(r){this.threshold=r}get smoothing(){return this.uniforms.smoothing.value}set smoothing(r){this.threshold>0||r>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=r}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(r){this.smoothing=r}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(r){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(r){r?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(r){return this.colorOutput}setColorOutputEnabled(r){this.colorOutput=r}get useRange(){return this.luminanceRange!==null}set useRange(r){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(r){r!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=r,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(r){this.luminanceRange=r}},Zd=class extends at{constructor({renderTarget:r,luminanceRange:s,colorOutput:a,resolutionScale:o=1,width:c=qe.AUTO_SIZE,height:p=qe.AUTO_SIZE,resolutionX:f=c,resolutionY:v=p}={}){super("LuminancePass"),this.fullscreenMaterial=new Kd(a,s),this.needsSwap=!1,this.renderTarget=r,this.renderTarget===void 0&&(this.renderTarget=new Ht(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const g=this.resolution=new qe(this,f,v,o);g.addEventListener("change",T=>this.setSize(g.baseWidth,g.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(r,s,a,o,c){const p=this.fullscreenMaterial;p.inputBuffer=s.texture,r.setRenderTarget(this.renderToScreen?null:this.renderTarget),r.render(this.scene,this.camera)}setSize(r,s){const a=this.resolution;a.setBaseSize(r,s),this.renderTarget.setSize(a.width,a.height)}initialize(r,s,a){a!==void 0&&a!==fn&&(this.renderTarget.texture.type=a,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},qd=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,Jd="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",$d=class extends dn{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new ge(null),texelSize:new ge(new xe)},blending:Pn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:qd,vertexShader:Jd})}set inputBuffer(r){this.uniforms.inputBuffer.value=r}setSize(r,s){this.uniforms.texelSize.value.set(1/r,1/s)}},eh=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,th="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",nh=class extends dn{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new ge(null),supportBuffer:new ge(null),texelSize:new ge(new xe),radius:new ge(.85)},blending:Pn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:eh,vertexShader:th})}set inputBuffer(r){this.uniforms.inputBuffer.value=r}set supportBuffer(r){this.uniforms.supportBuffer.value=r}get radius(){return this.uniforms.radius.value}set radius(r){this.uniforms.radius.value=r}setSize(r,s){this.uniforms.texelSize.value.set(1/r,1/s)}},rh=class extends at{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Ht(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new $d,this.upsamplingMaterial=new nh,this.resolution=new xe}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(r){if(this.levels!==r){const s=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let a=0;a<r;++a){const o=s.clone();o.texture.name="Downsampling.Mipmap"+a,this.downsamplingMipmaps.push(o)}this.upsamplingMipmaps.push(s);for(let a=1,o=r-1;a<o;++a){const c=s.clone();c.texture.name="Upsampling.Mipmap"+a,this.upsamplingMipmaps.push(c)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(r){this.upsamplingMaterial.radius=r}render(r,s,a,o,c){const{scene:p,camera:f}=this,{downsamplingMaterial:v,upsamplingMaterial:g}=this,{downsamplingMipmaps:T,upsamplingMipmaps:d}=this;let m=s;this.fullscreenMaterial=v;for(let E=0,S=T.length;E<S;++E){const P=T[E];v.setSize(m.width,m.height),v.inputBuffer=m.texture,r.setRenderTarget(P),r.render(p,f),m=P}this.fullscreenMaterial=g;for(let E=d.length-1;E>=0;--E){const S=d[E];g.setSize(m.width,m.height),g.inputBuffer=m.texture,g.supportBuffer=T[E].texture,r.setRenderTarget(S),r.render(p,f),m=S}}setSize(r,s){const a=this.resolution;a.set(r,s);let o=a.width,c=a.height;for(let p=0,f=this.downsamplingMipmaps.length;p<f;++p)o=Math.round(o*.5),c=Math.round(c*.5),this.downsamplingMipmaps[p].setSize(o,c),p<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[p].setSize(o,c)}initialize(r,s,a){if(a!==void 0){const o=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const c of o)c.texture.type=a;if(a!==fn)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(r!==null&&r.outputColorSpace===Ze)for(const c of o)c.texture.colorSpace=Ze}}dispose(){super.dispose();for(const r of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))r.dispose()}},ih=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,max(inputColor.a,texel.a));}`,sh=class extends Ml{constructor({blendFunction:r=ce.SCREEN,luminanceThreshold:s=1,luminanceSmoothing:a=.03,mipmapBlur:o=!0,intensity:c=1,radius:p=.85,levels:f=8,kernelSize:v=Nl.LARGE,resolutionScale:g=.5,width:T=qe.AUTO_SIZE,height:d=qe.AUTO_SIZE,resolutionX:m=T,resolutionY:E=d}={}){super("BloomEffect",ih,{blendFunction:r,uniforms:new Map([["map",new ge(null)],["intensity",new ge(c)]])}),this.renderTarget=new Ht(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new Yd({kernelSize:v}),this.luminancePass=new Zd({colorOutput:!0}),this.luminanceMaterial.threshold=s,this.luminanceMaterial.smoothing=a,this.mipmapBlurPass=new rh,this.mipmapBlurPass.enabled=o,this.mipmapBlurPass.radius=p,this.mipmapBlurPass.levels=f,this.uniforms.get("map").value=o?this.mipmapBlurPass.texture:this.renderTarget.texture;const S=this.resolution=new qe(this,m,E,g);S.addEventListener("change",P=>this.setSize(S.baseWidth,S.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(r){this.resolution.preferredWidth=r}get height(){return this.resolution.height}set height(r){this.resolution.preferredHeight=r}get dithering(){return this.blurPass.dithering}set dithering(r){this.blurPass.dithering=r}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(r){this.blurPass.kernelSize=r}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(r){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(r){this.uniforms.get("intensity").value=r}getIntensity(){return this.intensity}setIntensity(r){this.intensity=r}getResolutionScale(){return this.resolution.scale}setResolutionScale(r){this.resolution.scale=r}update(r,s,a){const o=this.renderTarget,c=this.luminancePass;c.enabled?(c.render(r,s),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(r,c.renderTarget):this.blurPass.render(r,c.renderTarget,o)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(r,s):this.blurPass.render(r,s,o)}setSize(r,s){const a=this.resolution;a.setBaseSize(r,s),this.renderTarget.setSize(a.width,a.height),this.blurPass.resolution.copy(a),this.luminancePass.setSize(r,s),this.mipmapBlurPass.setSize(r,s)}initialize(r,s,a){this.blurPass.initialize(r,s,a),this.luminancePass.initialize(r,s,a),this.mipmapBlurPass.initialize(r,s,a),a!==void 0&&(this.renderTarget.texture.type=a,r!==null&&r.outputColorSpace===Ze&&(this.renderTarget.texture.colorSpace=Ze))}},Mu=class extends at{constructor(r,s,a=null){super("RenderPass",r,s),this.needsSwap=!1,this.clearPass=new Tu,this.overrideMaterialManager=a===null?null:new Ua(a),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(r){this.scene=r}set mainCamera(r){this.camera=r}get renderToScreen(){return super.renderToScreen}set renderToScreen(r){super.renderToScreen=r,this.clearPass.renderToScreen=r}get overrideMaterial(){const r=this.overrideMaterialManager;return r!==null?r.material:null}set overrideMaterial(r){const s=this.overrideMaterialManager;r!==null?s!==null?s.setMaterial(r):this.overrideMaterialManager=new Ua(r):s!==null&&(s.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(r){this.overrideMaterial=r}get clear(){return this.clearPass.enabled}set clear(r){this.clearPass.enabled=r}getSelection(){return this.selection}setSelection(r){this.selection=r}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(r){this.ignoreBackground=r}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(r){this.skipShadowMapUpdate=r}getClearPass(){return this.clearPass}render(r,s,a,o,c){const p=this.scene,f=this.camera,v=this.selection,g=f.layers.mask,T=p.background,d=r.shadowMap.autoUpdate,m=this.renderToScreen?null:s;v!==null&&f.layers.set(v.getLayer()),this.skipShadowMapUpdate&&(r.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(p.background=null),this.clearPass.enabled&&this.clearPass.render(r,s),r.setRenderTarget(m),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(r,p,f):r.render(p,f),f.layers.mask=g,p.background=T,r.shadowMap.autoUpdate=d}},lh=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,oh="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",ah=class extends dn{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new ge(null),normalBuffer:new ge(null),texelSize:new ge(new xe)},blending:Pn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:lh,vertexShader:oh})}set depthBuffer(r){this.uniforms.depthBuffer.value=r}set depthPacking(r){this.defines.DEPTH_PACKING=r.toFixed(0),this.needsUpdate=!0}setDepthBuffer(r,s=qn){this.depthBuffer=r,this.depthPacking=s}set normalBuffer(r){this.uniforms.normalBuffer.value=r,r!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(r){this.normalBuffer=r}setTexelSize(r,s){this.uniforms.texelSize.value.set(r,s)}setSize(r,s){this.uniforms.texelSize.value.set(1/r,1/s)}},uh=class extends at{constructor({normalBuffer:r=null,resolutionScale:s=.5,width:a=qe.AUTO_SIZE,height:o=qe.AUTO_SIZE,resolutionX:c=a,resolutionY:p=o}={}){super("DepthDownsamplingPass");const f=new ah;f.normalBuffer=r,this.fullscreenMaterial=f,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Ht(1,1,{minFilter:Bi,magFilter:Bi,depthBuffer:!1,type:Zc}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const v=this.resolution=new qe(this,c,p,s);v.addEventListener("change",g=>this.setSize(v.baseWidth,v.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(r,s=qn){this.fullscreenMaterial.depthBuffer=r,this.fullscreenMaterial.depthPacking=s}render(r,s,a,o,c){r.setRenderTarget(this.renderToScreen?null:this.renderTarget),r.render(this.scene,this.camera)}setSize(r,s){const a=this.resolution;a.setBaseSize(r,s),this.renderTarget.setSize(a.width,a.height),this.fullscreenMaterial.setSize(r,s)}initialize(r,s,a){const o=r.getContext();if(!(o.getExtension("EXT_color_buffer_float")||o.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},ch=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#if defined(USE_LOGARITHMIC_DEPTH_BUFFER) || defined(LOG_DEPTH)
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#elif defined(USE_REVERSED_DEPTH_BUFFER)
depth=1.0-depth;
#endif
return depth;}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,fh="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",dh=class extends dn{constructor(r,s,a,o,c=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Za.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new ge(null),depthBuffer:new ge(null),resolution:new ge(new xe),texelSize:new ge(new xe),cameraNear:new ge(.3),cameraFar:new ge(1e3),aspect:new ge(1),time:new ge(0)},blending:Pn,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:c}),r&&this.setShaderParts(r),s&&this.setDefines(s),a&&this.setUniforms(a),this.copyCameraSettings(o)}set inputBuffer(r){this.uniforms.inputBuffer.value=r}setInputBuffer(r){this.uniforms.inputBuffer.value=r}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(r){this.uniforms.depthBuffer.value=r}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(r){this.defines.DEPTH_PACKING=r.toFixed(0),this.needsUpdate=!0}setDepthBuffer(r,s=qn){this.depthBuffer=r,this.depthPacking=s}setShaderData(r){this.setShaderParts(r.shaderParts),this.setDefines(r.defines),this.setUniforms(r.uniforms),this.setExtensions(r.extensions)}setShaderParts(r){return this.fragmentShader=ch.replace(ve.FRAGMENT_HEAD,r.get(ve.FRAGMENT_HEAD)||"").replace(ve.FRAGMENT_MAIN_UV,r.get(ve.FRAGMENT_MAIN_UV)||"").replace(ve.FRAGMENT_MAIN_IMAGE,r.get(ve.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=fh.replace(ve.VERTEX_HEAD,r.get(ve.VERTEX_HEAD)||"").replace(ve.VERTEX_MAIN_SUPPORT,r.get(ve.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(r){for(const s of r.entries())this.defines[s[0]]=s[1];return this.needsUpdate=!0,this}setUniforms(r){for(const s of r.entries())this.uniforms[s[0]]=s[1];return this}setExtensions(r){this.extensions={};for(const s of r)this.extensions[s]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(r){this.encodeOutput!==r&&(r?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(r){return this.encodeOutput}setOutputEncodingEnabled(r){this.encodeOutput=r}get time(){return this.uniforms.time.value}set time(r){this.uniforms.time.value=r}setDeltaTime(r){this.uniforms.time.value+=r}adoptCameraSettings(r){this.copyCameraSettings(r)}copyCameraSettings(r){r&&(this.uniforms.cameraNear.value=r.near,this.uniforms.cameraFar.value=r.far,r instanceof Rr?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(r,s){const a=this.uniforms;a.resolution.value.set(r,s),a.texelSize.value.set(1/r,1/s),a.aspect.value=r/s}static get Section(){return ve}};function La(r,s,a){for(const o of s){const c="$1"+r+o.charAt(0).toUpperCase()+o.slice(1),p=new RegExp("([^\\.])(\\b"+o+"\\b)","g");for(const f of a.entries())f[1]!==null&&a.set(f[0],f[1].replace(p,c))}}function hh(r,s,a){let o=s.getFragmentShader(),c=s.getVertexShader();const p=o!==void 0&&/mainImage/.test(o),f=o!==void 0&&/mainUv/.test(o);if(a.attributes|=s.getAttributes(),o===void 0)throw new Error(`Missing fragment shader (${s.name})`);if(f&&a.attributes&Xt.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${s.name})`);if(!p&&!f)throw new Error(`Could not find mainImage or mainUv function (${s.name})`);{const v=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,g=a.shaderParts;let T=g.get(ve.FRAGMENT_HEAD)||"",d=g.get(ve.FRAGMENT_MAIN_UV)||"",m=g.get(ve.FRAGMENT_MAIN_IMAGE)||"",E=g.get(ve.VERTEX_HEAD)||"",S=g.get(ve.VERTEX_MAIN_SUPPORT)||"";const P=new Set,I=new Set;if(f&&(d+=`	${r}MainUv(UV);
`,a.uvTransformation=!0),c!==null&&/mainSupport/.test(c)){const _=/mainSupport *\([\w\s]*?uv\s*?\)/.test(c);S+=`	${r}MainSupport(`,S+=_?`vUv);
`:`);
`;for(const C of c.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const O of C[1].split(/\s*,\s*/))a.varyings.add(O),P.add(O),I.add(O);for(const C of c.matchAll(v))I.add(C[1])}for(const _ of o.matchAll(v))I.add(_[1]);for(const _ of s.defines.keys())I.add(_.replace(/\([\w\s,]*\)/g,""));for(const _ of s.uniforms.keys())I.add(_);I.delete("while"),I.delete("for"),I.delete("if"),s.uniforms.forEach((_,C)=>a.uniforms.set(r+C.charAt(0).toUpperCase()+C.slice(1),_)),s.defines.forEach((_,C)=>a.defines.set(r+C.charAt(0).toUpperCase()+C.slice(1),_));const k=new Map([["fragment",o],["vertex",c]]);La(r,I,a.defines),La(r,I,k),o=k.get("fragment"),c=k.get("vertex");const M=s.blendMode;if(a.blendModes.set(M.blendFunction,M),p){s.inputColorSpace!==null&&s.inputColorSpace!==a.colorSpace&&(m+=s.inputColorSpace===Ze?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),s.outputColorSpace!==Ya?a.colorSpace=s.outputColorSpace:s.inputColorSpace!==null&&(a.colorSpace=s.inputColorSpace);const _=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;m+=`${r}MainImage(color0, UV, `,a.attributes&Xt.DEPTH&&_.test(o)&&(m+="depth, ",a.readDepth=!0),m+=`color1);
	`;const C=r+"BlendOpacity";a.uniforms.set(C,M.opacity),m+=`color0 = blend${M.blendFunction}(color0, color1, ${C});

	`,T+=`uniform float ${C};

`}if(T+=o+`
`,c!==null&&(E+=c+`
`),g.set(ve.FRAGMENT_HEAD,T),g.set(ve.FRAGMENT_MAIN_UV,d),g.set(ve.FRAGMENT_MAIN_IMAGE,m),g.set(ve.VERTEX_HEAD,E),g.set(ve.VERTEX_MAIN_SUPPORT,S),s.extensions!==null)for(const _ of s.extensions)a.extensions.add(_)}}var ph=class extends at{constructor(r,...s){super("EffectPass"),this.fullscreenMaterial=new dh(null,null,null,r),this.listener=a=>this.handleEvent(a),this.effects=[],this.setEffects(s),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(r){for(const s of this.effects)s.mainScene=r}set mainCamera(r){this.fullscreenMaterial.copyCameraSettings(r);for(const s of this.effects)s.mainCamera=r}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(r){this.fullscreenMaterial.encodeOutput=r}get dithering(){return this.fullscreenMaterial.dithering}set dithering(r){const s=this.fullscreenMaterial;s.dithering=r,s.needsUpdate=!0}setEffects(r){for(const s of this.effects)s.removeEventListener("change",this.listener);this.effects=r.sort((s,a)=>a.attributes-s.attributes);for(const s of this.effects)s.addEventListener("change",this.listener)}updateMaterial(){const r=new ud;let s=0;for(const f of this.effects)if(f.blendMode.blendFunction===ce.DST)r.attributes|=f.getAttributes()&Xt.DEPTH;else{if(r.attributes&f.getAttributes()&Xt.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${f.name})`);hh("e"+s++,f,r)}let a=r.shaderParts.get(ve.FRAGMENT_HEAD),o=r.shaderParts.get(ve.FRAGMENT_MAIN_IMAGE),c=r.shaderParts.get(ve.FRAGMENT_MAIN_UV);const p=/\bblend\b/g;for(const f of r.blendModes.values())a+=f.getShaderCode().replace(p,`blend${f.blendFunction}`)+`
`;r.attributes&Xt.DEPTH?(r.readDepth&&(o=`float depth = readDepth(UV);

	`+o),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,r.colorSpace===Ze&&(o+=`color0 = sRGBToLinear(color0);
	`),r.uvTransformation?(c=`vec2 transformedUv = vUv;
`+c,r.defines.set("UV","transformedUv")):r.defines.set("UV","vUv"),r.shaderParts.set(ve.FRAGMENT_HEAD,a),r.shaderParts.set(ve.FRAGMENT_MAIN_IMAGE,o),r.shaderParts.set(ve.FRAGMENT_MAIN_UV,c);for(const[f,v]of r.shaderParts)v!==null&&r.shaderParts.set(f,v.trim().replace(/^#/,`
#`));this.skipRendering=s===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(r)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(r,s=qn){this.fullscreenMaterial.depthBuffer=r,this.fullscreenMaterial.depthPacking=s;for(const a of this.effects)a.setDepthTexture(r,s)}render(r,s,a,o,c){for(const p of this.effects)p.update(r,s,o);if(!this.skipRendering||this.renderToScreen){const p=this.fullscreenMaterial;p.inputBuffer=s.texture,p.time+=o*this.timeScale,r.setRenderTarget(this.renderToScreen?null:a),r.render(this.scene,this.camera)}}setSize(r,s){this.fullscreenMaterial.setSize(r,s);for(const a of this.effects)a.setSize(r,s)}initialize(r,s,a){this.renderer=r;for(const o of this.effects)o.initialize(r,s,a);this.updateMaterial(),a!==void 0&&a!==fn&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const r of this.effects)r.removeEventListener("change",this.listener),r.dispose()}handleEvent(r){switch(r.type){case"change":this.recompile();break}}},mh=class extends at{constructor(r,s,{renderTarget:a,resolutionScale:o=1,width:c=qe.AUTO_SIZE,height:p=qe.AUTO_SIZE,resolutionX:f=c,resolutionY:v=p}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new Mu(r,s,new Kc);const g=this.renderPass;g.ignoreBackground=!0,g.skipShadowMapUpdate=!0;const T=g.getClearPass();T.overrideClearColor=new Fe(7829503),T.overrideClearAlpha=1,this.renderTarget=a,this.renderTarget===void 0&&(this.renderTarget=new Ht(1,1,{minFilter:Bi,magFilter:Bi}),this.renderTarget.texture.name="NormalPass.Target");const d=this.resolution=new qe(this,f,v,o);d.addEventListener("change",m=>this.setSize(d.baseWidth,d.baseHeight))}set mainScene(r){this.renderPass.mainScene=r}set mainCamera(r){this.renderPass.mainCamera=r}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(r){this.resolution.scale=r}render(r,s,a,o,c){const p=this.renderToScreen?null:this.renderTarget;this.renderPass.render(r,p,p)}setSize(r,s){const a=this.resolution;a.setBaseSize(r,s),this.renderTarget.setSize(a.width,a.height)}};let _r;function vh(){var r;if(_r!==void 0)return _r;try{let s;const a=document.createElement("canvas");return _r=!!(window.WebGL2RenderingContext&&(s=a.getContext("webgl2"))),s&&((r=s.getExtension("WEBGL_lose_context"))==null||r.loseContext()),_r}catch{return _r=!1}}var gh=Object.defineProperty,yh=(r,s,a)=>s in r?gh(r,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[s]=a,xh=(r,s,a)=>(yh(r,s+"",a),a);class Sh{constructor(){xh(this,"_listeners")}addEventListener(s,a){this._listeners===void 0&&(this._listeners={});const o=this._listeners;o[s]===void 0&&(o[s]=[]),o[s].indexOf(a)===-1&&o[s].push(a)}hasEventListener(s,a){if(this._listeners===void 0)return!1;const o=this._listeners;return o[s]!==void 0&&o[s].indexOf(a)!==-1}removeEventListener(s,a){if(this._listeners===void 0)return;const c=this._listeners[s];if(c!==void 0){const p=c.indexOf(a);p!==-1&&c.splice(p,1)}}dispatchEvent(s){if(this._listeners===void 0)return;const o=this._listeners[s.type];if(o!==void 0){s.target=this;const c=o.slice(0);for(let p=0,f=c.length;p<f;p++)c[p].call(this,s);s.target=null}}}var Eh=Object.defineProperty,wh=(r,s,a)=>s in r?Eh(r,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[s]=a,ne=(r,s,a)=>(wh(r,typeof s!="symbol"?s+"":s,a),a);const Oi=new tf,Ba=new nf,Th=Math.cos(70*(Math.PI/180)),Fa=(r,s)=>(r%s+s)%s;let Mh=class extends Sh{constructor(s,a){super(),ne(this,"object"),ne(this,"domElement"),ne(this,"enabled",!0),ne(this,"target",new be),ne(this,"minDistance",0),ne(this,"maxDistance",1/0),ne(this,"minZoom",0),ne(this,"maxZoom",1/0),ne(this,"minPolarAngle",0),ne(this,"maxPolarAngle",Math.PI),ne(this,"minAzimuthAngle",-1/0),ne(this,"maxAzimuthAngle",1/0),ne(this,"enableDamping",!1),ne(this,"dampingFactor",.05),ne(this,"enableZoom",!0),ne(this,"zoomSpeed",1),ne(this,"enableRotate",!0),ne(this,"rotateSpeed",1),ne(this,"enablePan",!0),ne(this,"panSpeed",1),ne(this,"screenSpacePanning",!0),ne(this,"keyPanSpeed",7),ne(this,"zoomToCursor",!1),ne(this,"autoRotate",!1),ne(this,"autoRotateSpeed",2),ne(this,"reverseOrbit",!1),ne(this,"reverseHorizontalOrbit",!1),ne(this,"reverseVerticalOrbit",!1),ne(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),ne(this,"mouseButtons",{LEFT:Gn.ROTATE,MIDDLE:Gn.DOLLY,RIGHT:Gn.PAN}),ne(this,"touches",{ONE:Wn.ROTATE,TWO:Wn.DOLLY_PAN}),ne(this,"target0"),ne(this,"position0"),ne(this,"zoom0"),ne(this,"_domElementKeyEvents",null),ne(this,"getPolarAngle"),ne(this,"getAzimuthalAngle"),ne(this,"setPolarAngle"),ne(this,"setAzimuthalAngle"),ne(this,"getDistance"),ne(this,"getZoomScale"),ne(this,"listenToKeyEvents"),ne(this,"stopListenToKeyEvents"),ne(this,"saveState"),ne(this,"reset"),ne(this,"update"),ne(this,"connect"),ne(this,"dispose"),ne(this,"dollyIn"),ne(this,"dollyOut"),ne(this,"getScale"),ne(this,"setScale"),this.object=s,this.domElement=a,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=w=>{let W=Fa(w,2*Math.PI),re=d.phi;re<0&&(re+=2*Math.PI),W<0&&(W+=2*Math.PI);let de=Math.abs(W-re);2*Math.PI-de<de&&(W<re?W+=2*Math.PI:re+=2*Math.PI),m.phi=W-re,o.update()},this.setAzimuthalAngle=w=>{let W=Fa(w,2*Math.PI),re=d.theta;re<0&&(re+=2*Math.PI),W<0&&(W+=2*Math.PI);let de=Math.abs(W-re);2*Math.PI-de<de&&(W<re?W+=2*Math.PI:re+=2*Math.PI),m.theta=W-re,o.update()},this.getDistance=()=>o.object.position.distanceTo(o.target),this.listenToKeyEvents=w=>{w.addEventListener("keydown",$n),this._domElementKeyEvents=w},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",$n),this._domElementKeyEvents=null},this.saveState=()=>{o.target0.copy(o.target),o.position0.copy(o.object.position),o.zoom0=o.object.zoom},this.reset=()=>{o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.zoom=o.zoom0,o.object.updateProjectionMatrix(),o.dispatchEvent(c),o.update(),g=v.NONE},this.update=(()=>{const w=new be,W=new be(0,1,0),re=new ya().setFromUnitVectors(s.up,W),de=re.clone().invert(),Ie=new be,Mt=new ya,kt=2*Math.PI;return function(){const tr=o.object.position;re.setFromUnitVectors(s.up,W),de.copy(re).invert(),w.copy(tr).sub(o.target),w.applyQuaternion(re),d.setFromVector3(w),o.autoRotate&&g===v.NONE&&ze($()),o.enableDamping?(d.theta+=m.theta*o.dampingFactor,d.phi+=m.phi*o.dampingFactor):(d.theta+=m.theta,d.phi+=m.phi);let pt=o.minAzimuthAngle,_t=o.maxAzimuthAngle;isFinite(pt)&&isFinite(_t)&&(pt<-Math.PI?pt+=kt:pt>Math.PI&&(pt-=kt),_t<-Math.PI?_t+=kt:_t>Math.PI&&(_t-=kt),pt<=_t?d.theta=Math.max(pt,Math.min(_t,d.theta)):d.theta=d.theta>(pt+_t)/2?Math.max(pt,d.theta):Math.min(_t,d.theta)),d.phi=Math.max(o.minPolarAngle,Math.min(o.maxPolarAngle,d.phi)),d.makeSafe(),o.enableDamping===!0?o.target.addScaledVector(S,o.dampingFactor):o.target.add(S),o.zoomToCursor&&F||o.object.isOrthographicCamera?d.radius=fe(d.radius):d.radius=fe(d.radius*E),w.setFromSpherical(d),w.applyQuaternion(de),tr.copy(o.target).add(w),o.object.matrixAutoUpdate||o.object.updateMatrix(),o.object.lookAt(o.target),o.enableDamping===!0?(m.theta*=1-o.dampingFactor,m.phi*=1-o.dampingFactor,S.multiplyScalar(1-o.dampingFactor)):(m.set(0,0,0),S.set(0,0,0));let Zt=!1;if(o.zoomToCursor&&F){let qt=null;if(o.object instanceof Rr&&o.object.isPerspectiveCamera){const Jt=w.length();qt=fe(Jt*E);const Cn=Jt-qt;o.object.position.addScaledVector(X,Cn),o.object.updateMatrixWorld()}else if(o.object.isOrthographicCamera){const Jt=new be(G.x,G.y,0);Jt.unproject(o.object),o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/E)),o.object.updateProjectionMatrix(),Zt=!0;const Cn=new be(G.x,G.y,0);Cn.unproject(o.object),o.object.position.sub(Cn).add(Jt),o.object.updateMatrixWorld(),qt=w.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),o.zoomToCursor=!1;qt!==null&&(o.screenSpacePanning?o.target.set(0,0,-1).transformDirection(o.object.matrix).multiplyScalar(qt).add(o.object.position):(Oi.origin.copy(o.object.position),Oi.direction.set(0,0,-1).transformDirection(o.object.matrix),Math.abs(o.object.up.dot(Oi.direction))<Th?s.lookAt(o.target):(Ba.setFromNormalAndCoplanarPoint(o.object.up,o.target),Oi.intersectPlane(Ba,o.target))))}else o.object instanceof Pr&&o.object.isOrthographicCamera&&(Zt=E!==1,Zt&&(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/E)),o.object.updateProjectionMatrix()));return E=1,F=!1,Zt||Ie.distanceToSquared(o.object.position)>T||8*(1-Mt.dot(o.object.quaternion))>T?(o.dispatchEvent(c),Ie.copy(o.object.position),Mt.copy(o.object.quaternion),Zt=!1,!0):!1}})(),this.connect=w=>{o.domElement=w,o.domElement.style.touchAction="none",o.domElement.addEventListener("contextmenu",Or),o.domElement.addEventListener("pointerdown",Dr),o.domElement.addEventListener("pointercancel",Tt),o.domElement.addEventListener("wheel",Ar)},this.dispose=()=>{var w,W,re,de,Ie,Mt;o.domElement&&(o.domElement.style.touchAction="auto"),(w=o.domElement)==null||w.removeEventListener("contextmenu",Or),(W=o.domElement)==null||W.removeEventListener("pointerdown",Dr),(re=o.domElement)==null||re.removeEventListener("pointercancel",Tt),(de=o.domElement)==null||de.removeEventListener("wheel",Ar),(Ie=o.domElement)==null||Ie.ownerDocument.removeEventListener("pointermove",Jn),(Mt=o.domElement)==null||Mt.ownerDocument.removeEventListener("pointerup",Tt),o._domElementKeyEvents!==null&&o._domElementKeyEvents.removeEventListener("keydown",$n)};const o=this,c={type:"change"},p={type:"start"},f={type:"end"},v={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let g=v.NONE;const T=1e-6,d=new ga,m=new ga;let E=1;const S=new be,P=new xe,I=new xe,k=new xe,M=new xe,_=new xe,C=new xe,O=new xe,A=new xe,U=new xe,X=new be,G=new xe;let F=!1;const L=[],H={};function $(){return 2*Math.PI/60/60*o.autoRotateSpeed}function le(){return Math.pow(.95,o.zoomSpeed)}function ze(w){o.reverseOrbit||o.reverseHorizontalOrbit?m.theta+=w:m.theta-=w}function Ne(w){o.reverseOrbit||o.reverseVerticalOrbit?m.phi+=w:m.phi-=w}const Te=(()=>{const w=new be;return function(re,de){w.setFromMatrixColumn(de,0),w.multiplyScalar(-re),S.add(w)}})(),He=(()=>{const w=new be;return function(re,de){o.screenSpacePanning===!0?w.setFromMatrixColumn(de,1):(w.setFromMatrixColumn(de,0),w.crossVectors(o.object.up,w)),w.multiplyScalar(re),S.add(w)}})(),j=(()=>{const w=new be;return function(re,de){const Ie=o.domElement;if(Ie&&o.object instanceof Rr&&o.object.isPerspectiveCamera){const Mt=o.object.position;w.copy(Mt).sub(o.target);let kt=w.length();kt*=Math.tan(o.object.fov/2*Math.PI/180),Te(2*re*kt/Ie.clientHeight,o.object.matrix),He(2*de*kt/Ie.clientHeight,o.object.matrix)}else Ie&&o.object instanceof Pr&&o.object.isOrthographicCamera?(Te(re*(o.object.right-o.object.left)/o.object.zoom/Ie.clientWidth,o.object.matrix),He(de*(o.object.top-o.object.bottom)/o.object.zoom/Ie.clientHeight,o.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),o.enablePan=!1)}})();function Z(w){o.object instanceof Rr&&o.object.isPerspectiveCamera||o.object instanceof Pr&&o.object.isOrthographicCamera?E=w:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function Y(w){Z(E/w)}function ee(w){Z(E*w)}function ue(w){if(!o.zoomToCursor||!o.domElement)return;F=!0;const W=o.domElement.getBoundingClientRect(),re=w.clientX-W.left,de=w.clientY-W.top,Ie=W.width,Mt=W.height;G.x=re/Ie*2-1,G.y=-(de/Mt)*2+1,X.set(G.x,G.y,1).unproject(o.object).sub(o.object.position).normalize()}function fe(w){return Math.max(o.minDistance,Math.min(o.maxDistance,w))}function ke(w){P.set(w.clientX,w.clientY)}function Ge(w){ue(w),O.set(w.clientX,w.clientY)}function $e(w){M.set(w.clientX,w.clientY)}function et(w){I.set(w.clientX,w.clientY),k.subVectors(I,P).multiplyScalar(o.rotateSpeed);const W=o.domElement;W&&(ze(2*Math.PI*k.x/W.clientHeight),Ne(2*Math.PI*k.y/W.clientHeight)),P.copy(I),o.update()}function jt(w){A.set(w.clientX,w.clientY),U.subVectors(A,O),U.y>0?Y(le()):U.y<0&&ee(le()),O.copy(A),o.update()}function Nt(w){_.set(w.clientX,w.clientY),C.subVectors(_,M).multiplyScalar(o.panSpeed),j(C.x,C.y),M.copy(_),o.update()}function Kt(w){ue(w),w.deltaY<0?ee(le()):w.deltaY>0&&Y(le()),o.update()}function ut(w){let W=!1;switch(w.code){case o.keys.UP:j(0,o.keyPanSpeed),W=!0;break;case o.keys.BOTTOM:j(0,-o.keyPanSpeed),W=!0;break;case o.keys.LEFT:j(o.keyPanSpeed,0),W=!0;break;case o.keys.RIGHT:j(-o.keyPanSpeed,0),W=!0;break}W&&(w.preventDefault(),o.update())}function hn(){if(L.length==1)P.set(L[0].pageX,L[0].pageY);else{const w=.5*(L[0].pageX+L[1].pageX),W=.5*(L[0].pageY+L[1].pageY);P.set(w,W)}}function We(){if(L.length==1)M.set(L[0].pageX,L[0].pageY);else{const w=.5*(L[0].pageX+L[1].pageX),W=.5*(L[0].pageY+L[1].pageY);M.set(w,W)}}function zr(){const w=L[0].pageX-L[1].pageX,W=L[0].pageY-L[1].pageY,re=Math.sqrt(w*w+W*W);O.set(0,re)}function ji(){o.enableZoom&&zr(),o.enablePan&&We()}function bi(){o.enableZoom&&zr(),o.enableRotate&&hn()}function Nr(w){if(L.length==1)I.set(w.pageX,w.pageY);else{const re=er(w),de=.5*(w.pageX+re.x),Ie=.5*(w.pageY+re.y);I.set(de,Ie)}k.subVectors(I,P).multiplyScalar(o.rotateSpeed);const W=o.domElement;W&&(ze(2*Math.PI*k.x/W.clientHeight),Ne(2*Math.PI*k.y/W.clientHeight)),P.copy(I)}function kr(w){if(L.length==1)_.set(w.pageX,w.pageY);else{const W=er(w),re=.5*(w.pageX+W.x),de=.5*(w.pageY+W.y);_.set(re,de)}C.subVectors(_,M).multiplyScalar(o.panSpeed),j(C.x,C.y),M.copy(_)}function Ir(w){const W=er(w),re=w.pageX-W.x,de=w.pageY-W.y,Ie=Math.sqrt(re*re+de*de);A.set(0,Ie),U.set(0,Math.pow(A.y/O.y,o.zoomSpeed)),Y(U.y),O.copy(A)}function pn(w){o.enableZoom&&Ir(w),o.enablePan&&kr(w)}function Gi(w){o.enableZoom&&Ir(w),o.enableRotate&&Nr(w)}function Dr(w){var W,re;o.enabled!==!1&&(L.length===0&&((W=o.domElement)==null||W.ownerDocument.addEventListener("pointermove",Jn),(re=o.domElement)==null||re.ownerDocument.addEventListener("pointerup",Tt)),Xi(w),w.pointerType==="touch"?Qi(w):Wi(w))}function Jn(w){o.enabled!==!1&&(w.pointerType==="touch"?Yi(w):Vi(w))}function Tt(w){var W,re,de;Ki(w),L.length===0&&((W=o.domElement)==null||W.releasePointerCapture(w.pointerId),(re=o.domElement)==null||re.ownerDocument.removeEventListener("pointermove",Jn),(de=o.domElement)==null||de.ownerDocument.removeEventListener("pointerup",Tt)),o.dispatchEvent(f),g=v.NONE}function Wi(w){let W;switch(w.button){case 0:W=o.mouseButtons.LEFT;break;case 1:W=o.mouseButtons.MIDDLE;break;case 2:W=o.mouseButtons.RIGHT;break;default:W=-1}switch(W){case Gn.DOLLY:if(o.enableZoom===!1)return;Ge(w),g=v.DOLLY;break;case Gn.ROTATE:if(w.ctrlKey||w.metaKey||w.shiftKey){if(o.enablePan===!1)return;$e(w),g=v.PAN}else{if(o.enableRotate===!1)return;ke(w),g=v.ROTATE}break;case Gn.PAN:if(w.ctrlKey||w.metaKey||w.shiftKey){if(o.enableRotate===!1)return;ke(w),g=v.ROTATE}else{if(o.enablePan===!1)return;$e(w),g=v.PAN}break;default:g=v.NONE}g!==v.NONE&&o.dispatchEvent(p)}function Vi(w){if(o.enabled!==!1)switch(g){case v.ROTATE:if(o.enableRotate===!1)return;et(w);break;case v.DOLLY:if(o.enableZoom===!1)return;jt(w);break;case v.PAN:if(o.enablePan===!1)return;Nt(w);break}}function Ar(w){o.enabled===!1||o.enableZoom===!1||g!==v.NONE&&g!==v.ROTATE||(w.preventDefault(),o.dispatchEvent(p),Kt(w),o.dispatchEvent(f))}function $n(w){o.enabled===!1||o.enablePan===!1||ut(w)}function Qi(w){switch(Ur(w),L.length){case 1:switch(o.touches.ONE){case Wn.ROTATE:if(o.enableRotate===!1)return;hn(),g=v.TOUCH_ROTATE;break;case Wn.PAN:if(o.enablePan===!1)return;We(),g=v.TOUCH_PAN;break;default:g=v.NONE}break;case 2:switch(o.touches.TWO){case Wn.DOLLY_PAN:if(o.enableZoom===!1&&o.enablePan===!1)return;ji(),g=v.TOUCH_DOLLY_PAN;break;case Wn.DOLLY_ROTATE:if(o.enableZoom===!1&&o.enableRotate===!1)return;bi(),g=v.TOUCH_DOLLY_ROTATE;break;default:g=v.NONE}break;default:g=v.NONE}g!==v.NONE&&o.dispatchEvent(p)}function Yi(w){switch(Ur(w),g){case v.TOUCH_ROTATE:if(o.enableRotate===!1)return;Nr(w),o.update();break;case v.TOUCH_PAN:if(o.enablePan===!1)return;kr(w),o.update();break;case v.TOUCH_DOLLY_PAN:if(o.enableZoom===!1&&o.enablePan===!1)return;pn(w),o.update();break;case v.TOUCH_DOLLY_ROTATE:if(o.enableZoom===!1&&o.enableRotate===!1)return;Gi(w),o.update();break;default:g=v.NONE}}function Or(w){o.enabled!==!1&&w.preventDefault()}function Xi(w){L.push(w)}function Ki(w){delete H[w.pointerId];for(let W=0;W<L.length;W++)if(L[W].pointerId==w.pointerId){L.splice(W,1);return}}function Ur(w){let W=H[w.pointerId];W===void 0&&(W=new xe,H[w.pointerId]=W),W.set(w.pageX,w.pageY)}function er(w){const W=w.pointerId===L[0].pointerId?L[1]:L[0];return H[W.pointerId]}this.dollyIn=(w=le())=>{ee(w),o.update()},this.dollyOut=(w=le())=>{Y(w),o.update()},this.getScale=()=>E,this.setScale=w=>{Z(w),o.update()},this.getZoomScale=()=>le(),a!==void 0&&this.connect(a),this.update()}};const _h=B.createContext(null),Ha=r=>(r.getAttributes()&Xt.CONVOLUTION)===Xt.CONVOLUTION,Ph=yl.memo(B.forwardRef(({children:r,camera:s,scene:a,resolutionScale:o,enabled:c=!0,renderPriority:p=1,autoClear:f=!0,depthBuffer:v,enableNormalPass:g,stencilBuffer:T,multisampling:d=8,frameBufferType:m=rf},E)=>{const{gl:S,scene:P,camera:I,size:k}=Ft(),M=a||P,_=s||I,[C,O,A]=B.useMemo(()=>{const G=vh(),F=new ad(S,{depthBuffer:v,stencilBuffer:T,multisampling:d>0&&G?d:0,frameBufferType:m});F.addPass(new Mu(M,_));let L=null,H=null;return g&&(H=new mh(M,_),H.enabled=!1,F.addPass(H),o!==void 0&&G&&(L=new uh({normalBuffer:H.texture,resolutionScale:o}),L.enabled=!1,F.addPass(L))),[F,H,L]},[_,S,v,T,d,m,M,g,o]);B.useEffect(()=>C==null?void 0:C.setSize(k.width,k.height),[C,k]),Cl((G,F)=>{if(c){const L=S.autoClear;S.autoClear=f,T&&!f&&S.clearStencil(),C.render(F),S.autoClear=L}},c?p:0);const U=B.useRef(null);B.useLayoutEffect(()=>{var G;const F=[],L=(G=U.current)==null?void 0:G.__r3f;if(L&&C){const H=L.objects;for(let $=0;$<H.length;$++){const le=H[$];if(le instanceof Ml){const ze=[le];if(!Ha(le)){let Te=null;for(;(Te=H[$+1])instanceof Ml&&!Ha(Te);)ze.push(Te),$++}const Ne=new ph(_,...ze);F.push(Ne)}else le instanceof at&&F.push(le)}for(const $ of F)C==null||C.addPass($);O&&(O.enabled=!0),A&&(A.enabled=!0)}return()=>{for(const H of F)C==null||C.removePass(H);O&&(O.enabled=!1),A&&(A.enabled=!1)}},[C,r,_,O,A]),B.useEffect(()=>{const G=S.toneMapping;return S.toneMapping=Va,()=>{S.toneMapping=G}},[S]);const X=B.useMemo(()=>({composer:C,normalPass:O,downSamplingPass:A,resolutionScale:o,camera:_,scene:M}),[C,O,A,o,_,M]);return B.useImperativeHandle(E,()=>C,[C]),D.jsx(_h.Provider,{value:X,children:D.jsx("group",{ref:U,children:r})})}));let Rh=0;const ja=new WeakMap,Ch=(r,s)=>yl.forwardRef(function({blendFunction:o=s==null?void 0:s.blendFunction,opacity:c=s==null?void 0:s.opacity,...p},f){let v=ja.get(r);if(!v){const d=`@react-three/postprocessing/${r.name}-${Rh++}`;iu({[d]:r}),ja.set(r,v=d)}const g=Ft(d=>d.camera),T=yl.useMemo(()=>{var d,m;return[...(d=s==null?void 0:s.args)!=null?d:[],...(m=p.args)!=null?m:[{...s,...p}]]},[JSON.stringify(p)]);return D.jsx(v,{camera:g,"blendMode-blendFunction":o,"blendMode-opacity-value":c,...p,ref:f,args:T})}),zh=Ch(sh,{blendFunction:ce.ADD});function _l(){return _l=Object.assign?Object.assign.bind():function(r){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var o in a)({}).hasOwnProperty.call(a,o)&&(r[o]=a[o])}return r},_l.apply(null,arguments)}const Nh=B.forwardRef(({makeDefault:r,camera:s,regress:a,domElement:o,enableDamping:c=!0,keyEvents:p=!1,onChange:f,onStart:v,onEnd:g,...T},d)=>{const m=Ft(U=>U.invalidate),E=Ft(U=>U.camera),S=Ft(U=>U.gl),P=Ft(U=>U.events),I=Ft(U=>U.setEvents),k=Ft(U=>U.set),M=Ft(U=>U.get),_=Ft(U=>U.performance),C=s||E,O=o||P.connected||S.domElement,A=B.useMemo(()=>new Mh(C),[C]);return Cl(()=>{A.enabled&&A.update()},-1),B.useEffect(()=>(p&&A.connect(p===!0?O:p),A.connect(O),()=>void A.dispose()),[p,O,a,A,m]),B.useEffect(()=>{const U=F=>{m(),a&&_.regress(),f&&f(F)},X=F=>{v&&v(F)},G=F=>{g&&g(F)};return A.addEventListener("change",U),A.addEventListener("start",X),A.addEventListener("end",G),()=>{A.removeEventListener("start",X),A.removeEventListener("end",G),A.removeEventListener("change",U)}},[f,v,g,A,m,I]),B.useEffect(()=>{if(r){const U=M().controls;return k({controls:A}),()=>k({controls:U})}},[r,A]),B.createElement("primitive",_l({ref:d,object:A,enableDamping:c},T))});var Re=(r=>(r.TREE="Tree",r.HEART="Heart",r.STAR="Star",r.SPHERE="Firework",r.CUBE="Present Box",r))(Re||{});const zt=8e3,kh=45,Ih=[0,0,15],Dh={[Re.TREE]:{color:"#2f5a2f",highlight:"#ffd700"},[Re.HEART]:{color:"#e63946",highlight:"#ffadad"},[Re.STAR]:{color:"#ffd700",highlight:"#ffffff"},[Re.SPHERE]:{color:"#4cc9f0",highlight:"#ffffff"},[Re.CUBE]:{color:"#c1121f",highlight:"#fdf0d5"}},Ah="#2f5a2f";function Oh(r){const s=Math.random(),a=Math.random(),o=2*Math.PI*s,c=Math.acos(2*a-1),p=r*Math.sin(c)*Math.cos(o),f=r*Math.sin(c)*Math.sin(o),v=r*Math.cos(c);return new be(p,f,v)}const ba=(r,s,a="CHRISTMAS")=>{const c=document.createElement("canvas");c.width=1024,c.height=1024;const p=c.getContext("2d"),f=new Float32Array(s*3),v=new Float32Array(s*3);if(!p)return{positions:f,colors:v};p.fillStyle="#000000",p.fillRect(0,0,1024,1024),p.fillStyle="#ffffff",a==="ROMANTIC"?p.font='400 180px "Brush Script MT", "Lucida Calligraphy", "Segoe Script", "Apple Chancery", cursive':p.font='italic 700 160px "Times New Roman", serif',p.textAlign="center",p.textBaseline="middle";const g=r.split(`
`),T=180,d=g.length*T,m=1024/2-d/2+T/2;g.forEach((I,k)=>{p.fillText(I,1024/2,m+k*T)});const S=p.getImageData(0,0,1024,1024).data,P=[];for(let I=0;I<S.length;I+=4)S[I]>50&&P.push(I/4);for(let I=0;I<s;I++){const k=I*3;if(P.length===0){f[k]=(Math.random()-.5)*10,f[k+1]=(Math.random()-.5)*10,f[k+2]=(Math.random()-.5)*10;continue}const M=P[Math.floor(Math.random()*P.length)],_=M%1024,C=Math.floor(M/1024),O=(_/1024-.5)*22,A=-(C/1024-.5)*22,U=(Math.random()-.5)*1.5;f[k]=O,f[k+1]=A,f[k+2]=U;const X=Math.random();let G;if(a==="ROMANTIC"){const F=new Fe("#ff1493"),L=new Fe("#ffb7b2"),H=new Fe("#e63946"),$=new Fe("#ffffff");X>.8?G=$:X>.5?G=L:X>.2?G=F:G=H}else{const F=new Fe("#c1121f"),L=new Fe("#2f5a2f"),H=new Fe("#ffd700"),$=new Fe("#ffffff");X>.7?G=H:X>.4?G=F:X>.15?G=L:G=$}v[k]=G.r,v[k+1]=G.g,v[k+2]=G.b}return{positions:f,colors:v}},Uh=(r,s,a)=>{const o=new Float32Array(s*3),c=new Float32Array(s*3),p=new be,f=new Fe(a),v=new Fe;for(let g=0;g<s;g++){const T=g*3;switch(r){case Re.TREE:const d=Math.random();if(d>.98){const A=Math.random()*1.5,U=Math.random()*Math.PI*2,X=Math.acos(2*Math.random()-1);p.set(A*Math.sin(X)*Math.cos(U),5.5+A*Math.sin(X)*Math.sin(U)*.5,A*Math.cos(X)),v.setHex(16768256).lerp(new Fe(16777215),Math.random()*.5)}else if(d>.88){const U=Math.random()*10-5,F=(1-(U+5)/10)*4.2,L=U*5+Math.PI*2*(g%3)/3;p.set(Math.cos(L)*F,U,Math.sin(L)*F);const H=Math.random();H>.6?v.setHex(16711680):H>.3?v.setHex(16766720):v.setHex(12632256)}else{const U=Math.random()*10-5,F=(1-(U+5)/10)*4,L=Math.sqrt(Math.random())*F,H=Math.random()*Math.PI*2;p.set(Math.cos(H)*L,U,Math.sin(H)*L),v.setHex(3103279).lerp(new Fe(1717018),Math.random())}break;case Re.HEART:let m=0,E=0,S=0,P=0;for(;P++<100;){m=(Math.random()*2-1)*3,E=(Math.random()*2-1)*3,S=(Math.random()*2-1)*3;const A=m*m+9/4*E*E+S*S-1;if(A*A*A-m*m*S*S*S-9/80*E*E*S*S*S<0)break}p.set(m*4,E*4,S*4);const I=Math.sqrt(m*m+E*E+S*S);v.copy(f).lerp(new Fe(16758706),I/4);break;case Re.STAR:const k=5,M=Math.floor(Math.random()*k)*(Math.PI*2/k),_=Math.pow(Math.random(),.5)*5,C=1.5-_/5;p.set(Math.cos(M)*_+(Math.random()-.5)*C,(Math.random()-.5)*C*2,Math.sin(M)*_+(Math.random()-.5)*C),v.copy(f).lerp(new Fe(16777215),Math.random()*.5);break;case Re.SPHERE:p.copy(Oh(4.5*Math.cbrt(Math.random()))),v.setHSL(Math.random(),1,.6);break;case Re.CUBE:const O=6;p.set((Math.random()-.5)*O,(Math.random()-.5)*O,(Math.random()-.5)*O),v.copy(f);break;default:p.set(0,0,0),v.copy(f)}o[T]=p.x,o[T+1]=p.y,o[T+2]=p.z,c[T]=v.r,c[T+1]=v.g,c[T+2]=v.b}return{positions:o,colors:c}},Lh={uniforms:{uTime:{value:0},uGlobalColor:{value:new Fe("#ffffff")},uExpansion:{value:1},uScatter:{value:0},uNoiseAmp:{value:.1},uPointSize:{value:3},uPixelRatio:{value:typeof window<"u"?window.devicePixelRatio:2}},vertexShader:`
    uniform float uTime;
    uniform float uExpansion;
    uniform float uScatter;
    uniform float uNoiseAmp; 
    uniform float uPointSize;
    uniform float uPixelRatio;
    
    attribute float aRandom;
    attribute vec3 aRandomPos; // The "Scattered" position for this particle
    attribute vec3 color; 
    
    varying vec3 vColor;
    varying float vAlpha;

    void main() {
      vColor = color;
      
      // Gentle twinkle
      float twinkleSpeed = 3.0 + (uScatter * 10.0); // Sparkle faster when scattered
      float twinkle = sin(uTime * twinkleSpeed + aRandom * 100.0) * 0.5 + 0.5;
      
      // 1. Calculate Shape Position (with Expansion/Contraction)
      vec3 shapePos = position * uExpansion;
      
      // 2. Add organic noise to shape
      float actualNoise = uNoiseAmp * (1.0 - uScatter);
      
      // Reduce noise frequency for cleaner text/shapes
      float noiseFreq = 0.5;
      shapePos.x += sin(uTime + position.y * noiseFreq) * actualNoise;
      shapePos.z += cos(uTime + position.x * noiseFreq) * actualNoise;

      // 3. Calculate Scattered Position
      vec3 scatteredPos = aRandomPos;
      // Add subtle floating movement to scattered particles
      scatteredPos.y += sin(uTime + aRandom * 10.0) * 0.2; 
      scatteredPos.x += cos(uTime * 0.5 + aRandom * 10.0) * 0.2;

      // 4. Mix based on uScatter
      // Use smoothstep for a snappier transition feel
      float mixFactor = smoothstep(0.0, 1.0, uScatter);
      vec3 finalPos = mix(shapePos, scatteredPos, mixFactor);
      
      vec4 mvPosition = modelViewMatrix * vec4(finalPos, 1.0);
      gl_Position = projectionMatrix * mvPosition;
      
      // Size calculation
      float sizeMult = 1.0;
      // Make Gold/Red particles slightly larger (ornaments)
      if (color.r > 0.8 && color.g < 0.2) sizeMult = 1.5; 
      
      // When scattered (Open Hand), boost size to look like floating diamonds
      float scatterSizeMod = mix(1.0, 1.3, mixFactor);
      
      gl_PointSize = (uPointSize * sizeMult * scatterSizeMod + twinkle * 2.0) * uPixelRatio * (10.0 / -mvPosition.z);
      
      // Alpha Fade at edges of camera
      vAlpha = smoothstep(60.0, 40.0, -mvPosition.z); 
    }
  `,fragmentShader:`
    varying vec3 vColor;
    varying float vAlpha;
    uniform vec3 uGlobalColor;

    void main() {
      vec2 center = gl_PointCoord - 0.5;
      float dist = length(center);
      if (dist > 0.5) discard;
      
      // Crystal/Diamond like glow
      float glow = 1.0 - (dist * 2.0);
      glow = pow(glow, 2.0); // Sharper glow for jewelry look
      
      // Add white core to make it look shiny
      vec3 finalColor = mix(vColor, vec3(1.0), glow * 0.5);
      
      gl_FragColor = vec4(finalColor + (glow * 0.3), vAlpha * glow);
    }
  `,transparent:!0,depthWrite:!1,blending:sf},Bh=({shape:r,color:s,gestureState:a})=>{const o=B.useRef(null),c=B.useRef(null),p=B.useRef(null),[f,v]=B.useState("TREE");B.useEffect(()=>{if(r!==Re.TREE&&r!==Re.HEART){f==="TEXT"&&v("TREE");return}a.gesture==="VICTORY"?v("TEXT"):v("TREE")},[a.gesture,r]);const g=B.useMemo(()=>{if(f==="TEXT"){if(r===Re.TREE)return ba(`Merry
Christmas`,zt,"CHRISTMAS");if(r===Re.HEART)return ba(`Love
You`,zt,"ROMANTIC")}return Uh(r,zt,s)},[r,s,f]),T=B.useMemo(()=>new Float32Array(g.positions),[]),d=B.useMemo(()=>new Float32Array(g.colors),[]),{randoms:m,randomPositions:E}=B.useMemo(()=>{const S=new Float32Array(zt),P=new Float32Array(zt*3);for(let I=0;I<zt;I++)S[I]=Math.random(),P[I*3]=(Math.random()-.5)*35,P[I*3+1]=(Math.random()-.5)*35,P[I*3+2]=(Math.random()-.5)*20;return{randoms:S,randomPositions:P}},[]);return Cl((S,P)=>{if(!o.current||!c.current||!p.current)return;const I=p.current.uniforms;let k=1,M=0,_=.1;a.gesture==="CLOSED"?(k=.6,M=0,_=.01):a.gesture==="OPEN"?(k=2,M=1,_=.2):a.gesture==="VICTORY"?(k=1.2,M=0,_=.02):(k=1,M=0,_=.08);const C=P*3.5;if(I.uExpansion.value=_n.lerp(I.uExpansion.value,k,C),I.uScatter.value=_n.lerp(I.uScatter.value,M,C),I.uNoiseAmp.value=_n.lerp(I.uNoiseAmp.value,_,C),a.isHandDetected){if(a.gesture==="OPEN"){const G=a.rotation*Math.PI*2;o.current.rotation.y=_n.lerp(o.current.rotation.y,G,P*2)}if(a.gesture==="POINTING"){const G=a.pitch*Math.PI;o.current.rotation.x=_n.lerp(o.current.rotation.x,G,P*2)}else o.current.rotation.x=_n.lerp(o.current.rotation.x,0,P*2)}else o.current.rotation.y+=P*.15,o.current.rotation.x=_n.lerp(o.current.rotation.x,0,P);const O=c.current.attributes.position.array,A=c.current.attributes.color.array,U=P*4,X=P*3;for(let G=0;G<zt;G++){const F=G*3;O[F]+=(g.positions[F]-O[F])*U,O[F+1]+=(g.positions[F+1]-O[F+1])*U,O[F+2]+=(g.positions[F+2]-O[F+2])*U,A[F]+=(g.colors[F]-A[F])*X,A[F+1]+=(g.colors[F+1]-A[F+1])*X,A[F+2]+=(g.colors[F+2]-A[F+2])*X}c.current.attributes.position.needsUpdate=!0,c.current.attributes.color.needsUpdate=!0,I.uTime.value=S.clock.elapsedTime}),D.jsxs("points",{ref:o,children:[D.jsxs("bufferGeometry",{ref:c,children:[D.jsx("bufferAttribute",{attach:"attributes-position",count:zt,array:T,itemSize:3}),D.jsx("bufferAttribute",{attach:"attributes-color",count:zt,array:d,itemSize:3}),D.jsx("bufferAttribute",{attach:"attributes-aRandom",count:zt,array:m,itemSize:1}),D.jsx("bufferAttribute",{attach:"attributes-aRandomPos",count:zt,array:E,itemSize:3})]}),D.jsx("shaderMaterial",{ref:p,args:[Lh],"uniforms-uGlobalColor-value":new Fe(s)})]})},Fh=({currentShape:r,currentColor:s,gestureState:a})=>D.jsxs(ed,{camera:{position:[...Ih],fov:kh},gl:{antialias:!1,alpha:!0,powerPreference:"high-performance"},dpr:[1,2],children:[D.jsx("color",{attach:"background",args:["#000000"]}),D.jsx("fog",{attach:"fog",args:["#000000",10,40]}),D.jsx("ambientLight",{intensity:.5}),D.jsx(Bh,{shape:r,color:s,gestureState:a}),D.jsx(Ph,{disableNormalPass:!0,multisampling:0,children:D.jsx(zh,{luminanceThreshold:.2,mipmapBlur:!0,intensity:1.5,radius:.6})}),D.jsx(Nh,{enableZoom:!0,enablePan:!1,enableRotate:!a.isHandDetected,autoRotate:!a.isHandDetected,autoRotateSpeed:.5})]});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hh={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Je=(r,s)=>{const a=B.forwardRef(({color:o="currentColor",size:c=24,strokeWidth:p=2,absoluteStrokeWidth:f,className:v="",children:g,...T},d)=>B.createElement("svg",{ref:d,...Hh,width:c,height:c,stroke:o,strokeWidth:f?Number(p)*24/Number(c):p,className:["lucide",`lucide-${jh(r)}`,v].join(" "),...T},[...s.map(([m,E])=>B.createElement(m,E)),...Array.isArray(g)?g:[g]]));return a.displayName=`${r}`,a};/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=Je("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=Je("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=Je("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=Je("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=Je("Grab",[["path",{d:"M18 11.5V9a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v1.4",key:"n5nng"}],["path",{d:"M14 10V8a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"185i9d"}],["path",{d:"M10 9.9V9a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v5",key:"11pz95"}],["path",{d:"M6 14v0a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"16yk7l"}],["path",{d:"M18 11v0a2 2 0 1 1 4 0v3a8 8 0 0 1-8 8h-4a8 8 0 0 1-8-8 2 2 0 1 1 4 0",key:"nzvb1c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=Je("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=Je("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=Je("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=Je("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=Je("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=Je("MousePointer2",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=Je("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=Je("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=Je("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=Je("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=Je("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),rp=({currentShape:r,setShape:s,currentColor:a,setColor:o,gestureState:c,isFullscreen:p,toggleFullscreen:f})=>{const v=g=>{switch(g){case Re.TREE:return D.jsx(Ga,{size:20});case Re.HEART:return D.jsx(Xh,{size:20});case Re.STAR:return D.jsx(tp,{size:20});case Re.SPHERE:return D.jsx(np,{size:20});case Re.CUBE:return D.jsx(Wh,{size:20});default:return D.jsx(Ga,{size:20})}};return D.jsxs("div",{className:"absolute inset-0 pointer-events-none flex flex-col justify-between p-6",children:[D.jsxs("div",{className:"flex justify-between items-start pointer-events-auto",children:[D.jsxs("div",{className:"flex flex-col gap-2",children:[D.jsx("h1",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-yellow-200 to-yellow-500 drop-shadow-sm filter",children:"Holiday Particles"}),D.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/60 bg-black/40 px-3 py-1 rounded-full backdrop-blur-md w-fit border border-white/10",children:[D.jsx("span",{className:`w-2 h-2 rounded-full ${c.isHandDetected?"bg-green-500 animate-pulse":"bg-red-500"}`}),c.isHandDetected?"Hand Detected":"No Hand Detected"]})]}),D.jsx("button",{onClick:f,className:"p-3 bg-white/10 hover:bg-white/20 text-white rounded-full backdrop-blur-md transition-all border border-white/10",children:p?D.jsx(qh,{size:20}):D.jsx(Zh,{size:20})})]}),D.jsx("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 transition-opacity duration-500 pointer-events-none ${c.isHandDetected?"opacity-30":"opacity-80"}`,children:!c.isHandDetected&&D.jsx("div",{className:"text-center space-y-4",children:D.jsx("p",{className:"text-white/80 text-lg font-light tracking-wide",children:"Raise your hand to control"})})}),D.jsx("div",{className:`absolute top-1/2 right-6 -translate-y-1/2 flex flex-col gap-4 pointer-events-auto transition-opacity duration-300 ${c.isHandDetected?"opacity-100":"opacity-0"}`,children:D.jsxs("div",{className:"bg-black/50 backdrop-blur-md p-4 rounded-xl border border-white/10 space-y-4 shadow-xl w-48",children:[D.jsxs("div",{className:`flex items-center gap-3 ${c.gesture==="OPEN"?"text-yellow-400":"text-white/50"}`,children:[D.jsx(Yh,{size:24}),D.jsxs("div",{className:"flex flex-col",children:[D.jsx("span",{className:"text-sm font-semibold",children:"5 Fingers Open"}),D.jsx("span",{className:"text-[10px] uppercase text-white/70",children:"Scatter & Rotate"})]})]}),D.jsxs("div",{className:`flex items-center gap-3 ${c.gesture==="CLOSED"?"text-yellow-400":"text-white/50"}`,children:[D.jsx(Qh,{size:24}),D.jsxs("div",{className:"flex flex-col",children:[D.jsx("span",{className:"text-sm font-semibold",children:"Fist"}),D.jsx("span",{className:"text-[10px] uppercase text-white/70",children:"Aggregate"})]})]}),D.jsxs("div",{className:`flex items-center gap-3 ${c.gesture==="VICTORY"?"text-yellow-400":"text-white/50"}`,children:[D.jsx(Gh,{size:24}),D.jsxs("div",{className:"flex flex-col",children:[D.jsx("span",{className:"text-sm font-semibold",children:"2 Fingers (Peace)"}),D.jsx("span",{className:"text-[10px] uppercase text-white/70",children:"Reveal Message"})]})]}),D.jsxs("div",{className:`flex items-center gap-3 ${c.gesture==="POINTING"?"text-yellow-400":"text-white/50"}`,children:[D.jsx(Jh,{size:24,className:"transform -rotate-45"}),D.jsxs("div",{className:"flex flex-col",children:[D.jsx("span",{className:"text-sm font-semibold",children:"One Finger"}),D.jsx("span",{className:"text-[10px] uppercase text-white/70",children:"Flip / Invert"})]})]})]})}),D.jsxs("div",{className:"flex flex-col md:flex-row items-end md:items-center gap-6 pointer-events-auto w-full md:w-auto mx-auto bg-black/60 backdrop-blur-lg p-4 rounded-2xl border border-white/10",children:[D.jsx("div",{className:"flex items-center gap-2 overflow-x-auto w-full md:w-auto pb-2 md:pb-0",children:Object.values(Re).map(g=>D.jsxs("button",{onClick:()=>{s(g),o(Dh[g].color)},className:`p-3 rounded-xl transition-all flex items-center gap-2 min-w-[100px] border ${r===g?"bg-white/20 border-yellow-500/50 text-yellow-300 shadow-[0_0_15px_rgba(253,224,71,0.3)]":"bg-transparent border-transparent text-white/60 hover:bg-white/5"}`,children:[v(g),D.jsx("span",{className:"text-sm font-medium",children:g})]},g))}),D.jsx("div",{className:"h-8 w-[1px] bg-white/20 hidden md:block"}),D.jsxs("div",{className:"flex items-center gap-3",children:[D.jsx("label",{className:"text-xs uppercase tracking-wider text-white/60",children:"Color"}),D.jsxs("div",{className:"relative group",children:[D.jsx("input",{type:"color",value:a,onChange:g=>o(g.target.value),className:"w-10 h-10 rounded-full cursor-pointer opacity-0 absolute inset-0 z-10"}),D.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-white/30 shadow-inner",style:{backgroundColor:a}})]})]})]})]})},ip=({onGestureUpdate:r})=>{const s=B.useRef(null),a=B.useRef(null),[o,c]=B.useState("IDLE"),[p,f]=B.useState("IDLE"),[v,g]=B.useState(!1),T=B.useRef(0),d=B.useRef(null),m=B.useRef(-1),E=B.useRef(0),S=B.useRef(0),P=B.useRef(null);B.useEffect(()=>{let O=!0;return(async()=>{try{c("LOADING");const U=await lf.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.9/wasm");if(!O)return;try{const X=await ol.createFromOptions(U,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/hand_landmarker/hand_landmarker/float16/1/hand_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",numHands:1,minHandDetectionConfidence:.5,minHandPresenceConfidence:.5,minTrackingConfidence:.5});O&&(d.current=X)}catch(X){console.warn("GPU Failed, using CPU",X);const G=await ol.createFromOptions(U,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/hand_landmarker/hand_landmarker/float16/1/hand_landmarker.task",delegate:"CPU"},runningMode:"VIDEO",numHands:1});O&&(d.current=G)}O&&c("READY")}catch(U){console.error("AI Init Failed",U),O&&c("ERROR")}})(),()=>{O=!1,d.current&&d.current.close()}},[]);const I=()=>{P.current&&(P.current.getTracks().forEach(O=>O.stop()),P.current=null),s.current&&(s.current.srcObject=null),g(!1)},k=async()=>{if(I(),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){console.error("getUserMedia not supported"),f("ERROR");return}try{f("REQUESTING");const O=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},facingMode:"user"},audio:!1});P.current=O,s.current&&(s.current.srcObject=O,s.current.onloadedmetadata=()=>{s.current&&s.current.play().then(()=>{g(!0),f("READY"),requestAnimationFrame(M)}).catch(A=>{console.error("Autoplay blocked",A),f("READY"),g(!1)})})}catch(O){console.error("Camera denied",O),f("PERM_DENIED")}};B.useEffect(()=>(k(),()=>{I(),T.current&&cancelAnimationFrame(T.current)}),[]);const M=()=>{const O=s.current,A=a.current,U=d.current;if(O&&A&&U&&!O.paused&&!O.ended&&O.currentTime!==m.current){m.current=O.currentTime;const X=performance.now();try{const G=U.detectForVideo(O,X),F=A.getContext("2d");if(F){if(F.clearRect(0,0,A.width,A.height),F.save(),F.scale(-1,1),F.translate(-A.width,0),G.landmarks&&G.landmarks.length>0){const L=G.landmarks[0],H=new of(F);H.drawConnectors(L,ol.HAND_CONNECTIONS,{color:"rgba(0, 255, 0, 0.3)",lineWidth:1}),H.drawLandmarks(L,{color:"rgba(255, 255, 255, 0.5)",lineWidth:1,radius:2});const $=L[0],le=(et,jt)=>{const Nt=Math.sqrt(Math.pow(L[et].x-$.x,2)+Math.pow(L[et].y-$.y,2)),Kt=Math.sqrt(Math.pow(L[jt].x-$.x,2)+Math.pow(L[jt].y-$.y,2));return Nt>Kt*1.1},ze=le(4,2),Ne=le(8,5),Te=le(12,9),He=le(16,13),j=le(20,17);let Z="NEUTRAL";const Y=(ze?1:0)+(Ne?1:0)+(Te?1:0)+(He?1:0)+(j?1:0);Y===5||Y===4?Z="OPEN":Y===0||Y===1?Z="CLOSED":Ne&&Te&&!He&&!j?Z="VICTORY":Ne&&!Te&&!He&&!j&&(Z="POINTING");let ee=E.current;Z==="OPEN"&&(ee=(1-L[0].x)*2-1,E.current=ee);let ue=S.current;Z==="POINTING"&&(ue=(L[8].y-.5)*2,S.current=ue);const fe=[8,12,16,20];let ke=0;fe.forEach(et=>{const jt=L[et].x-$.x,Nt=L[et].y-$.y;ke+=Math.sqrt(jt*jt+Nt*Nt)});const Ge=Math.sqrt(Math.pow(L[9].x-$.x,2)+Math.pow(L[9].y-$.y,2)),$e=Math.min(Math.max(ke/4/(Ge*2.5),0),1);r({isHandDetected:!0,gesture:Z,rotation:ee,pitch:ue,pinchDistance:$e})}else r({isHandDetected:!1,gesture:"NEUTRAL",rotation:E.current,pitch:S.current,pinchDistance:.5});F.restore()}}catch(G){console.warn("Prediction Error",G)}}T.current=requestAnimationFrame(M)},_=()=>{k()},C=()=>p==="PERM_DENIED"?D.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-900/95 p-4 text-center z-10",children:[D.jsx(bh,{className:"w-8 h-8 text-white mb-2"}),D.jsx("p",{className:"text-white text-xs mb-3",children:"Camera blocked. Please allow access."}),D.jsxs("button",{onClick:_,className:"px-3 py-1 bg-white text-black text-xs font-bold rounded-full flex items-center gap-1 hover:bg-gray-200",children:[D.jsx(ep,{size:12})," Retry"]})]}):o==="LOADING"||p==="REQUESTING"?D.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80",children:[D.jsx(Kh,{className:"w-6 h-6 text-yellow-400 animate-spin mb-2"}),D.jsx("p",{className:"text-white text-xs",children:o==="LOADING"?"Loading AI...":"Starting Camera..."})]}):p==="READY"&&!v?D.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/60 hover:bg-black/40 cursor-pointer group",onClick:()=>{s.current&&(s.current.play().then(()=>g(!0)),requestAnimationFrame(M))},children:[D.jsx("div",{className:"bg-white/20 p-3 rounded-full group-hover:scale-110 transition-transform backdrop-blur-md",children:D.jsx($h,{className:"w-6 h-6 text-white fill-white"})}),D.jsx("p",{className:"text-white text-xs mt-2 font-semibold",children:"Start"})]}):null;return D.jsxs("div",{className:"fixed bottom-4 right-4 w-48 h-36 bg-black rounded-xl overflow-hidden border border-white/10 shadow-2xl z-50",children:[D.jsxs("div",{className:"relative w-full h-full",children:[D.jsx("video",{ref:s,className:"absolute inset-0 w-full h-full object-cover transform scale-x-[-1]",playsInline:!0,muted:!0}),D.jsx("canvas",{ref:a,className:"absolute inset-0 w-full h-full object-cover",width:640,height:480}),C(),D.jsxs("div",{className:"absolute top-2 left-2 flex items-center gap-1.5 bg-black/40 backdrop-blur px-2 py-0.5 rounded text-[10px] text-white/70",children:[D.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${v&&o==="READY"?"bg-green-500 animate-pulse":"bg-yellow-500"}`}),D.jsx("span",{children:"GESTURE"})]})]}),(p==="ERROR"||p==="IDLE"&&o==="ERROR")&&D.jsxs("button",{onClick:_,className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-900 z-50 hover:bg-gray-800 transition-colors",children:[D.jsx(Vh,{className:"w-6 h-6 text-white mb-1"}),D.jsx("span",{className:"text-xs text-white",children:"Enable Camera"})]})]})};function sp(){const[r,s]=B.useState(Re.TREE),[a,o]=B.useState(Ah),[c,p]=B.useState(!1),[f,v]=B.useState({isHandDetected:!1,gesture:"NEUTRAL",rotation:0,pitch:0,pinchDistance:.5}),g=B.useCallback(()=>{document.fullscreenElement?document.exitFullscreen().then(()=>p(!1)):document.documentElement.requestFullscreen().then(()=>p(!0))},[]);return D.jsxs("div",{className:"relative w-full h-screen bg-black overflow-hidden select-none",children:[D.jsx("div",{className:"absolute inset-0 z-0",children:D.jsx(Fh,{currentShape:r,currentColor:a,gestureState:f})}),D.jsx("div",{className:"absolute inset-0 z-10 pointer-events-none",children:D.jsx(rp,{currentShape:r,setShape:s,currentColor:a,setColor:o,gestureState:f,isFullscreen:c,toggleFullscreen:g})}),D.jsx(ip,{onGestureUpdate:v})]})}const Wa=document.getElementById("root");Wa&&$a(Wa).render(D.jsx(sp,{}));
